import{$ as ht,A as de,Aa as H,B as D,Ba as Ht,C as tt,Ca as Se,D as ce,Da as Nt,E as Y,Ea as At,F as he,Fa as jt,G as ge,Ga as kt,H as it,Ha as Lt,I as nt,Ia as Wt,J as ue,Ja as Ot,K as st,Ka as Vt,L as fe,La as zt,M as j,Ma as Ut,N as pe,Na as q,O as rt,P as ve,Q as T,R as k,S as B,T as lt,U as ot,V as I,W as at,X as dt,Y as ct,Z as L,_,a as f,aa as gt,b as C,ba as ut,c as R,ca as ft,d as ze,da as pt,e as Ue,ea as vt,f as M,fa as me,g as O,ga as mt,h as Ye,ha as Ee,i as Be,ia as Et,j as _e,ja as W,k as V,ka as yt,l as z,la as St,m as Fe,ma as bt,n as Xe,na as x,o as qe,oa as Dt,p as Ge,pa as F,q as Ke,qa as Rt,r as oe,ra as wt,s as ae,sa as X,t as U,ta as Ct,u as $e,ua as Mt,v as Ze,va as Tt,w as Qe,wa as xt,x as Je,xa as Pt,y as et,ya as ye,z as w,za as It}from"./chunk-DKUPX3E6.js";var be=class extends x{constructor(){super(...arguments),this.headerElRef=C()}renderSimpleLayout(e,t){let{props:i,context:n}=this,s=[],r=Se(n.options);return e&&s.push({type:"header",key:"header",isSticky:r,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),f(ge,{elClasses:["fc-daygrid"],viewSpec:n.viewSpec},f(At,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,t,i,n){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:r,context:l}=this,a=!r.forPrint&&Se(l.options),c=!r.forPrint&&Nt(l.options),d=[];return e&&d.push({type:"header",key:"header",isSticky:a,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),c&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:Ht}]}),f(ge,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},f(s,{liquid:!r.isHeightAuto&&!r.forPrint,forPrint:r.forPrint,collapsibleWidth:r.forPrint,colGroups:[{cols:[{span:i,minWidth:n}]}],sections:d}))}};function G(o,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of o)t[i.row].push(i);return t}function K(o,e){let t=[];for(let i=0;i<e;i+=1)t[i]=[];for(let i of o)t[i.firstCol].push(i);return t}function Yt(o,e){let t=[];if(o){for(let i=0;i<e;i+=1)t[i]={affectedInstances:o.affectedInstances,isEvent:o.isEvent,segs:[]};for(let i of o.segs)t[i.row].segs.push(i)}else for(let i=0;i<e;i+=1)t[i]=null;return t}var Bt=de({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function _t(o){let{display:e}=o.eventRange.ui;return e==="list-item"||e==="auto"&&!o.eventRange.def.allDay&&o.firstCol===o.lastCol&&o.isStart&&o.isEnd}var $=class extends Y{render(){let{props:e}=this;return f(kt,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:Bt,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}},Z=class extends Y{render(){let{props:e,context:t}=this,{options:i}=t,{seg:n}=e,s=i.eventTimeFormat||Bt,r=ot(n,s,t,!0,e.defaultDisplayEventEnd);return f(jt,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:dt(e.seg,t),defaultGenerator:Zt,timeText:r,isResizing:!1,isDateSelecting:!1}))}};function Zt(o){return f(R,null,f("div",{className:"fc-daygrid-event-dot",style:{borderColor:o.borderColor||o.backgroundColor}}),o.timeText&&f("div",{className:"fc-event-time"},o.timeText),f("div",{className:"fc-event-title"},o.event.title||f(R,null,"\xA0")))}var De=class extends Y{constructor(){super(...arguments),this.compileSegs=w(Qt)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:i}=this.compileSegs(e.singlePlacements);return f(Ut,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:i,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let n=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return f(R,null,t.map(s=>{let r=s.eventRange.instance.instanceId;return f("div",{className:"fc-daygrid-event-harness",key:r,style:{visibility:n[r]?"hidden":""}},_t(s)?f(Z,Object.assign({seg:s,isDragging:!1,isSelected:r===e.eventSelection,defaultDisplayEventEnd:!1},I(s,e.todayRange))):f($,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:r===e.eventSelection,defaultDisplayEventEnd:!1},I(s,e.todayRange))))}))}})}};function Qt(o){let e=[],t=[];for(let i of o)e.push(i.seg),i.isVisible||t.push(i.seg);return{allSegs:e,invisibleSegs:t}}var Jt=de({week:"narrow"}),Re=class extends x{constructor(){super(...arguments),this.rootElRef=C(),this.state={dayNumberId:Be()},this.handleRootEl=e=>{he(this.rootElRef,e),he(this.props.elRef,e)}}render(){let{context:e,props:t,state:i,rootElRef:n}=this,{options:s,dateEnv:r}=e,{date:l,dateProfile:a}=t,c=t.showDayNumber&&ti(l,a.currentRange,r);return f(Lt,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":i.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:ei,date:l,dateProfile:a,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:c,extraRenderProps:t.extraRenderProps},(d,g)=>f("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&f(zt,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:me(e,l,"week"),date:l,defaultFormat:Jt}),!g.isDisabled&&(t.showDayNumber||Wt(s)||t.forceDayTop)?f("div",{className:"fc-daygrid-day-top"},f(d,{elTag:"a",elClasses:["fc-daygrid-day-number",c&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},me(e,l)),{id:i.dayNumberId})})):t.showDayNumber?f("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},f("a",{className:"fc-daygrid-day-number"},"\xA0")):void 0,f("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,f("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},f(De,{allDayDate:l,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:n,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),f("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}};function ei(o){return o.dayNumberText||f(R,null,"\xA0")}function ti(o,e,t){let{start:i,end:n}=e,s=$e(n,-1),r=t.getYear(i),l=t.getMonth(i),a=t.getYear(s),c=t.getMonth(s);return!(r===a&&l===c)&&(o.valueOf()===i.valueOf()||t.getDay(o)===1&&o.valueOf()<n.valueOf())}function Ft(o){return o.eventRange.instance.instanceId+":"+o.firstCol}function Xt(o){return Ft(o)+":"+o.lastCol}function ii(o,e,t,i,n,s,r){let l=new we(E=>{let y=o[E.index].eventRange.instance.instanceId+":"+E.span.start+":"+(E.span.end-1);return n[y]||1});l.allowReslicing=!0,l.strictOrder=i,e===!0||t===!0?(l.maxCoord=s,l.hiddenConsumes=!0):typeof e=="number"?l.maxStackCnt=e:typeof t=="number"&&(l.maxStackCnt=t,l.hiddenConsumes=!0);let a=[],c=[];for(let E=0;E<o.length;E+=1){let y=o[E],b=Xt(y);n[b]!=null?a.push({index:E,span:{start:y.firstCol,end:y.lastCol+1}}):c.push(y)}let d=l.addSegs(a),g=l.toRects(),{singleColPlacements:p,multiColPlacements:h,leftoverMargins:m}=ni(g,o,r),v=[],u=[];for(let E of c){h[E.firstCol].push({seg:E,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let y=E.firstCol;y<=E.lastCol;y+=1)p[y].push({seg:N(E,y,y+1,r),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let E=0;E<r.length;E+=1)v.push(0);for(let E of d){let y=o[E.index],b=E.span;h[b.start].push({seg:N(y,b.start,b.end,r),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let S=b.start;S<b.end;S+=1)v[S]+=1,p[S].push({seg:N(y,S,S+1,r),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let E=0;E<r.length;E+=1)u.push(m[E]);return{singleColPlacements:p,multiColPlacements:h,moreCnts:v,moreMarginTops:u}}function ni(o,e,t){let i=si(o,t.length),n=[],s=[],r=[];for(let l=0;l<t.length;l+=1){let a=i[l],c=[],d=0,g=0;for(let h of a){let m=e[h.index];c.push({seg:N(m,l,l+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:h.levelCoord-d}),d=h.levelCoord+h.thickness}let p=[];d=0,g=0;for(let h of a){let m=e[h.index],v=h.span.end-h.span.start>1,u=h.span.start===l;g+=h.levelCoord-d,d=h.levelCoord+h.thickness,v?(g+=h.thickness,u&&p.push({seg:N(m,h.span.start,h.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:h.levelCoord,marginTop:0})):u&&(p.push({seg:N(m,h.span.start,h.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:h.levelCoord,marginTop:g}),g=0)}n.push(c),s.push(p),r.push(g)}return{singleColPlacements:n,multiColPlacements:s,leftoverMargins:r}}function si(o,e){let t=[];for(let i=0;i<e;i+=1)t.push([]);for(let i of o)for(let n=i.span.start;n<i.span.end;n+=1)t[n].push(i);return t}function N(o,e,t,i){if(o.firstCol===e&&o.lastCol===t-1)return o;let n=o.eventRange,s=n.range,r=it(s,{start:i[e].date,end:U(i[t-1].date,1)});return Object.assign(Object.assign({},o),{firstCol:e,lastCol:t-1,eventRange:{def:n.def,ui:Object.assign(Object.assign({},n.ui),{durationEditable:!1}),instance:n.instance,range:r},isStart:o.isStart&&r.start.valueOf()===s.start.valueOf(),isEnd:o.isEnd&&r.end.valueOf()===s.end.valueOf()})}var we=class extends Dt{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){let t=super.addSegs(e),{entriesByLevel:i}=this,n=s=>!this.forceHidden[F(s)];for(let s=0;s<i.length;s+=1)i[s]=i[s].filter(n);return t}handleInvalidInsertion(e,t,i){let{entriesByLevel:n,forceHidden:s}=this,{touchingEntry:r,touchingLevel:l,touchingLateral:a}=e;if(this.hiddenConsumes&&r){let c=F(r);if(!s[c])if(this.allowReslicing){let d=Object.assign(Object.assign({},r),{span:Rt(r.span,t.span)}),g=F(d);s[g]=!0,n[l][a]=d,i.push(d),this.splitEntry(r,t,i)}else s[c]=!0,i.push(r)}super.handleInvalidInsertion(e,t,i)}},Q=class extends x{constructor(){super(...arguments),this.cellElRefs=new H,this.frameElRefs=new H,this.fgElRefs=new H,this.segHarnessRefs=new H,this.rootElRef=C(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:i}=this,{options:n}=i,s=e.cells.length,r=K(e.businessHourSegs,s),l=K(e.bgEventSegs,s),a=K(this.getHighlightSegs(),s),c=K(this.getMirrorSegs(),s),{singleColPlacements:d,multiColPlacements:g,moreCnts:p,moreMarginTops:h}=ii(lt(e.fgEventSegs,n.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,n.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),m=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return f("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((v,u)=>{let E=this.renderFgSegs(u,e.forPrint?d[u]:g[u],e.todayRange,m),y=this.renderFgSegs(u,ri(c[u],g),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return f(Re,{key:v.key,elRef:this.cellElRefs.createRef(v.key),innerElRef:this.frameElRefs.createRef(v.key),dateProfile:e.dateProfile,date:v.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&u===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:v.extraRenderProps,extraDataAttrs:v.extraDataAttrs,extraClassNames:v.extraClassNames,extraDateSpan:v.extraDateSpan,moreCnt:p[u],moreMarginTop:h[u],singlePlacements:d[u],fgContentElRef:this.fgElRefs.createRef(v.key),fgContent:f(R,null,f(R,null,E),f(R,null,y)),bgContent:f(R,null,this.renderFillSegs(a[u],"highlight"),this.renderFillSegs(r[u],"non-business"),this.renderFillSegs(l[u],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let i=this.props;this.updateSizing(!ce(e,i))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,i,n,s,r,l){let{context:a}=this,{eventSelection:c}=this.props,{framePositions:d}=this.state,g=this.props.cells.length===1,p=s||r||l,h=[];if(d)for(let m of t){let{seg:v}=m,{instanceId:u}=v.eventRange.instance,E=m.isVisible&&!n[u],y=m.isAbsolute,b="",S="";y&&(a.isRtl?(S=0,b=d.lefts[v.lastCol]-d.lefts[v.firstCol]):(b=0,S=d.rights[v.firstCol]-d.rights[v.lastCol])),h.push(f("div",{className:"fc-daygrid-event-harness"+(y?" fc-daygrid-event-harness-abs":""),key:Ft(v),ref:p?null:this.segHarnessRefs.createRef(Xt(v)),style:{visibility:E?"":"hidden",marginTop:y?"":m.marginTop,top:y?m.absoluteTop:"",left:b,right:S}},_t(v)?f(Z,Object.assign({seg:v,isDragging:s,isSelected:u===c,defaultDisplayEventEnd:g},I(v,i))):f($,Object.assign({seg:v,isDragging:s,isResizing:r,isDateSelecting:l,isSelected:u===c,defaultDisplayEventEnd:g},I(v,i)))))}return h}renderFillSegs(e,t){let{isRtl:i}=this.context,{todayRange:n}=this.props,{framePositions:s}=this.state,r=[];if(s)for(let l of e){let a=i?{right:0,left:s.lefts[l.lastCol]-s.lefts[l.firstCol]}:{left:0,right:s.rights[l.firstCol]-s.rights[l.lastCol]};r.push(f("div",{key:at(l.eventRange),className:"fc-daygrid-bg-harness",style:a},t==="bg-event"?f(Ot,Object.assign({seg:l},I(l,n))):Vt(t)))}return f(R,{},...r)}updateSizing(e){let{props:t,state:i,frameElRefs:n}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let a=t.cells.map(c=>n.currentMap[c.key]);if(a.length){let c=this.rootElRef.current,d=new W(c,a,!0,!1);(!i.framePositions||!i.framePositions.similarTo(d))&&this.setState({framePositions:new W(c,a,!0,!1)})}}let s=this.state.segHeights,r=this.querySegHeights(),l=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},s),r),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let i in e){let n=Math.round(e[i].getBoundingClientRect().height);t[i]=Math.max(t[i]||0,n)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],i=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-i.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}};Q.addStateEquality({segHeights:ce});function ri(o,e){if(!o.length)return[];let t=li(e);return o.map(i=>({seg:i,isVisible:!0,isAbsolute:!0,absoluteTop:t[i.eventRange.instance.instanceId],marginTop:0}))}function li(o){let e={};for(let t of o)for(let i of t)e[i.seg.eventRange.instance.instanceId]=i.absoluteTop;return e}var Ce=class extends x{constructor(){super(...arguments),this.splitBusinessHourSegs=w(G),this.splitBgEventSegs=w(G),this.splitFgEventSegs=w(G),this.splitDateSelectionSegs=w(G),this.splitEventDrag=w(Yt),this.splitEventResize=w(Yt),this.rowRefs=new H}render(){let{props:e,context:t}=this,i=e.cells.length,n=this.splitBusinessHourSegs(e.businessHourSegs,i),s=this.splitBgEventSegs(e.bgEventSegs,i),r=this.splitFgEventSegs(e.fgEventSegs,i),l=this.splitDateSelectionSegs(e.dateSelectionSegs,i),a=this.splitEventDrag(e.eventDrag,i),c=this.splitEventResize(e.eventResize,i),d=i>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return f(Ct,{unit:"day"},(g,p)=>f(R,null,e.cells.map((h,m)=>f(Q,{ref:this.rowRefs.createRef(m),key:h.length?h[0].date.toISOString():m,showDayNumbers:i>1,showWeekNumbers:e.showWeekNumbers,todayRange:p,dateProfile:e.dateProfile,cells:h,renderIntro:e.renderRowIntro,businessHourSegs:n[m],eventSelection:e.eventSelection,bgEventSegs:s[m].filter(oi),fgEventSegs:r[m],dateSelectionSegs:l[m],eventDrag:a[m],eventResize:c[m],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:d,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){let e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new W(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new W(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:i,rowPositions:n}=this,s=i.leftToIndex(e),r=n.topToIndex(t);if(r!=null&&s!=null){let l=this.props.cells[r][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(r,s),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(r,s),rect:{left:i.lefts[s],right:i.rights[s],top:n.tops[r],bottom:n.bottoms[r]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let i=this.props.cells[e][t].date,n=U(i,1);return{start:i,end:n}}};function oi(o){return o.eventRange.def.allDay}var Me=class extends x{constructor(){super(...arguments),this.elRef=C(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:i,expandRows:n}=e,s=i===!0||t===!0;s&&!n&&(s=!1,t=null,i=null);let r=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",n?"":"fc-daygrid-body-natural"];return f("div",{ref:this.elRef,className:r.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},f("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:n?e.clientHeight:""}},e.colGroupNode,f("tbody",{role:"presentation"},f(Ce,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:i,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){let e=ai(this.elRef.current,this.props.dateProfile);if(e){let t=e.closest(".fc-daygrid-body"),i=t.closest(".fc-scroller"),n=e.getBoundingClientRect().top-t.getBoundingClientRect().top;i.scrollTop=n?n+1:0}this.needsScrollReset=!1}}};function ai(o,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=o.querySelector(`[data-date="${et(e.currentDate)}-01"]`)),t||(t=o.querySelector(`[data-date="${Je(e.currentDate)}"]`)),t}var Te=class extends Pt{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}},xe=class extends x{constructor(){super(...arguments),this.slicer=new Te,this.tableRef=C()}render(){let{props:e,context:t}=this;return f(Me,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}},J=class extends be{constructor(){super(...arguments),this.buildDayTableModel=w(di),this.headerRef=C(),this.tableRef=C()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:i}=this,n=this.buildDayTableModel(i.dateProfile,t),s=e.dayHeaders&&f(Mt,{ref:this.headerRef,dateProfile:i.dateProfile,dates:n.headerDates,datesRepDistinctDays:n.rowCnt===1}),r=l=>f(xe,{ref:this.tableRef,dateProfile:i.dateProfile,dayTableModel:n,businessHours:i.businessHours,dateSelection:i.dateSelection,eventStore:i.eventStore,eventUiBases:i.eventUiBases,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!i.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:i.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,r,n.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,r)}};function di(o,e){let t=new Tt(o.renderRange,e);return new xt(t,/year|month|week/.test(o.currentRangeUnit))}var ee=class extends st{buildRenderRange(e,t,i){let n=super.buildRenderRange(e,t,i),{props:s}=this;return ci({currentRange:n,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}};function ci(o){let{dateEnv:e,currentRange:t}=o,{start:i,end:n}=t,s;if(o.snapToWeek&&(i=e.startOfWeek(i),s=e.startOfWeek(n),s.valueOf()!==n.valueOf()&&(n=ae(s,1))),o.fixedWeekCount){let r=e.startOfWeek(e.startOfMonth(U(t.end,-1))),l=Math.ceil(Ze(r,n));n=ae(n,6-l)}return{start:i,end:n}}var hi=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';ze(hi);var Ii=q({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:J,dateProfileGeneratorClass:ee},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});X.touchMouseIgnoreWait=500;var Pe=0,te=0,Ie=!1,ie=class{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&gi(t)&&this.tryStart(t)){let i=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let i=this.createEventFromMouse(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let i=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i);let n=t.target;this.shouldIgnoreMove||n.addEventListener("touchmove",this.handleTouchMove),n.addEventListener("touchend",this.handleTouchEnd),n.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let i=this.createEventFromTouch(t);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleTouchEnd=t=>{if(this.isDragging){let i=t.target;i.removeEventListener("touchmove",this.handleTouchMove),i.removeEventListener("touchend",this.handleTouchEnd),i.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,ui()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let i=window.scrollX-this.prevScrollX+this.prevPageX,n=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:i,pageY:n,deltaX:i-this.origPageX,deltaY:n-this.origPageY})}},this.containerEl=e,this.emitter=new pe,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),fi()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),pi()}tryStart(e){let t=this.querySubjectEl(e),i=e.target;return t&&(!this.handleSelector||M(i,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Ie=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?M(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return Pe||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Ie=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let i=0,n=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(i=e.pageX-this.origPageX,n=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:i,deltaY:n}}createEventFromTouch(e,t){let i=e.touches,n,s,r=0,l=0;return i&&i.length?(n=i[0].pageX,s=i[0].pageY):(n=e.pageX,s=e.pageY),t?(this.origPageX=n,this.origPageY=s):(r=n-this.origPageX,l=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:n,pageY:s,deltaX:r,deltaY:l}}};function gi(o){return o.button===0&&!o.ctrlKey}function ui(){Pe+=1,setTimeout(()=>{Pe-=1},X.touchMouseIgnoreWait)}function fi(){te+=1,te===1&&window.addEventListener("touchmove",Gt,{passive:!1})}function pi(){te-=1,te||window.removeEventListener("touchmove",Gt,{passive:!1})}function Gt(o){Ie&&o.preventDefault()}var He=class{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,i){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=i-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let i=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)}doRevertAnimation(e,t){let i=this.mirrorEl,n=this.sourceEl.getBoundingClientRect();i.style.transition="top "+t+"ms,left "+t+"ms",O(i,{left:n.left,top:n.top}),_e(i,()=>{i.style.transition="",e()})}cleanup(){this.mirrorEl&&(Ue(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&O(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),O(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}},ne=class extends yt{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}},se=class extends ne{constructor(e,t){super(new St(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return mt(this.scrollController.el)}},Ne=class extends ne{constructor(e){super(new bt,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}},qt=typeof performance=="function"?performance.now:Date.now,Ae=class{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=qt();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,i){this.isEnabled&&(this.scrollCaches=this.buildCaches(i),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let i=e-window.scrollX,n=t-window.scrollY,s=this.pointerScreenY===null?0:n-this.pointerScreenY,r=this.pointerScreenX===null?0:i-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),r<0?this.everMovedLeft=!0:r>0&&(this.everMovedRight=!0),this.pointerScreenX=i,this.pointerScreenY=n,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(qt()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:i}=e,{edgeThreshold:n}=this,s=n-e.distance,r=s*s/(n*n)*this.maxVelocity*t,l=1;switch(e.name){case"left":l=-1;case"right":i.setScrollLeft(i.getScrollLeft()+r*l);break;case"top":l=-1;case"bottom":i.setScrollTop(i.getScrollTop()+r*l);break}}computeBestEdge(e,t){let{edgeThreshold:i}=this,n=null,s=this.scrollCaches||[];for(let r of s){let l=r.clientRect,a=e-l.left,c=l.right-e,d=t-l.top,g=l.bottom-t;a>=0&&c>=0&&d>=0&&g>=0&&(d<=i&&this.everMovedUp&&r.canScrollUp()&&(!n||n.distance>d)&&(n={scrollCache:r,name:"top",distance:d}),g<=i&&this.everMovedDown&&r.canScrollDown()&&(!n||n.distance>g)&&(n={scrollCache:r,name:"bottom",distance:g}),a<=i&&this.everMovedLeft&&r.canScrollLeft()&&(!n||n.distance>a)&&(n={scrollCache:r,name:"left",distance:a}),c<=i&&this.everMovedRight&&r.canScrollRight()&&(!n||n.distance>c)&&(n={scrollCache:r,name:"right",distance:c}))}return n}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new Ne(!1):new se(t,!1))}queryScrollEls(e){let t=[];for(let i of this.scrollQuery)typeof i=="object"?t.push(i):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(i)));return t}},P=class extends wt{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=n=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,Fe(document.body),qe(document.body),n.isTouch||n.origEvent.preventDefault(),this.emitter.trigger("pointerdown",n),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(n.subjectEl,n.pageX,n.pageY),this.startDelay(n),this.minDistance||this.handleDistanceSurpassed(n)))},this.onPointerMove=n=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",n),!this.isDistanceSurpassed){let s=this.minDistance,r,{deltaX:l,deltaY:a}=n;r=l*l+a*a,r>=s*s&&this.handleDistanceSurpassed(n)}this.isDragging&&(n.origEvent.type!=="scroll"&&(this.mirror.handleMove(n.pageX,n.pageY),this.autoScroller.handleMove(n.pageX,n.pageY)),this.emitter.trigger("dragmove",n))}},this.onPointerUp=n=>{this.isInteracting&&(this.isInteracting=!1,Xe(document.body),Ge(document.body),this.emitter.trigger("pointerup",n),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(n)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let i=this.pointer=new ie(e);i.emitter.on("pointerdown",this.onPointerDown),i.emitter.on("pointermove",this.onPointerMove),i.emitter.on("pointerup",this.onPointerUp),t&&(i.selector=t),this.mirror=new He,this.autoScroller=new Ae}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}},je=class{constructor(e){this.el=e,this.origRect=Ee(e),this.scrollCaches=Et(e).map(t=>new se(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let i={left:e,top:t};for(let n of this.scrollCaches)if(!vi(n.getEventTarget())&&!gt(i,n.clientRect))return!1;return!0}};function vi(o){let e=o.tagName;return e==="HTML"||e==="BODY"}var A=class{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=i=>{let{dragging:n}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(i),this.initialHit||!this.requireInitial?(n.setIgnoreMove(!1),this.emitter.trigger("pointerdown",i)):n.setIgnoreMove(!0)},this.handleDragStart=i=>{this.emitter.trigger("dragstart",i),this.handleMove(i,!0)},this.handleDragMove=i=>{this.emitter.trigger("dragmove",i),this.handleMove(i)},this.handlePointerUp=i=>{this.releaseHits(),this.emitter.trigger("pointerup",i)},this.handleDragEnd=i=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,i),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",i)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new pe}processFirstCoord(e){let t={left:e.pageX,top:e.pageY},i=t,n=e.subjectEl,s;n instanceof HTMLElement&&(s=Ee(n),i=ft(i,s));let r=this.initialHit=this.queryHitForOffset(i.left,i.top);if(r){if(this.useSubjectCenter&&s){let l=ut(s,r.rect);l&&(i=pt(l))}this.coordAdjust=vt(i,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let i=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!re(this.movingHit,i))&&(this.movingHit=i,this.emitter.trigger("hitupdate",i,!1,e))}prepareHits(){this.offsetTrackers=tt(this.droppableStore,e=>(e.component.prepareHits(),new je(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:i,offsetTrackers:n}=this,s=null;for(let r in i){let l=i[r].component,a=n[r];if(a&&a.isWithinClipping(e,t)){let c=a.computeLeft(),d=a.computeTop(),g=e-c,p=t-d,{origRect:h}=a,m=h.right-h.left,v=h.bottom-h.top;if(g>=0&&g<m&&p>=0&&p<v){let u=l.queryHit(g,p,m,v);u&&nt(u.dateProfile.activeRange,u.dateSpan.range)&&(this.disablePointCheck||a.el.contains(a.el.getRootNode().elementFromPoint(g+c-window.scrollX,p+d-window.scrollY)))&&(!s||u.layer>s.layer)&&(u.componentId=r,u.context=l.context,u.rect.left+=c,u.rect.right+=c,u.rect.top+=d,u.rect.bottom+=d,s=u)}}}return s}};function re(o,e){return!o&&!e?!0:!!o!=!!e?!1:ct(o.dateSpan,e.dateSpan)}function Kt(o,e){let t={};for(let i of e.pluginHooks.datePointTransforms)Object.assign(t,i(o,e));return Object.assign(t,mi(o,e.dateEnv)),t}function mi(o,e){return{date:e.toDate(o.range.start),dateStr:e.formatIso(o.range.start,{omitTime:o.allDay}),allDay:o.allDay}}var ke=class extends L{constructor(e){super(e),this.handlePointerDown=i=>{let{dragging:n}=this,s=i.origEvent.target;n.setIgnoreMove(!this.component.isValidDateDownEl(s))},this.handleDragEnd=i=>{let{component:n}=this,{pointer:s}=this.dragging;if(!s.wasTouchScroll){let{initialHit:r,finalHit:l}=this.hitDragging;if(r&&l&&re(r,l)){let{context:a}=n,c=Object.assign(Object.assign({},Kt(r.dateSpan,a)),{dayEl:r.dayEl,jsEvent:i.origEvent,view:a.viewApi||a.calendarApi.view});a.emitter.trigger("dateClick",c)}}},this.dragging=new P(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new A(this.dragging,_(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}},Le=class extends L{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=r=>{let{component:l,dragging:a}=this,{options:c}=l.context,d=c.selectable&&l.isValidDateDownEl(r.origEvent.target);a.setIgnoreMove(!d),a.delay=r.isTouch?Ei(l):null},this.handleDragStart=r=>{this.component.context.calendarApi.unselect(r)},this.handleHitUpdate=(r,l)=>{let{context:a}=this.component,c=null,d=!1;if(r){let g=this.hitDragging.initialHit;r.componentId===g.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(g,r)||(c=yi(g,r,a.pluginHooks.dateSelectionTransformers)),(!c||!It(c,r.dateProfile,a))&&(d=!0,c=null)}c?a.dispatch({type:"SELECT_DATES",selection:c}):l||a.dispatch({type:"UNSELECT_DATES"}),d?V():z(),l||(this.dragSelection=c)},this.handlePointerUp=r=>{this.dragSelection&&(rt(this.dragSelection,r,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:i}=t.context,n=this.dragging=new P(e.el);n.touchScrollAllowed=!1,n.minDistance=i.selectMinDistance||0,n.autoScroller.isEnabled=i.dragScroll;let s=this.hitDragging=new A(this.dragging,_(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}};function Ei(o){let{options:e}=o.context,t=e.selectLongPressDelay;return t==null&&(t=e.longPressDelay),t}function yi(o,e,t){let i=o.dateSpan,n=e.dateSpan,s=[i.range.start,i.range.end,n.range.start,n.range.end];s.sort(Ke);let r={};for(let l of t){let a=l(o,e);if(a===!1)return null;a&&Object.assign(r,a)}return r.range={start:s[0],end:s[3]},r.allDay=i.allDay,r}var $t=(()=>{class o extends L{constructor(t){super(t),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=l=>{let a=l.origEvent.target,{component:c,dragging:d}=this,{mirror:g}=d,{options:p}=c.context,h=c.context;this.subjectEl=l.subjectEl;let m=this.subjectSeg=B(l.subjectEl),u=(this.eventRange=m.eventRange).instance.instanceId;this.relevantEvents=fe(h.getCurrentData().eventStore,u),d.minDistance=l.isTouch?0:p.eventDragMinDistance,d.delay=l.isTouch&&u!==c.props.eventSelection?bi(c):null,p.fixedMirrorParent?g.parentNode=p.fixedMirrorParent:g.parentNode=M(a,".fc"),g.revertDuration=p.dragRevertDuration;let E=c.isValidSegDownEl(a)&&!M(a,".fc-event-resizer");d.setIgnoreMove(!E),this.isDragging=E&&l.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=l=>{let a=this.component.context,c=this.eventRange,d=c.instance.instanceId;l.isTouch?d!==this.component.props.eventSelection&&a.dispatch({type:"SELECT_EVENT",eventInstanceId:d}):a.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(a.calendarApi.unselect(l),a.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new T(a,c.def,c.instance),jsEvent:l.origEvent,view:a.viewApi}))},this.handleHitUpdate=(l,a)=>{if(!this.isDragging)return;let c=this.relevantEvents,d=this.hitDragging.initialHit,g=this.component.context,p=null,h=null,m=null,v=!1,u={affectedEvents:c,mutatedEvents:j(),isEvent:!0};if(l){p=l.context;let E=p.options;g===p||E.editable&&E.droppable?(h=Si(d,l,this.eventRange.instance.range.start,p.getCurrentData().pluginHooks.eventDragMutationMassagers),h&&(m=ve(c,p.getCurrentData().eventUiBases,h,p),u.mutatedEvents=m,ye(u,l.dateProfile,p)||(v=!0,h=null,m=null,u.mutatedEvents=j()))):p=null}this.displayDrag(p,u),v?V():z(),a||(g===p&&re(d,l)&&(h=null),this.dragging.setMirrorNeedsRevert(!h),this.dragging.setMirrorIsVisible(!l||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=p,this.validMutation=h,this.mutatedRelevantEvents=m)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=l=>{if(this.isDragging){let a=this.component.context,c=a.viewApi,{receivingContext:d,validMutation:g}=this,p=this.eventRange.def,h=this.eventRange.instance,m=new T(a,p,h),v=this.relevantEvents,u=this.mutatedRelevantEvents,{finalHit:E}=this.hitDragging;if(this.clearDrag(),a.emitter.trigger("eventDragStop",{el:this.subjectEl,event:m,jsEvent:l.origEvent,view:c}),g){if(d===a){let y=new T(a,u.defs[p.defId],h?u.instances[h.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:u});let b={oldEvent:m,event:y,relatedEvents:k(u,a,h),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:v})}},S={};for(let le of a.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(S,le(g,a));a.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},b),S),{el:l.subjectEl,delta:g.datesDelta,jsEvent:l.origEvent,view:c})),a.emitter.trigger("eventChange",b)}else if(d){let y={event:m,relatedEvents:k(v,a,h),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:v})}};a.emitter.trigger("eventLeave",Object.assign(Object.assign({},y),{draggedEl:l.subjectEl,view:c})),a.dispatch({type:"REMOVE_EVENTS",eventStore:v}),a.emitter.trigger("eventRemove",y);let b=u.defs[p.defId],S=u.instances[h.instanceId],le=new T(d,b,S);d.dispatch({type:"MERGE_EVENTS",eventStore:u});let Ve={event:le,relatedEvents:k(u,d,S),revert(){d.dispatch({type:"REMOVE_EVENTS",eventStore:u})}};d.emitter.trigger("eventAdd",Ve),l.isTouch&&d.dispatch({type:"SELECT_EVENT",eventInstanceId:h.instanceId}),d.emitter.trigger("drop",Object.assign(Object.assign({},Kt(E.dateSpan,d)),{draggedEl:l.subjectEl,jsEvent:l.origEvent,view:E.context.viewApi})),d.emitter.trigger("eventReceive",Object.assign(Object.assign({},Ve),{draggedEl:l.subjectEl,view:E.context.viewApi}))}}else a.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:i}=this,{options:n}=i.context,s=this.dragging=new P(t.el);s.pointer.selector=o.SELECTOR,s.touchScrollAllowed=!1,s.autoScroller.isEnabled=n.dragScroll;let r=this.hitDragging=new A(this.dragging,ht);r.useSubjectCenter=t.useEventCenter,r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("pointerup",this.handlePointerUp),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(t,i){let n=this.component.context,s=this.receivingContext;s&&s!==t&&(s===n?s.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:i.affectedEvents,mutatedEvents:j(),isEvent:!0}}):s.dispatch({type:"UNSET_EVENT_DRAG"})),t&&t.dispatch({type:"SET_EVENT_DRAG",state:i})}clearDrag(){let t=this.component.context,{receivingContext:i}=this;i&&i.dispatch({type:"UNSET_EVENT_DRAG"}),t!==i&&t.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}return o.SELECTOR=".fc-event-draggable, .fc-event-resizable",o})();function Si(o,e,t,i){let n=o.dateSpan,s=e.dateSpan,r=n.range.start,l=s.range.start,a={};n.allDay!==s.allDay&&(a.allDay=s.allDay,a.hasEnd=e.context.options.allDayMaintainDuration,s.allDay?r=Qe(t):r=t);let c=ue(r,l,o.context.dateEnv,o.componentId===e.componentId?o.largeUnit:null);c.milliseconds&&(a.allDay=!1);let d={datesDelta:c,standardProps:a};for(let g of i)g(d,o,e);return d}function bi(o){let{options:e}=o.context,t=e.eventLongPressDelay;return t==null&&(t=e.longPressDelay),t}var We=class extends L{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let{component:r}=this,l=this.querySegEl(s),a=B(l),c=this.eventRange=a.eventRange;this.dragging.minDistance=r.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&this.component.props.eventSelection!==c.instance.instanceId)},this.handleDragStart=s=>{let{context:r}=this.component,l=this.eventRange;this.relevantEvents=fe(r.getCurrentData().eventStore,this.eventRange.instance.instanceId);let a=this.querySegEl(s);this.draggingSegEl=a,this.draggingSeg=B(a),r.calendarApi.unselect(),r.emitter.trigger("eventResizeStart",{el:a,event:new T(r,l.def,l.instance),jsEvent:s.origEvent,view:r.viewApi})},this.handleHitUpdate=(s,r,l)=>{let{context:a}=this.component,c=this.relevantEvents,d=this.hitDragging.initialHit,g=this.eventRange.instance,p=null,h=null,m=!1,v={affectedEvents:c,mutatedEvents:j(),isEvent:!0};s&&(s.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,s)||(p=Di(d,s,l.subjectEl.classList.contains("fc-event-resizer-start"),g.range))),p&&(h=ve(c,a.getCurrentData().eventUiBases,p,a),v.mutatedEvents=h,ye(v,s.dateProfile,a)||(m=!0,p=null,h=null,v.mutatedEvents=null)),h?a.dispatch({type:"SET_EVENT_RESIZE",state:v}):a.dispatch({type:"UNSET_EVENT_RESIZE"}),m?V():z(),r||(p&&re(d,s)&&(p=null),this.validMutation=p,this.mutatedRelevantEvents=h)},this.handleDragEnd=s=>{let{context:r}=this.component,l=this.eventRange.def,a=this.eventRange.instance,c=new T(r,l,a),d=this.relevantEvents,g=this.mutatedRelevantEvents;if(r.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:c,jsEvent:s.origEvent,view:r.viewApi}),this.validMutation){let p=new T(r,g.defs[l.defId],a?g.instances[a.instanceId]:null);r.dispatch({type:"MERGE_EVENTS",eventStore:g});let h={oldEvent:c,event:p,relatedEvents:k(g,r,a),revert(){r.dispatch({type:"MERGE_EVENTS",eventStore:d})}};r.emitter.trigger("eventResize",Object.assign(Object.assign({},h),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||oe(0),endDelta:this.validMutation.endDelta||oe(0),jsEvent:s.origEvent,view:r.viewApi})),r.emitter.trigger("eventChange",h)}else r.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,i=this.dragging=new P(e.el);i.pointer.selector=".fc-event-resizer",i.touchScrollAllowed=!1,i.autoScroller.isEnabled=t.context.options.dragScroll;let n=this.hitDragging=new A(this.dragging,_(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragstart",this.handleDragStart),n.emitter.on("hitupdate",this.handleHitUpdate),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return M(e.subjectEl,".fc-event")}};function Di(o,e,t,i){let n=o.context.dateEnv,s=o.dateSpan.range.start,r=e.dateSpan.range.start,l=ue(s,r,n,o.largeUnit);if(t){if(n.add(i.start,l)<i.end)return{startDelta:l}}else if(n.add(i.end,l)>i.start)return{endDelta:l};return null}var Oe=class{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=i=>{i.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=i=>{let n=this.context.options.unselectCancel,s=Ye(i.origEvent);this.matchesCancel=!!M(s,n),this.matchesEvent=!!M(s,$t.SELECTOR)},this.onDocumentPointerUp=i=>{let{context:n}=this,{documentPointer:s}=this,r=n.getCurrentData();if(!s.wasTouchScroll){if(r.dateSelection&&!this.isRecentPointerDateSelect){let l=n.options.unselectAuto;l&&(!l||!this.matchesCancel)&&n.calendarApi.unselect(i)}r.eventSelection&&!this.matchesEvent&&n.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new ie(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}},Ri={fixedMirrorParent:D},wi={dateClick:D,eventDragStart:D,eventDragStop:D,eventDrop:D,eventResizeStart:D,eventResizeStop:D,eventResize:D,drop:D,eventReceive:D,eventLeave:D};X.dataAttrPrefix="";var Yi=q({name:"@fullcalendar/interaction",componentInteractions:[ke,Le,$t,We],calendarInteractions:[Oe],elementDraggingImpl:P,optionRefiners:Ri,listenerRefiners:wi});export{Ii as a,Yi as b};
