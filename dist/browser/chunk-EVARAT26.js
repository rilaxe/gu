import{b as oe,c as E}from"./chunk-GFTAKBCK.js";import{$a as J,Ab as z,C as b,Cb as Q,Da as j,Db as $,Ea as F,Eb as ee,Ib as te,Ja as B,Jb as ie,Ka as U,L as s,M as f,Mb as ne,Nb as ae,Oa as X,Qa as W,T as V,Ua as G,V as P,Y as e,Z as t,_ as m,ca as A,cb as g,da as v,ea as M,fb as R,gb as se,hb as H,ma as T,mb as q,na as i,oa as w,pa as h,ra as N,sa as I,t as O,ta as L,u as S,vb as K,w as C,x as y,xb as Z,y as x,yb as Y,z as _}from"./chunk-CJ262RDI.js";import"./chunk-DUVFM7XF.js";import{h as de}from"./chunk-2YZJNNV5.js";var d=de(se());function me(l,n){if(l&1){let u=A();e(0,"tr")(1,"td",95),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td",96),i(10),t(),e(11,"td",96)(12,"div",97),i(13),t()(),e(14,"td"),i(15),j(16,"date"),t(),e(17,"td",98)(18,"a",99),v("click",function(){let o=C(u).$implicit,p=M();return y(p.confirmPinDelete(o.id))}),i(19,"Remove "),t()()()}if(l&2){let u=n.$implicit,r=n.index,a=M(),o;s(2),h(" ",r+1," "),s(2),w(u.serialNo),s(2),h(" ",u.pin," "),s(2),w((o=u.admissionNo)!==null&&o!==void 0?o:"NONE"),s(2),h(" ",u.useCount," "),s(2),P("ngClass",a.itema.useCount>0?"badge badge-light-danger fw-bolder":"badge badge-light-primary fw-bolder"),s(),h(" ",u.useCount>0?"Not Used":"In Use"," "),s(2),w(F(16,8,u.lastUsed))}}var D=(()=>{let n=class n{constructor(r,a,o,p){this.router=r,this.auth=a,this.sch=o,this.gen=p,this.userName="",this.userImgPath="",this.mobileModal=!1,this.accessPinList=[],this.genk=p,this.userName=a.currentUserValue.name,this.userImgPath=a.currentUserValue.logo,this.adminStatus=a.currentUserValue.status}ngOnInit(){this.genk.topdata="Access Pin",this.getAccessPin()}get setImg(){return this.userImgPath&&this.userImgPath.length>0?this.genk.imgurl+this.userImgPath:this.genk.defaultImg}getAccessPin(){this.sch.getAccessPin().subscribe(r=>{this.accessPinList=r})}createAccessPin(){d.default.fire({title:"Creating Access Pin...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{d.default.showLoading(),this.sch.createAccessPin(this.pinAmount.toString(),this.maxCount.toString()).subscribe({next:r=>{d.default.close(),this.getAccessPin(),d.default.fire({icon:"success",title:"Access Pins created successfully!.",showConfirmButton:!1,timer:2e3})},error:r=>{d.default.close(),d.default.fire({icon:"error",title:"Access Pins creation failed!.",showConfirmButton:!1,timer:2e3})}})}})}confirmPinDelete(r){d.default.fire({title:"Do you want permanently delete this Access Pin?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Delete"}).then(a=>{a.isConfirmed&&this.deleteAccessPin(r)})}deleteAccessPin(r){d.default.fire({title:"Processing Delete...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{d.default.showLoading(),this.sch.deleteAccessPin(r.toString()).subscribe({next:a=>{d.default.close(),this.getAccessPin(),d.default.fire({icon:"success",title:"Access Pin deleted successfully!.",showConfirmButton:!1,timer:2e3})},error:a=>{d.default.close(),d.default.fire({icon:"error",title:"Access Pin deletion failed!.",showConfirmButton:!1,timer:2e3})}})}})}exportObj(r){let a=E.table_to_sheet(r),o=E.book_new();E.book_append_sheet(o,a,"Students"),oe(o,"Access-Pin Lists.xlsx",{compression:!0})}};n.\u0275fac=function(a){return new(a||n)(f(J),f(R),f(q),f(H))},n.\u0275cmp=O({type:n,selectors:[["ng-component"]],inputs:{header:"header"},decls:179,vars:3,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"fv-row","d-flex","align-items-center"],[1,"card-header","border-0","pt-3"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-customer-table-filter","search","placeholder","Search",1,"form-control","form-control-solid","w-250px","ps-15"],[1,"card-toolbar"],["type","button","data-bs-toggle","modal","data-bs-target","#kt_modal_add_graduate",1,"btn","btn-info","me-3"],["data-kt-customer-table-toolbar","base",1,"d-flex","justify-content-end"],["type","button","data-kt-menu-trigger","click","data-kt-menu-placement","bottom-end",1,"btn","btn-primary","me-3",3,"click"],["data-kt-menu","true",1,"menu","menu-sub","menu-sub-dropdown","menu-column","menu-rounded","menu-gray-800","menu-state-bg-light-primary","fw-semibold","w-200px"],[1,"menu-item","px-3","mt-5"],["href","#",1,"menu-link","px-3"],[1,"menu-item","px-3"],["href","#",1,"menu-link","px-3","mb-5"],[1,"card-body","pt-0"],["id","kt_customers_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],["mytab",""],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"w-10px","pe-2"],[1,"min-w-125px"],[1,"min-w-75px"],[1,"min-w-150px"],[1,"min-w-100px"],[1,"min-x-100px"],[1,"text-end","min-w-70px"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],["id","kt_modal_add_graduate","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_graduate_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_graduate_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_graduate_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_graduate_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_graduate_header","data-kt-scroll-wrappers","#kt_modal_add_graduate_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"row","g-9","mb-7"],[1,"col-md-12","fv-row"],[1,"required","fs-6","fw-bold","mb-2"],["name","pinAmount","type","number",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],["type","number","name","maxCount",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_graduate_cancel",1,"btn","btn-light","me-3"],["id","kt_modal_add_graduate_submit",1,"btn","btn-info",3,"click"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["id","kt_modal_edit_graduate","tabindex","-1","aria-hidden","true",1,"modal","fade"],["action","#","id","kt_modal_edit_graduate_form","data-kt-redirect","#",1,"form"],["id","kt_modal_edit_graduate_header",1,"modal-header"],["id","kt_modal_edit_graduate_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_graduate_header","data-kt-scroll-wrappers","#kt_modal_add_graduate_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"row","mb-7"],[1,"col-12"],[1,"fs-6","fw-bold","mb-2"],[1,"required"],["data-control","select2","data-placeholder","Select class","data-hide-search","true","name","format",1,"form-select","form-select-solid"],["value",""],["value","JSS1"],["value","JSS3"],["value","SSS1"],["value","SSS2"],["value","SSS3"],[1,"fv-row","mb-7"],[1,"fs-5","fw-bold","form-label","mb-2"],["data-control","select2","data-placeholder","Select student","data-hide-search","true","name","format",1,"form-select","form-select-solid"],["value","Silas Oparandu"],["value","Acholo Aaron"],["value","Jayden Smith"],["placeholder","","name","",1,"form-control","form-control-solid"],["id","kt_modal_edit_graduate_billing_info",1,"collapse","show"],["type","date","placeholder","","name","phone",1,"form-control","form-control-solid"],["data-control","select2","data-placeholder","Select Punishment","data-hide-search","true","name","format",1,"form-select","form-select-solid"],["value","Suspension"],["value","Expulsion"],["data-control","select2","data-placeholder","Select a format","data-hide-search","true","name","format",1,"form-select","form-select-solid"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["type","reset","id","kt_modal_edit_graduate_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_edit_graduate_submit",1,"btn","btn-info"],[1,"text-gray-700"],[1,"text-center"],[3,"ngClass"],[1,"text-end"],[1,"btn","btn-sm","btn-danger","btn-active-light-primary",3,"click"]],template:function(a,o){if(a&1){let p=A();e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),m(7,"div",7),t()(),e(8,"div",8)(9,"div",6)(10,"div",9)(11,"span",10),x(),e(12,"svg",11),m(13,"rect",12)(14,"path",13),t()(),_(),m(15,"input",14),t()(),e(16,"div",15)(17,"button",16),i(18,"Generate Access Pin"),t(),e(19,"div",17)(20,"button",18),v("click",function(){C(p);let c=T(31);return y(o.exportObj(c))}),i(21,"Download"),t(),e(22,"div",19)(23,"div",20)(24,"a",21),i(25," Export "),t()(),e(26,"div",22)(27,"a",23),i(28," Remove Expired "),t()()()()()(),e(29,"div",24)(30,"table",25,26)(32,"thead")(33,"tr",27)(34,"th",28),i(35," S/N "),t(),e(36,"th",29),i(37,"Serial Number"),t(),e(38,"th",30),i(39,"Access PIN"),t(),e(40,"th",31),i(41,"Used by"),t(),e(42,"th",32),i(43,"Usage Count"),t(),e(44,"th",32),i(45,"Status"),t(),e(46,"th",33),i(47,"Date of Last Use"),t(),e(48,"th",34),i(49,"Actions"),t()()(),e(50,"tbody",35),V(51,me,20,10,"tr",36),t()()()(),e(52,"div",37)(53,"div",38)(54,"div",39)(55,"form",40)(56,"div",41)(57,"h2",42),i(58,"Generate Access Pin"),t(),e(59,"div",43)(60,"span",44),x(),e(61,"svg",11),m(62,"rect",45)(63,"rect",46),t()()()(),_(),e(64,"div",47)(65,"div",48)(66,"div",49)(67,"div",50)(68,"label",51),i(69,"Enter Number of Pin you want to generate"),t(),e(70,"input",52),L("ngModelChange",function(c){return I(o.pinAmount,c)||(o.pinAmount=c),c}),t()(),e(71,"div",50)(72,"label",51),i(73,"Max Usage count"),t(),e(74,"input",53),L("ngModelChange",function(c){return I(o.maxCount,c)||(o.maxCount=c),c}),t()()()()(),e(75,"div",54)(76,"button",55),i(77,"Discard"),t(),e(78,"button",56),v("click",function(){return o.createAccessPin()}),e(79,"span",57),i(80,"Generate Access Pin"),t(),e(81,"span",58),i(82,"Please wait... "),m(83,"span",59),t()()()()()()(),e(84,"div",60)(85,"div",38)(86,"div",39)(87,"form",61)(88,"div",62)(89,"h2",42),i(90,"Edit Discipline"),t(),e(91,"div",43)(92,"span",44),x(),e(93,"svg",11),m(94,"rect",45)(95,"rect",46),t()()()(),_(),e(96,"div",47)(97,"div",63)(98,"div",64)(99,"div",65)(100,"label",66)(101,"span",67),i(102,"Class"),t()(),e(103,"select",68)(104,"option",69),i(105,"Select Class"),t(),e(106,"option",70),i(107,"JSS1"),t(),e(108,"option",71),i(109,"JSS2"),t(),e(110,"option",71),i(111,"JSS3"),t(),e(112,"option",72),i(113,"SSS1"),t(),e(114,"option",73),i(115,"SSS2"),t(),e(116,"option",74),i(117,"SSS3"),t()()()(),e(118,"div",75)(119,"label",76),i(120,"Student"),t(),e(121,"select",77)(122,"option",69),i(123,"Select Student"),t(),e(124,"option",78),i(125,"Silas Oparandu"),t(),e(126,"option",79),i(127,"Acholo Aaron"),t(),e(128,"option",80),i(129,"Jayden Smith"),t()()(),e(130,"div",49)(131,"div",50)(132,"label",51),i(133,"Infraction"),t(),m(134,"input",81),t()(),e(135,"div",82)(136,"div",49)(137,"div",50)(138,"label",51),i(139,"Date"),t(),m(140,"input",83),t()()(),e(141,"div",75)(142,"label",76),i(143,"Punishment"),t(),e(144,"select",84)(145,"option",69),i(146,"Select Punishment"),t(),e(147,"option",85),i(148,"Suspension"),t(),e(149,"option",86),i(150,"Expulsion"),t()()(),e(151,"div",75)(152,"label",76),i(153,"Duration"),t(),e(154,"select",87),m(155,"option"),e(156,"option",88),i(157,"1 Week"),t(),e(158,"option",89),i(159,"2 Weeks"),t(),e(160,"option",90),i(161,"3 Weeks"),t(),e(162,"option",91),i(163,"1 Month"),t(),e(164,"option",92),i(165,"1 Term"),t(),e(166,"option",92),i(167,"2 Term"),t(),e(168,"option",92),i(169,"1 Session"),t()()()()(),e(170,"div",54)(171,"button",93),i(172,"Discard"),t(),e(173,"button",94)(174,"span",57),i(175,"Submit"),t(),e(176,"span",58),i(177,"Please wait... "),m(178,"span",59),t()()()()()()()()()()()}a&2&&(s(51),P("ngForOf",o.accessPinList),s(19),N("ngModel",o.pinAmount),s(4),N("ngModel",o.maxCount))},dependencies:[B,U,$,te,ie,K,ee,Z,Y,Q,z,X],encapsulation:2});let l=n;return l})();var ce=[{path:"",component:D},{path:"access-pin",component:D}],le=(()=>{let n=class n{};n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=S({type:n}),n.\u0275inj=b({imports:[g.forChild(ce),g]});let l=n;return l})();var Me=(()=>{let n=class n{};n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=S({type:n}),n.\u0275inj=b({imports:[W,ne,ae,G,g,le]});let l=n;return l})();export{Me as AccessPinModule};
