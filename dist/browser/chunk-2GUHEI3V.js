import{a as ii,b as ni}from"./chunk-WWC4RKDB.js";import{a as mt}from"./chunk-AH4K4NGE.js";import{a as si,b as ri,c as Le}from"./chunk-GFTAKBCK.js";import{b as ti}from"./chunk-E75JTKMU.js";import{a as Vi}from"./chunk-D53N7EF7.js";import{d as Mt,e as Ge}from"./chunk-S5EBJMGB.js";import{$a as z,Aa as Ut,Ab as X,B as Gt,Ba as Ht,Bb as be,C as _t,Ca as gt,Cb as ge,Da as Ie,Db as q,Ea as Oe,Fa as Yt,Fb as ct,G as Ct,Gb as Xe,Hb as ie,Ib as ne,Ja as yt,Jb as se,K as oe,Ka as W,L as l,La as he,M as _,Ma as Et,Mb as Qt,Nb as ei,Oa as Re,Pa as $t,Qa as Xt,R as lt,T as C,Ua as qt,V as h,W as ot,Y as n,Z as s,Za as G,_ as f,a as Ee,ab as Fe,ca as k,cb as St,da as v,ea as x,eb as It,fb as D,gb as Te,ha as je,hb as j,ib as ae,kb as ke,lb as Pe,ma as E,mb as L,na as r,nb as Kt,o as pe,oa as p,ob as Nt,pa as I,pb as wt,qa as tt,qb as At,ra as N,rb as $e,sa as A,sb as Jt,t as B,ta as M,u as bt,va as Me,vb as Zt,w,wa as J,wb as xe,x as T,xa as at,xb as te,y as F,ya as vt,yb as $,z as P,zb as dt}from"./chunk-CJ262RDI.js";import"./chunk-DUVFM7XF.js";import"./chunk-KIZUWF6M.js";import{h as K,q as H}from"./chunk-2YZJNNV5.js";var ft=K(Te());function Wi(o,u){if(o&1&&(n(0,"option",106),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function Gi(o,u){if(o&1&&(n(0,"option",106),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.sessionName)}}function Ui(o,u){if(o&1&&(n(0,"th",107),r(1),s()),o&2){let a=u.$implicit;l(),p(a.skills)}}function Hi(o,u){if(o&1){let a=k();n(0,"input",115,116),v("change",function(){w(a);let i=E(1),t=x().index,d=x().index,c=x();return T(c.stringData(i==null?null:i.value,d,t))}),s()}if(o&2){let a=x().$implicit,e=x().$implicit,i=x();h("value",i.getobj(e.id,a==null?null:a.skills)?i.getobj(e.id,a==null?null:a.skills):"")}}function Yi(o,u){if(o&1){let a=k();n(0,"input",117,116),v("change",function(){w(a);let i=E(1),t=x().index,d=x().index,c=x();return T(c.stringData(i==null?null:i.value,d,t))}),s()}}function $i(o,u){if(o&1&&(n(0,"td",112),C(1,Hi,2,1,"input",113)(2,Yi,2,0,"input",114),s()),o&2){let a=x(2);l(),h("ngIf",a.motorlist.length>0),l(),h("ngIf",a.motorlist.length<1)}}function Xi(o,u){if(o&1&&(n(0,"tr",108)(1,"td",109),f(2,"input",110),s(),C(3,$i,3,2,"td",111),s()),o&2){let a=u.$implicit,e=x();l(2),je("value",a.surname+" "+a.firstName),l(),h("ngForOf",e.psycomotorlist)}}var Rt=(()=>{let u=class u{constructor(e,i,t,d){this.router=e,this.auth=i,this.sch=t,this.gen=d,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.psycomotorlist=[],this.studentlist=[],this.bigboss=[],this.smallboss=[],this.psycoObjList=[],this.psylist=[],this.motorlist=[],this.destroy=new Ee,this.excelData=[],this.columnArray=[],this.isSumbitError=!1,this.rejectedData=[],this.genk=d,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Psychomotor Entry",this.getClassNames(),this.getSession(),this.getCurrentSession(),this.getPsycomotor()}getobj(e,i){return this.motorlist.filter(d=>d.studentId==e).length>0?this.motorlist.filter(d=>d.studentId==e)[0].psy[i]:""}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.schoolClasses=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getPsycomotor(){this.sch.getPsycomotor().subscribe(e=>{this.psycomotorlist=e})}getStudents(){this.sch.getStudentsBySession(this.currentClass,this.currentSessionId,this.currentTerm).subscribe(e=>{this.studentlist=e,this.getStudentsPsycomotor()})}stringData(e,i,t){this.bigboss[i]?this.bigboss[i][t]=e:(this.bigboss[i]=[],this.bigboss[i][t]=e),console.log(this.bigboss)}savePsycomotor(){debugger;let e=this.sessionlist.filter(d=>d.id==this.currentSessionId)[0].sessionName,i=[];for(let d=0;d<this.bigboss.length;d++){let c={};if(this.bigboss[d]){var t=this.studentlist[d].id;for(let m=0;m<this.bigboss[d].length;m++)c[this.psycomotorlist[m].skills]=this.bigboss[d][m];this.psylist.concat(this.slappsyco(c,this.studentlist[d],e)),i.push(c)}}this.psycoObjList=i,console.log(i),console.log(this.psylist),ft.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{ft.default.showLoading(),this.sch.savePsycomotorEntry(this.psylist,this.currentClass,this.currentSessionId,this.currentTerm).pipe(pe(this.destroy)).subscribe(d=>{ft.default.close()})}}).then(d=>{ft.default.fire({icon:"success",title:"Psycomotor updated successfully!.",showConfirmButton:!1,timer:2e3})})}slappsyco(e,i,t){for(let d in e)if(e[d]){let c=new Mt;c.studentId=i.id,c.schoolId=i.schoolId,c.classId=i.classId,c.classLevel=i.class,c.skill=d,c.skillId=this.psycomotorlist.filter(m=>m.skills==d)[0].id,c.score=Number(e[d]),c.term=this.currentTerm,c.sessions=this.currentSession,this.psylist.push(c)}return this.psylist}excelPsyco(e){for(let i in e)if(e[i]){let t=new Mt;t.skill=i,t.score=Number(e[i]),this.psylist.push(t)}return this.psylist}getStudentsPsycomotor(){this.sch.getStudentsPsycomotor(this.currentClass,this.currentSessionId,this.currentTerm).subscribe(e=>{this.motorlist=e})}downloadTemplate(){let e=[{"Student Name":"Wesley Snipe","Admission No.":"SN3440",Coordination:"8",Attentiveness:"9",Punctuality:"6",Neatness:"5"},{"Student Name":"Anita Snipe","Admission No.":"SN3449",Coordination:"8",Attentiveness:"9",Punctuality:"6",Neatness:"5"}],i=Le.json_to_sheet(e),t=Le.book_new();Le.book_append_sheet(t,i,"Psycomotor"),ri(t,"Student Psycomotor Lists.xlsx",{compression:!0})}loadExcel(e){return H(this,null,function*(){var i=e.target.files[0];if(i){console.log("hi");var t=new FileReader;t.onload=c=>{let m=t.result;var S=c.target.result,b=si(m,{type:"binary"});b.SheetNames.forEach(g=>{let y=Le.sheet_to_row_object_array(b.Sheets[g]);console.log(y),this.excelData=y,console.log(this.excelData),this.excelData.forEach(U=>{this.excelPsyco(U)}),console.log(this.psylist)})},t.readAsBinaryString(i);let d=t}})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["app-dashboard"]],inputs:{header:"header"},decls:178,vars:7,consts:[[1,"d-flex","flex-column","flex-root"],[1,"page","d-flex","flex-row","flex-column-fluid"],["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],[1,"card-body","p-12"],["action","","id","kt_invoice_form"],[1,"mb-0"],[1,"row","gx-10","mb-10"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["name","classy","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fv-row","mb-5"],[1,"fs-6","fw-bold","form-label"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["name","clasis","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],[1,"fv-row","mb-5",2,"margin-top","60px"],[1,"w-100","btn","btn-primary",2,"padding","10px",3,"click"],[1,"text-end"],["type","button",1,"btn","btn-info",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#kt_modal_add_customer",1,"btn","btn-info","mx-xl-10"],[1,"table-responsive","mb-10"],["data-kt-element","items",1,"table","g-5","gs-0","mb-0","fw-bolder","text-gray-700"],[1,"border-bottom","fs-7","fw-bolder","text-gray-700","text-uppercase"],[1,"min-w-250px","w-250px","fixed-column",2,"background-color","white"],["class"," w-100px max-w-100px",4,"ngFor","ngForOf"],["class","border-bottom border-bottom-dashed","data-kt-element","Name",4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],["id","kt_customers_table_length",1,"dataTables_length"],["name","kt_customers_table_length","aria-controls","kt_customers_table",1,"form-select","form-select-sm","form-select-solid"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-sm-12","col-md-7","d-flex","align-items-center","justify-content-center","justify-content-md-end"],["id","kt_customers_table_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","kt_customers_table_previous",1,"paginate_button","page-item","previous","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","0","tabindex","0",1,"page-link"],[1,"previous"],[1,"paginate_button","page-item","active"],["href","#","aria-controls","kt_customers_table","data-dt-idx","1","tabindex","0",1,"page-link"],["id","kt_customers_table_next",1,"paginate_button","page-item","next","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","2","tabindex","0",1,"page-link"],[1,"next"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport","value","",1,"form-control","form-control-solid",3,"change"],[1,"fv-row","mt-5","mb-7"],[1,"btn","btn-info","w-100",3,"click"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit",1,"btn","btn-info"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["id","kt_customers_export_modal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-header"],["id","kt_customers_export_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"modal-body","scroll-y","mx-5","mx-xl-15","my-7"],["id","kt_customers_export_form","action","#",1,"form"],[1,"fs-5","fw-bold","form-label","mb-5"],["data-control","select2","data-placeholder","Select a format","data-hide-search","true","name","format",1,"form-select","form-select-solid"],["value","excell"],["value","pdf"],["value","cvs"],["value","zip"],["placeholder","Pick a date","name","date",1,"form-control","form-control-solid"],[1,"row","fv-row","mb-15"],[1,"d-flex","flex-column"],[1,"form-check","form-check-custom","form-check-sm","form-check-solid","mb-3"],["type","checkbox","value","1","checked","checked","name","payment_type",1,"form-check-input"],[1,"form-check-label","text-gray-600","fw-bold"],["type","checkbox","value","2","checked","checked","name","payment_type",1,"form-check-input"],["type","checkbox","value","3","name","payment_type",1,"form-check-input"],[1,"form-check","form-check-custom","form-check-sm","form-check-solid"],["type","checkbox","value","4","name","payment_type",1,"form-check-input"],[1,"text-center"],["type","reset","id","kt_customers_export_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_customers_export_submit",1,"btn","btn-info"],[3,"value"],[1,"w-100px","max-w-100px"],["data-kt-element","Name",1,"border-bottom","border-bottom-dashed"],[1,"pe-7","fixed-column"],["type","text","name","name[]","placeholder","Acholo Nora","disabled","",1,"form-control","form-control-solid","mb-2",3,"value"],["class","ps-0",4,"ngFor","ngForOf"],[1,"ps-0"],["type","text","class","form-control form-control-solid mb-2 text-center","name","name[]",3,"value","change",4,"ngIf"],["type","text","class","form-control form-control-solid mb-2 text-center","name","name[]",3,"change",4,"ngIf"],["type","text","name","name[]",1,"form-control","form-control-solid","mb-2","text-center",3,"value","change"],["val",""],["type","text","name","name[]",1,"form-control","form-control-solid","mb-2","text-center",3,"change"]],template:function(i,t){i&1&&(n(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"form",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"label",13)(15,"span",14),r(16,"Select Class"),s()(),n(17,"div",15)(18,"select",16),M("ngModelChange",function(c){return A(t.currentClass,c)||(t.currentClass=c),c}),n(19,"option",17),r(20,"Select Class..."),s(),C(21,Wi,2,2,"option",18),s()()(),n(22,"div",19)(23,"label",20)(24,"span",14),r(25,"Session"),s()(),n(26,"div",15)(27,"select",21),M("ngModelChange",function(c){return A(t.currentSessionId,c)||(t.currentSessionId=c),c}),n(28,"option",17),r(29,"Select Session..."),s(),C(30,Gi,2,2,"option",18),s()()()(),n(31,"div",11)(32,"div",12)(33,"label",13)(34,"span",14),r(35,"Term"),s()(),n(36,"div",15)(37,"select",22),M("ngModelChange",function(c){return A(t.currentTerm,c)||(t.currentTerm=c),c}),n(38,"option",23),r(39,"Select term"),s(),n(40,"option",24),r(41,"First"),s(),n(42,"option",25),r(43,"Second"),s(),n(44,"option",26),r(45,"Third"),s()()()(),n(46,"div",27)(47,"div",15)(48,"button",28),v("click",function(){return t.getStudents()}),r(49,"Show Students"),s()()()()(),n(50,"div",29)(51,"button",30),v("click",function(){return t.savePsycomotor()}),r(52,"Save"),s(),n(53,"button",31),r(54,"Batch Uploads"),s()(),n(55,"div",32)(56,"table",33)(57,"thead")(58,"tr",34)(59,"th",35),r(60,"Student Name"),s(),C(61,Ui,2,1,"th",36),s()(),n(62,"tbody"),C(63,Xi,4,2,"tr",37),s()()(),n(64,"div",38)(65,"div",39)(66,"div",40)(67,"label")(68,"select",41)(69,"option",42),r(70,"10"),s(),n(71,"option",43),r(72,"25"),s(),n(73,"option",44),r(74,"50"),s(),n(75,"option",45),r(76,"100"),s()()()()(),n(77,"div",46)(78,"div",47)(79,"ul",48)(80,"li",49)(81,"a",50),f(82,"i",51),s()(),n(83,"li",52)(84,"a",53),r(85,"1"),s()(),n(86,"li",54)(87,"a",55),f(88,"i",56),s()()()()()()()()()(),n(89,"div",57)(90,"div",58)(91,"div",59)(92,"form",60)(93,"div",61)(94,"h2",62),r(95,"Upload Psychomotor"),s(),n(96,"div",63)(97,"span",64),F(),n(98,"svg",65),f(99,"rect",66)(100,"rect",67),s()()()(),P(),n(101,"div",68)(102,"div",69)(103,"div",70)(104,"label",71),r(105,"Upload Template"),s(),f(106,"i",72),n(107,"input",73),v("change",function(c){return t.loadExcel(c)}),s()(),n(108,"div",74)(109,"button",75),v("click",function(){return t.downloadTemplate()}),r(110,"download Template Document"),s()()()(),n(111,"div",76)(112,"button",77),r(113,"Discard"),s(),n(114,"button",78)(115,"span",79),r(116,"Submit"),s(),n(117,"span",80),r(118,"Please wait... "),f(119,"span",81),s()()()()()()(),n(120,"div",82)(121,"div",58)(122,"div",59)(123,"div",83)(124,"h2",62),r(125,"Export Customers"),s(),n(126,"div",84)(127,"span",64),F(),n(128,"svg",65),f(129,"rect",66)(130,"rect",67),s()()()(),P(),n(131,"div",85)(132,"form",86)(133,"div",12)(134,"label",87),r(135,"Select Export Format:"),s(),n(136,"select",88)(137,"option",89),r(138,"Excel"),s(),n(139,"option",90),r(140,"PDF"),s(),n(141,"option",91),r(142,"CVS"),s(),n(143,"option",92),r(144,"ZIP"),s()()(),n(145,"div",12)(146,"label",87),r(147,"Select Date Range:"),s(),f(148,"input",93),s(),n(149,"div",94)(150,"label",87),r(151,"Payment Type:"),s(),n(152,"div",95)(153,"label",96),f(154,"input",97),n(155,"span",98),r(156,"All"),s()(),n(157,"label",96),f(158,"input",99),n(159,"span",98),r(160,"Visa"),s()(),n(161,"label",96),f(162,"input",100),n(163,"span",98),r(164,"Mastercard"),s()(),n(165,"label",101),f(166,"input",102),n(167,"span",98),r(168,"American Express"),s()()()(),n(169,"div",103)(170,"button",104),r(171,"Discard"),s(),n(172,"button",105)(173,"span",79),r(174,"Submit"),s(),n(175,"span",80),r(176,"Please wait... "),f(177,"span",81),s()()()()()()()()()()()()()()()),i&2&&(l(18),N("ngModel",t.currentClass),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(24),h("ngForOf",t.psycomotorlist),l(2),h("ngForOf",t.studentlist))},dependencies:[W,he,q,ne,se,ie,te,$,ge,X],styles:[`.table[_ngcontent-%COMP%] {
															width: auto;
														}

														.table-responsive[_ngcontent-%COMP%] {
															overflow-x: auto;
															max-width: 100%;
														}

														.fixed-column[_ngcontent-%COMP%] {
															position: sticky;
															left: 0;
															background-color: #fff;
															

															z-index: 1;
														}

														.max-w-100px[_ngcontent-%COMP%] {
															max-width: 100px;
															overflow: hidden;
															text-overflow: ellipsis;
															white-space: nowrap;
														}`]});let o=u;return o})();var it=K(Te());var qe=K(mt());function qi(o,u){if(o&1&&(n(0,"option",95),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function Ki(o,u){o&1&&(n(0,"div",96)(1,"div"),r(2,"No class is selected"),s()())}function Ji(o,u){o&1&&(n(0,"div",96)(1,"div"),r(2,"No term is selected"),s()())}function Zi(o,u){if(o&1&&(n(0,"option",95),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.subjects)}}function Qi(o,u){o&1&&(n(0,"div",96)(1,"div"),r(2,"No subject is selected"),s()())}function en(o,u){if(o&1&&(n(0,"option",95),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.sessionName)}}function tn(o,u){o&1&&(n(0,"div",96)(1,"div"),r(2,"No session is selected"),s()())}function nn(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA1?a.caSetupData.CA1:"CA1")}}function sn(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA2?a.caSetupData.CA2:"CA2")}}function rn(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA3?a.caSetupData.CA3:"CA3")}}function ln(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA4?a.caSetupData.CA4:"CA4")}}function on(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA5?a.caSetupData.CA5:"CA5")}}function an(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA6?a.caSetupData.CA6:"CA6")}}function dn(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA7?a.caSetupData.CA7:"CA7")}}function cn(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA8?a.caSetupData.CA8:"CA8")}}function mn(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA9?a.caSetupData.CA9:"CA9")}}function un(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA10?a.caSetupData.CA10:"CA10")}}function pn(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA11?a.caSetupData.CA11:"CA11")}}function hn(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA12?a.caSetupData.CA12:"CA12")}}function gn(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA13?a.caSetupData.CA13:"CA13")}}function Sn(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA14?a.caSetupData.CA14:"CA14")}}function fn(o,u){if(o&1&&(n(0,"th",50),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA15?a.caSetupData.CA15:"CA15")}}function xn(o,u){if(o&1){let a=k();n(0,"td")(1,"input",103,107),v("keyup",function(i){w(a);let t=E(2),d=x().$implicit,c=x();return T(c.setCa(d.studentId,t,"ca1",i))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca1)!==null&&t!==void 0?t:"")("id",i+1+"inp1")}}function bn(o,u){if(o&1){let a=k();n(0,"td")(1,"input",103,108),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca2"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca2)!==null&&t!==void 0?t:"")("id",i+1+"inp2")}}function _n(o,u){if(o&1){let a=k();n(0,"td")(1,"input",109,110),v("keydown",function(i){w(a);let t=E(2),d=x().$implicit,c=x();return T(c.setCa(d.studentId,t,"ca3",i))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca3)!==null&&t!==void 0?t:"")("id",i+1+"inp3")}}function Cn(o,u){if(o&1){let a=k();n(0,"td")(1,"input",103,111),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca4"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca4)!==null&&t!==void 0?t:"")("id",i+1+"inp4")}}function vn(o,u){if(o&1){let a=k();n(0,"td")(1,"input",112,113),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca5"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca5)!==null&&t!==void 0?t:"")("id",i+1+"inp5")}}function yn(o,u){if(o&1){let a=k();n(0,"td")(1,"input",103,114),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca6"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca6)!==null&&t!==void 0?t:"")("id",i+1+"inp6")}}function En(o,u){if(o&1){let a=k();n(0,"td")(1,"input",112,115),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca7"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca7)!==null&&t!==void 0?t:"")("id",i+1+"inp7")}}function In(o,u){if(o&1){let a=k();n(0,"td")(1,"input",112,116),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca8"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca8)!==null&&t!==void 0?t:"")("id",i+1+"inp8")}}function wn(o,u){if(o&1){let a=k();n(0,"td")(1,"input",112,117),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca9"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca9)!==null&&t!==void 0?t:"")("id",i+1+"inp9")}}function Tn(o,u){if(o&1){let a=k();n(0,"td")(1,"input",103,118),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca10"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca10)!==null&&t!==void 0?t:"")("id",i+1+"inp10")}}function kn(o,u){if(o&1){let a=k();n(0,"td")(1,"input",112,119),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca11"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca11)!==null&&t!==void 0?t:"")("id",i+1+"inp11")}}function Nn(o,u){if(o&1){let a=k();n(0,"td")(1,"input",103,120),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca12"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca12)!==null&&t!==void 0?t:"")("id",i+1+"inp12")}}function An(o,u){if(o&1){let a=k();n(0,"td")(1,"input",112,121),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca13"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca13)!==null&&t!==void 0?t:"")("id",i+1+"inp13")}}function Mn(o,u){if(o&1){let a=k();n(0,"td")(1,"input",112,122),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca14"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca14)!==null&&t!==void 0?t:"")("id",i+1+"inp14")}}function On(o,u){if(o&1){let a=k();n(0,"td")(1,"input",112,123),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca15"))}),s()()}if(o&2){let a=x(),e=a.$implicit,i=a.index,t;l(),h("value",(t=e.ca15)!==null&&t!==void 0?t:"")("id",i+1+"inp15")}}function Rn(o,u){if(o&1){let a=k();n(0,"tr",97)(1,"td"),r(2),s(),n(3,"td",98),f(4,"input",99),s(),n(5,"td",100),f(6,"input",101),s(),C(7,xn,3,2,"td",102)(8,bn,3,2,"td",102)(9,_n,3,2,"td",102)(10,Cn,3,2,"td",102)(11,vn,3,2,"td",102)(12,yn,3,2,"td",102)(13,En,3,2,"td",102)(14,In,3,2,"td",102)(15,wn,3,2,"td",102)(16,Tn,3,2,"td",102)(17,kn,3,2,"td",102)(18,Nn,3,2,"td",102)(19,An,3,2,"td",102)(20,Mn,3,2,"td",102)(21,On,3,2,"td",102),n(22,"td")(23,"input",103,104),v("keyup",function(){let t=w(a).$implicit,d=E(24),c=x();return T(c.setCa(t.studentId,d,"exam"))}),s()(),n(25,"td")(26,"span",105),r(27),s()(),n(28,"td",106)(29,"span",105),r(30),s()(),n(31,"td")(32,"span",105),r(33),s()()()}if(o&2){let a=u.$implicit,e=u.index,i=x(),t,d,c,m,S,b;l(2),p(e+1),l(2),je("value",(t=a.studentName)!==null&&t!==void 0?t:""),l(2),je("value",(d=a.admissionNo)!==null&&d!==void 0?d:""),l(),h("ngIf",i.caSetupData.CA1),l(),h("ngIf",i.caSetupData.CA2),l(),h("ngIf",i.caSetupData.CA3),l(),h("ngIf",i.caSetupData.CA4),l(),h("ngIf",i.caSetupData.CA5),l(),h("ngIf",i.caSetupData.CA6),l(),h("ngIf",i.caSetupData.CA7),l(),h("ngIf",i.caSetupData.CA8),l(),h("ngIf",i.caSetupData.CA9),l(),h("ngIf",i.caSetupData.CA10),l(),h("ngIf",i.caSetupData.CA11),l(),h("ngIf",i.caSetupData.CA12),l(),h("ngIf",i.caSetupData.CA13),l(),h("ngIf",i.caSetupData.CA14),l(),h("ngIf",i.caSetupData.CA15),l(2),h("value",(c=a.exam)!==null&&c!==void 0?c:"")("id",e+1+"inp16"),l(4),p((m=a.totalScore)!==null&&m!==void 0?m:""),l(3),p((S=a.grade)!==null&&S!==void 0?S:""),l(3),p((b=a.remark)!==null&&b!==void 0?b:"")}}var li=(()=>{let u=class u{constructor(e,i,t,d,c,m){this.router=e,this.auth=i,this.sch=t,this.userdata=d,this.gen=c,this.cd=m,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.psycomotorlist=[],this.studentlist=[],this.bigboss=[],this.smallboss=[],this.psycoObjList=[],this.psylist=[],this.motorlist=[],this.classSubjects=[],this.classSubjectsBackup=[],this.resultlist=[],this.gradeScaleList=[],this.destroy=new Ee,this.submitted=!1,this.shouldOverride="FALSE",this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Result Entry",this.resultForm=new dt({term:new be(this.currentTerm,[xe.required]),sessionId:new be(this.currentSessionId,[xe.required]),subjectId:new be(this.currentSubjectId,[xe.required]),classId:new be(this.currentClass,[xe.required])},{}),this.getClassNames(),this.getSession(),this.getCurrentSession(),this.cd.markForCheck()}get f(){return this.resultForm.controls}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.schoolClasses=e,this.cd.markForCheck()})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e,this.cd.markForCheck()})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm),this.cd.markForCheck()})}getClassSubjects(){this.sch.getSubjectByClass(this.currentClass.toString()).subscribe(e=>{console.log(e),this.classSubjects=e,this.classSubjectsBackup=e,this.cd.markForCheck()})}getStudents(){if(this.resultForm.invalid){this.cd.markForCheck();return}this.userdata.loadingOnly(),this.sch.getStudents(this.currentClass.toString()).subscribe(e=>{this.studentlist=e,this.getResultsByClass(),this.getCaSetupByClass(),this.cd.markForCheck()})}getResultsByClass(){this.sch.getResultEntryData(this.currentClass.toString(),this.currentSessionId.toString(),this.currentTerm,this.currentSubjectId.toString()).subscribe(e=>{this.resultlist=e,this.userdata.togLoadingOnly(),this.bigboss=[]})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClass.toString(),this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname,this.caScoreData=e.score})}getGradeScale(e){this.currentClass=Number(e),this.getClassSubjects();let t=this.schoolClasses.filter(d=>d.id==this.currentClass)[0].classLevelId;this.sch.getGradeScaleByCategory(t).subscribe(d=>{this.gradeScaleList=d,this.cd.markForCheck()})}setCa(e,i,t,d){debugger;if(d.key==="ArrowRight"){let S=d.target;if(S.selectionStart===S.value.length){let b=S.id.toString().match(/(\d+)(inp)(\d+)/),g=b[1],y=b[2],U=b[3],O=parseInt(b[3],10)+1,Y=g+y+O;if(Number(U)<15){let ee=document.getElementById(Y);ee&&ee.tagName==="INPUT"&&ee.focus()}}}let c,m;if(!/^\d+\.(0)?$/.test(i.value))if(this.bigboss.filter(S=>S.studentId==Number(e)).length>0){c=this.bigboss.filter(g=>g.studentId==Number(e))[0],m=this.resultlist.filter(g=>g.studentId==Number(e))[0];let S=this.clearInput(this.caScoreData[t.toUpperCase()],Number(i.value),this.resultlist[this.resultlist.findIndex(g=>g.studentId==Number(e))][t.toUpperCase()]);i.value=S.toString(),c[t]=S,c.totalScore=Number(c.ca1??this.checkCA(m.ca1))+Number(c.ca2??this.checkCA(m.ca2))+Number(c.ca3??this.checkCA(m.ca3))+Number(c.ca4??this.checkCA(m.ca4))+Number(c.ca5??this.checkCA(m.ca5))+Number(c.ca6??this.checkCA(m.ca6))+Number(c.ca7??this.checkCA(m.ca7))+Number(c.ca8??this.checkCA(m.ca8))+Number(c.ca9??this.checkCA(m.ca9))+Number(c.ca10??this.checkCA(m.ca10))+Number(c.ca11??this.checkCA(m.ca11))+Number(c.ca12??this.checkCA(m.ca12))+Number(c.ca13??this.checkCA(m.ca13))+Number(c.ca14??this.checkCA(m.ca14))+Number(c.ca15??this.checkCA(m.ca15))+Number(c.exam??this.checkCA(m.exam));let b=this.calGrade(c.totalScore);c.grade=b.grade,c.remark=b.remark,this.resultlist[this.resultlist.findIndex(g=>g.studentId==Number(e))].totalScore=c.totalScore,this.resultlist[this.resultlist.findIndex(g=>g.studentId==Number(e))].grade=c.grade,this.resultlist[this.resultlist.findIndex(g=>g.studentId==Number(e))].remark=c.remark,this.bigboss[this.bigboss.findIndex(g=>g.studentId==Number(e))]=c}else{c=new Ge,m=this.resultlist.filter(g=>g.studentId==Number(e))[0],c.studentId=e;let S=this.clearInput(this.caScoreData[t.toUpperCase()],Number(i.value),this.resultlist[this.resultlist.findIndex(g=>g.studentId==Number(e))][t.toUpperCase()]);i.value=S.toString(),c[t]=S,c.totalScore=Number(c.ca1??this.checkCA(m.ca1))+Number(c.ca2??this.checkCA(m.ca2))+Number(c.ca3??this.checkCA(m.ca3))+Number(c.ca4??this.checkCA(m.ca4))+Number(c.ca5??this.checkCA(m.ca5))+Number(c.ca6??this.checkCA(m.ca6))+Number(c.ca7??this.checkCA(m.ca7))+Number(c.ca8??this.checkCA(m.ca8))+Number(c.ca9??this.checkCA(m.ca9))+Number(c.ca10??this.checkCA(m.ca10))+Number(c.ca11??this.checkCA(m.ca11))+Number(c.ca12??this.checkCA(m.ca12))+Number(c.ca13??this.checkCA(m.ca13))+Number(c.ca14??this.checkCA(m.ca14))+Number(c.ca15??this.checkCA(m.ca15))+Number(c.exam??this.checkCA(m.exam));let b=this.calGrade(c.totalScore);c.grade=b.grade,c.remark=b.remark,this.resultlist[this.resultlist.findIndex(g=>g.studentId==Number(e))].totalScore=c.totalScore,this.resultlist[this.resultlist.findIndex(g=>g.studentId==Number(e))].grade=c.grade,this.resultlist[this.resultlist.findIndex(g=>g.studentId==Number(e))].remark=c.remark,this.bigboss.push(c)}console.log(this.bigboss)}checkCA(e){return e||0}calGrade(e){let i;return this.gradeScaleList.forEach(t=>{e>=t.begLimit&&e<=t.endLimit&&(i={grade:t.grade,remark:t.remarks})}),i||{grade:"i",remark:"Not Aplicable"}}validateSaveEntry(){let e=this.classSubjects.filter(t=>t.id==this.currentSubjectId)[0]?.subjects,i=this.schoolClasses.filter(t=>t.id==this.currentClass)[0]?.class;it.default.fire({title:"Do you want permanently save student exam records for this class?",html:`<p style="font-size: 20px"><b>Subject: </b> ${e}</p> <p style="font-size: 20px"><b>Class: </b> ${i}</p>`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Save"}).then(t=>{t.isConfirmed&&this.submitted==!1&&(this.submitted=!0,this.saveResultEntry())})}saveResultEntry(){debugger;if(this.resultForm.invalid){this.cd.markForCheck();return}if(this.resultlist.length<1){this.cd.markForCheck();return}if(this.verifyExceedingTotalScores(this.bigboss)){it.default.fire({icon:"error",title:"A Score exceeded 100!",text:"One of the field has a total score above 100 !."}),this.submitted=!1;return}let e=this.schoolClasses.filter(i=>i.id==this.currentClass)[0].class;it.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{it.default.showLoading(),this.sch.saveResultEntry(this.bigboss,this.currentSessionId.toString(),this.currentTerm,this.currentSubjectId.toString(),this.currentClass.toString(),e,this.shouldOverride).pipe(pe(this.destroy)).subscribe(i=>{this.submitted=!1,this.shouldOverride="FALSE",it.default.close()})}}).then(i=>{it.default.fire({icon:"success",title:"Result Entry updated successfully!.",showConfirmButton:!1,timer:2e3})})}clearInput(e,i,t){return e&&i>e?(alert("Value entered is greater than CA Maximum Score of "+e),t?Number(t):0):Number(i)}upInputToMax(e,i){return e&&i>e?e:Number(i)}downloadTemplate(){let e=[];for(let g=0;g<this.resultlist.length;g++){let y=new Object;y.sn=g+1,y.studentId=this.resultlist[g].studentId,y.admissionNo=this.resultlist[g].admissionNo,y.studentName=this.resultlist[g].studentName;for(let[U,O]of Object.entries(this.caSetupData))y[U+" ["+O+"]"]="";e.push(y)}console.log(e);let i=qe.utils.json_to_sheet(e),t=["A1","B1","C1","D1","E1","F1","G1","H1","I1","J1","K1","L1","M1","N1","O1","P1","Q1","R1","S1","T1"];for(let g of t)i[g]&&(i[g].s={font:{color:{rgb:"000000"},bold:!0}});var d=[{wch:4},{wch:10},{wch:20},{wch:35},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10}];i["!cols"]=d;let c=this.classSubjects.filter(g=>g.id==this.currentSubjectId)[0]?.subjects,m=this.schoolClasses.filter(g=>g.id==this.currentClass)[0]?.class,S=qe.utils.book_new(),b=c+"__"+m+"__Entry";if(b.length>30){let g=c?.length-(b.length-30);b=c?.substring(0,g)+"__"+m+"__Entry"}qe.utils.book_append_sheet(S,i,b),qe.writeFile(S,this.auth.currentUserValue.schoolName+"__"+m+"__"+c+"__Result Entry.xlsx",{compression:!0})}loadExcel(e){return H(this,null,function*(){var i=e.target.files[0];if(i){console.log("hi");var t=new FileReader;t.onload=c=>{let m=t.result;var S=c.target.result,b=qe.read(m,{type:"binary"});b.SheetNames.forEach(g=>{let y=Le.sheet_to_row_object_array(b.Sheets[g]);this.excelObj=y,console.log(y)})},t.readAsBinaryString(i);let d=t}})}populateFromFile(){this.resultlist=this.resultlist.map(({studentName:e,admissionNo:i,studentId:t,schoolId:d,id:c})=>({studentName:e,admissionNo:i,studentId:t,schoolId:d,id:c}));for(let e=0;e<this.excelObj.length;e++){let i=0,t=0,d=new Ge;d.studentId=this.excelObj[e]?.studentId;for(let[c,m]of Object.entries(this.excelObj[e])){if(m){let S=this.resultlist.findIndex(b=>b.studentId==this.excelObj[e].studentId);c.substring(0,3)=="CA1"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA1,Number(m)),d.ca1=this.upInputToMax(this.caScoreData.CA1,Number(m)),S!=-1&&(this.resultlist[S].ca1=this.upInputToMax(this.caScoreData.CA1,Number(m)))),c.substring(0,3)=="CA2"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA2,Number(m)),d.ca2=this.upInputToMax(this.caScoreData.CA2,Number(m)),S!=-1&&(this.resultlist[S].ca2=this.upInputToMax(this.caScoreData.CA2,Number(m)))),c.substring(0,3)=="CA3"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA3,Number(m)),d.ca3=this.upInputToMax(this.caScoreData.CA3,Number(m)),S!=-1&&(this.resultlist[S].ca3=this.upInputToMax(this.caScoreData.CA3,Number(m)))),c.substring(0,3)=="CA4"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA4,Number(m)),d.ca4=this.upInputToMax(this.caScoreData.CA4,Number(m)),S!=-1&&(this.resultlist[S].ca4=this.upInputToMax(this.caScoreData.CA4,Number(m)))),c.substring(0,3)=="CA5"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA5,Number(m)),d.ca5=this.upInputToMax(this.caScoreData.CA5,Number(m)),S!=-1&&(this.resultlist[S].ca5=this.upInputToMax(this.caScoreData.CA5,Number(m)))),c.substring(0,3)=="CA6"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA6,Number(m)),d.ca6=this.upInputToMax(this.caScoreData.CA6,Number(m)),S!=-1&&(this.resultlist[S].ca6=this.upInputToMax(this.caScoreData.CA6,Number(m)))),c.substring(0,3)=="CA7"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA7,Number(m)),d.ca7=this.upInputToMax(this.caScoreData.CA7,Number(m)),S!=-1&&(this.resultlist[S].ca7=this.upInputToMax(this.caScoreData.CA7,Number(m)))),c.substring(0,3)=="CA8"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA8,Number(m)),d.ca8=this.upInputToMax(this.caScoreData.CA8,Number(m)),S!=-1&&(this.resultlist[S].ca8=this.upInputToMax(this.caScoreData.CA8,Number(m)))),c.substring(0,3)=="CA9"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA9,Number(m)),d.ca9=this.upInputToMax(this.caScoreData.CA9,Number(m)),S!=-1&&(this.resultlist[S].ca9=this.upInputToMax(this.caScoreData.CA9,Number(m)))),c.substring(0,4)=="CA10"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA10,Number(m)),d.ca10=this.upInputToMax(this.caScoreData.CA10,Number(m)),S!=-1&&(this.resultlist[S].ca10=this.upInputToMax(this.caScoreData.CA10,Number(m)))),c.substring(0,4)=="CA11"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA11,Number(m)),d.ca11=this.upInputToMax(this.caScoreData.CA11,Number(m)),S!=-1&&(this.resultlist[S].ca11=this.upInputToMax(this.caScoreData.CA11,Number(m)))),c.substring(0,4)=="CA12"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA12,Number(m)),d.ca12=this.upInputToMax(this.caScoreData.CA12,Number(m)),S!=-1&&(this.resultlist[S].ca12=this.upInputToMax(this.caScoreData.CA12,Number(m)))),c.substring(0,4)=="CA13"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA13,Number(m)),d.ca13=this.upInputToMax(this.caScoreData.CA13,Number(m)),S!=-1&&(this.resultlist[S].ca13=this.upInputToMax(this.caScoreData.CA13,Number(m)))),c.substring(0,4)=="CA14"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA14,Number(m)),d.ca14=this.upInputToMax(this.caScoreData.CA14,Number(m)),S!=-1&&(this.resultlist[S].ca14=this.upInputToMax(this.caScoreData.CA14,Number(m)))),c.substring(0,4)=="CA15"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA15,Number(m)),d.ca15=this.upInputToMax(this.caScoreData.CA15,Number(m)),S!=-1&&(this.resultlist[S].ca15=this.upInputToMax(this.caScoreData.CA15,Number(m)))),c.substring(0,4)=="Exam"&&m!=""&&(t=1,i=i+Number(m),d.exam=Number(m),S!=-1&&(this.resultlist[S].exam=Number(m)))}if(t==1){let S=this.resultlist.findIndex(b=>b.studentId==this.excelObj[e].studentId);S!=-1&&(d.totalScore=Number(d.ca1??this.checkCA(this.resultlist[S].ca1))+Number(d.ca2??this.checkCA(this.resultlist[S].ca2))+Number(d.ca3??this.checkCA(this.resultlist[S].ca3))+Number(d.ca4??this.checkCA(this.resultlist[S].ca4))+Number(d.ca5??this.checkCA(this.resultlist[S].ca5))+Number(d.ca6??this.checkCA(this.resultlist[S].ca6))+Number(d.ca7??this.checkCA(this.resultlist[S].ca7))+Number(d.ca8??this.checkCA(this.resultlist[S].ca8))+Number(d.ca9??this.checkCA(this.resultlist[S].ca9))+Number(d.ca10??this.checkCA(this.resultlist[S].ca10))+Number(d.ca11??this.checkCA(this.resultlist[S].ca11))+Number(d.ca12??this.checkCA(this.resultlist[S].ca12))+Number(d.ca13??this.checkCA(this.resultlist[S].ca13))+Number(d.ca14??this.checkCA(this.resultlist[S].ca14))+Number(d.ca15??this.checkCA(this.resultlist[S].ca15))+Number(d.exam??this.checkCA(this.resultlist[S].exam)),this.resultlist[S].totalScore=Number(d.totalScore),this.resultlist[S].grade=this.calGrade(Number(d.totalScore)).grade,this.resultlist[S].remark=this.calGrade(Number(d.totalScore)).remark,d.grade=this.calGrade(Number(d.totalScore)).grade,d.remark=this.calGrade(Number(d.totalScore)).remark)}}this.bigboss.push(d),this.shouldOverride="TRUE"}}verifyExceedingTotalScores(e){return e.forEach(i=>{let t=this.resultlist.findIndex(V=>V.studentId==i.studentId),d=i?.ca1??this.checkCA(this.resultlist[t]?.ca1),c=i?.ca2??this.checkCA(this.resultlist[t]?.ca2),m=i?.ca3??this.checkCA(this.resultlist[t]?.ca3),S=i?.ca4??this.checkCA(this.resultlist[t]?.ca4),b=i?.ca5??this.checkCA(this.resultlist[t]?.ca5),g=i?.ca6??this.checkCA(this.resultlist[t]?.ca6),y=i?.ca7??this.checkCA(this.resultlist[t]?.ca7),U=i?.ca8??this.checkCA(this.resultlist[t]?.ca8),O=i?.ca9??this.checkCA(this.resultlist[t]?.ca9),Y=i?.ca10??this.checkCA(this.resultlist[t]?.ca10),ee=i?.ca11??this.checkCA(this.resultlist[t]?.ca11),Z=i?.ca12??this.checkCA(this.resultlist[t]?.ca12),Se=i?.ca13??this.checkCA(this.resultlist[t]?.ca13),ve=i?.ca14??this.checkCA(this.resultlist[t]?.ca14),we=i?.ca15??this.checkCA(this.resultlist[t]?.ca15),ye=i?.exam??this.checkCA(this.resultlist[t]?.exam);i.totalScore=d+c+m+S+b+g+y+U+O+Y+ee+Z+Se+ve+we+ye}),e.filter(i=>i.totalScore>100).length>0}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(L),_(It),_(j),_(lt))},u.\u0275cmp=B({type:u,selectors:[["app-dashboard"]],inputs:{header:"header"},decls:171,vars:30,consts:[["id","kt_wrapper",1,"marlin"],["id","kt_content"],["id","kt_post"],["id","kt_content_container"],[1,"card","mb-10"],[1,"card-body"],["id","kt_invoice_form",3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","align-items-start","flex-xxl-row"],["data-bs-toggle","tooltip","data-bs-trigger","hover",1,"d-flex","flex-center","flex-equal","fw-row","text-nowrap","order-1","order-xxl-2","me-4"],[1,"fs-2x","fw-bolder","text-gray-800"],[1,"separator","separator-dashed","my-10"],[1,"mb-0"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["formControlName","classId","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"value","change"],["cuclass",""],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["class","eroce",4,"ngIf"],[1,"fv-row","mb-5"],[1,"fs-6","fw-bold","form-label"],["name","class","formControlName","term","aria-label","Select Term","data-control","select2","data-placeholder","Select Term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["ter",""],["value",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],["formControlName","subjectId","aria-label","Select subject","data-control","select2","data-placeholder","Select subject..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["subj",""],["formControlName","sessionId","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["ses",""],[2,"text-align","center","width","100%"],[1,"btn","btn-primary",2,"padding","10px 10%",3,"click"],[1,"d-flex",2,"width","100%","justify-content","end","margin-top","60px"],["type","button",1,"btn","btn-info","px-12",2,"margin-right","10px",3,"disabled","click"],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","btn","btn-light-info",2,"height","48px","outline","none","border","solid 0.5px #7239ea","padding","6px 15px",3,"disabled"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu",2,"padding","10px"],[2,"margin-bottom","15px","margin-top","10px","font-size","16px"],["type","button","data-bs-toggle","modal","data-bs-target","#kt_modal_add_customer",1,"dropdown-item"],[2,"margin-bottom","10px","font-size","16px"],[1,"dropdown-item",3,"click"],[1,"table-responsive","mb-10"],["data-kt-element","items",1,"table","g-5","gs-0","mb-0","fw-bolder","text-gray-700"],[1,"border-bottom","fs-7","fw-bolder","text-gray-700","text-uppercase"],[1,"min-w-250px","w-250px",2,"background-color","white"],[1,"min-w-150px","w-150px"],["class","min-w-150px w-150px",4,"ngIf"],["class","border-bottom border-bottom-dashed","data-kt-element","Name",4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],["id","kt_customers_table_length",1,"dataTables_length"],["name","kt_customers_table_length","aria-controls","kt_customers_table",1,"form-select","form-select-sm","form-select-solid"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-sm-12","col-md-7","d-flex","align-items-center","justify-content-center","justify-content-md-end"],["id","kt_customers_table_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","kt_customers_table_previous",1,"paginate_button","page-item","previous","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","0","tabindex","0",1,"page-link"],[1,"previous"],[1,"paginate_button","page-item","active"],["href","#","aria-controls","kt_customers_table","data-dt-idx","1","tabindex","0",1,"page-link"],["id","kt_customers_table_next",1,"paginate_button","page-item","next","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","2","tabindex","0",1,"page-link"],[1,"next"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport",1,"form-control","form-control-solid",3,"change"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit","data-bs-dismiss","modal",1,"btn","btn-info",3,"click"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"],[1,"eroce"],["data-kt-element","Name",1,"border-bottom","border-bottom-dashed"],[1,"pe-7","fixed-column-state"],["type","text","name","name[]","placeholder","Acholo Nora",1,"form-control","form-control-solid","mb-2",3,"value"],[1,"ps-0"],["type","text","name","name[]","disabled","",1,"form-control","form-control-solid","mb-2",3,"value"],[4,"ngIf"],["type","text",1,"form-control","form-control-solid","text-center",3,"value","id","keyup"],["exam",""],[1,"form-control","form-control-solid","text-center"],[1,"pt-5","text-end"],["ca1",""],["ca2",""],["type","text",1,"form-control","form-control-solid","text-center",3,"value","id","keydown"],["ca3",""],["ca4",""],["type","text","type","text",1,"form-control","form-control-solid","text-center",3,"value","id","keyup"],["ca5",""],["ca6",""],["ca7",""],["ca8",""],["ca9",""],["ca10",""],["ca11",""],["ca12",""],["ca13",""],["ca14",""],["ca15",""]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),v("ngSubmit",function(){return t.getStudents()}),n(7,"div",7)(8,"div",8)(9,"span",9),r(10,"Enter Students Result"),s()()(),f(11,"div",10),n(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"label",15)(17,"span",16),r(18,"Select Class"),s()(),n(19,"div",17)(20,"select",18,19),v("change",function(){w(d);let m=E(21);return T(t.getGradeScale(m.value))}),n(22,"option",20),r(23,"Select Class..."),s(),C(24,qi,2,2,"option",21),s(),C(25,Ki,3,0,"div",22),s()(),n(26,"div",23)(27,"label",24)(28,"span",16),r(29,"Term"),s()(),n(30,"div",17)(31,"select",25,26),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(33,"option",27),r(34,"Select Term..."),s(),n(35,"option",28),r(36,"First "),s(),n(37,"option",29),r(38,"Second"),s(),n(39,"option",30),r(40,"Third"),s()(),C(41,Ji,3,0,"div",22),s()()(),n(42,"div",13)(43,"div",14)(44,"label",15)(45,"span",16),r(46,"Subject"),s()(),n(47,"div",17)(48,"select",31,32),M("ngModelChange",function(m){return A(t.currentSubjectId,m)||(t.currentSubjectId=m),m}),n(50,"option",27),r(51,"Select Subject..."),s(),C(52,Zi,2,2,"option",21),s(),C(53,Qi,3,0,"div",22),s()(),n(54,"div",14)(55,"label",24)(56,"span",16),r(57,"Session"),s()(),n(58,"div",17)(59,"select",33,34),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(61,"option",20),r(62,"Select Session..."),s(),C(63,en,2,2,"option",21),s(),C(64,tn,3,0,"div",22),s()()(),n(65,"div",35)(66,"div")(67,"button",36),v("click",function(){return t.getStudents()}),r(68,"Show Students"),s()()(),n(69,"div",37)(70,"button",38),v("click",function(){return t.validateSaveEntry()}),r(71,"Save"),s(),r(72," \xA0 "),n(73,"div",39)(74,"button",40),r(75," Actions "),s(),n(76,"ul",41)(77,"li",42)(78,"a",43),r(79,"Populate from file"),s()(),n(80,"li",44)(81,"a",45),v("click",function(){return t.downloadTemplate()}),r(82,"Download Template"),s()()()()()(),n(83,"div",46)(84,"table",47)(85,"thead")(86,"tr",48)(87,"th"),r(88,"S/N"),s(),n(89,"th",49),r(90,"Student Name"),s(),n(91,"th",50),r(92,"Admission No"),s(),C(93,nn,2,1,"th",51)(94,sn,2,1,"th",51)(95,rn,2,1,"th",51)(96,ln,2,1,"th",51)(97,on,2,1,"th",51)(98,an,2,1,"th",51)(99,dn,2,1,"th",51)(100,cn,2,1,"th",51)(101,mn,2,1,"th",51)(102,un,2,1,"th",51)(103,pn,2,1,"th",51)(104,hn,2,1,"th",51)(105,gn,2,1,"th",51)(106,Sn,2,1,"th",51)(107,fn,2,1,"th",51),n(108,"th",50),r(109,"Exam"),s(),n(110,"th",50),r(111,"Total Score"),s(),n(112,"th",50),r(113,"Grade"),s(),n(114,"th",50),r(115,"Remark"),s()()(),n(116,"tbody"),C(117,Rn,34,23,"tr",52),s()()(),n(118,"div",53)(119,"div",54)(120,"div",55)(121,"label")(122,"select",56)(123,"option",57),r(124,"10"),s(),n(125,"option",58),r(126,"25"),s(),n(127,"option",59),r(128,"50"),s(),n(129,"option",60),r(130,"100"),s()()()()(),n(131,"div",61)(132,"div",62)(133,"ul",63)(134,"li",64)(135,"a",65),f(136,"i",66),s()(),n(137,"li",67)(138,"a",68),r(139,"1"),s()(),n(140,"li",69)(141,"a",70),f(142,"i",71),s()()()()()()()()()(),n(143,"div",72)(144,"div",73)(145,"div",74)(146,"form",75)(147,"div",76)(148,"h2",77),r(149,"Upload Result"),s(),n(150,"div",78)(151,"span",79),F(),n(152,"svg",80),f(153,"rect",81)(154,"rect",82),s()()()(),P(),n(155,"div",83)(156,"div",84)(157,"div",85)(158,"label",86),r(159,"Upload Template"),s(),f(160,"i",87),n(161,"input",88),v("change",function(m){return t.loadExcel(m)}),s()()()(),n(162,"div",89)(163,"button",90),r(164,"Discard"),s(),n(165,"button",91),v("click",function(){return t.populateFromFile()}),n(166,"span",92),r(167,"Populate"),s(),n(168,"span",93),r(169,"Please wait... "),f(170,"span",94),s()()()()()()()()()()()}if(i&2){let d=E(21),c=E(32),m=E(49),S=E(60);l(6),h("formGroup",t.resultForm),l(14),h("value",t.currentClass),l(4),h("ngForOf",t.schoolClasses),l(),h("ngIf",!d.value&&t.submitted),l(6),N("ngModel",t.currentTerm),l(10),h("ngIf",!c.value&&t.submitted),l(7),N("ngModel",t.currentSubjectId),l(4),h("ngForOf",t.classSubjects),l(),h("ngIf",!m.value&&t.submitted),l(6),N("ngModel",t.currentSessionId),l(4),h("ngForOf",t.sessionlist),l(),h("ngIf",!S.value&&t.submitted),l(6),h("disabled",t.resultlist.length<1||t.submitted),l(4),h("disabled",t.resultlist.length<1&&t.submitted),l(19),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA1),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA2),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA3),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA4),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA5),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA6),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA7),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA8),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA9),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA10),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA11),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA12),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA13),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA14),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA15),l(10),h("ngForOf",t.resultlist)}},dependencies:[W,he,q,ne,se,ie,te,$,X,ct,Xe],styles:['@media (max-width:800px){.fixewidth[_ngcontent-%COMP%]{min-width:150px;width:170px}.snfixewidth[_ngcontent-%COMP%]{min-width:10px;width:10px}}@media (min-width: 800px) and (max-width: 3000px){.fixed-column-state[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:100}.fixewidth[_ngcontent-%COMP%]{min-width:250px;width:250px}.snfixewidth[_ngcontent-%COMP%]{min-width:30px;width:30px}.marlin[_ngcontent-%COMP%]{width:90%;margin:20px auto}}.btnact[_ngcontent-%COMP%]{background-color:#10ab23;color:#fff;font-weight:600;padding:10px 20px;border-radius:30px}.nobtnact[_ngcontent-%COMP%]{color:#10ab23;font-weight:600;padding:10px 20px;border-radius:30px}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:inline-block;border-top:4px solid #FFF;border-right:4px solid transparent;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}.loader[_ngcontent-%COMP%]:after{content:"";box-sizing:border-box;position:absolute;left:0;top:0;width:48px;height:48px;border-radius:50%;border-bottom:4px solid #FF3D00;border-left:4px solid transparent}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}',`.table[_ngcontent-%COMP%] {
                                                width: auto;
                                            }

                                            .table-responsive[_ngcontent-%COMP%] {
                                                overflow-x: auto;
                                                max-width: 100%;
                                            }

                                            .fixed-column[_ngcontent-%COMP%] {
                                                position: sticky;
                                                left: 0;
                                                background-color: #fff; 

                                                z-index: 1;
                                            }`]});let o=u;return o})();function Fn(o,u){if(o&1&&(n(0,"option",110),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function Pn(o,u){if(o&1&&(n(0,"option",110),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.sessionName)}}function Dn(o,u){if(o&1){let a=k();n(0,"button",111),v("click",function(){w(a);let i=x();return T(i.result_multiple.createResult(i.currentTerm,i.currentSessionId,i.currentSession,i.currentClass,i.currentClassName))}),r(1,"Download All Result"),s()}}var jn=(o,u)=>[o,"result",u],Ln=(o,u,a,e,i,t,d)=>({term:o,currentSessionId:u,currentSession:a,classId:e,className:i,classAverage:t,averageObj:d}),Bn=o=>({data:o});function zn(o,u){if(o&1&&(n(0,"button",112),r(1,"Download All Result"),s()),o&2){let a=x();h("routerLink",at(3,jn,"/admin",a.currentTerm=="ANNUAL"?a.getAnnualResultMultipleUrl:a.getresultMultipleUrl))("queryParams",gt(6,Ln,a.currentTerm,a.currentSessionId,a.currentSession,a.currentClass,a.currentClassName,a.classAverage,a.averageObj))("state",J(14,Bn,a.averageObj))}}function Vn(o,u){if(o&1){let a=k();n(0,"button",111),v("click",function(){w(a);let i=x(2),t=i.$implicit,d=i.index,c=x();return T(c.student_result.createResult(t.studentId,c.currentTerm,c.currentSessionId,c.currentSession,c.currentClass,t.average,t.average?c.formatPosition(d+1):""))}),r(1,"Download"),s()}}function Wn(o,u){if(o&1){let a=k();n(0,"button",111),v("click",function(){w(a);let i=x(2),t=i.$implicit,d=i.index,c=x();return T(c.notre_dame_result.createResult(t.studentId,c.currentTerm,c.currentSessionId,c.currentSession,c.currentClass,t.average,c.classAverage,t.average?c.formatPosition(d+1):""))}),r(1,"Download"),s()}}function Gn(o,u){if(o&1){let a=k();n(0,"button",111),v("click",function(){w(a);let i=x(2).$implicit,t=x(),d=E(189),c=E(187);return T(t.notre_dame_result.loadPdfChart(i.studentId,t.currentTerm,t.currentSessionId,t.currentSession,t.currentClass,i.average,t.classAverage,d,c))}),r(1,"Performance Analysis"),s()}}function Un(o,u){if(o&1){let a=k();n(0,"button",111),v("click",function(){w(a);let i=x(2),t=i.$implicit,d=i.index,c=x();return T(c.trailblazers_Result.createResult(t.studentId,c.currentTerm,c.currentSessionId,c.currentSession,c.currentClass,t.average,c.classAverage,t.average?c.formatPosition(d+1):""))}),r(1,"Download"),s()}}function Hn(o,u){if(o&1){let a=k();n(0,"button",111),v("click",function(){w(a);let i=x(2),t=i.$implicit,d=i.index,c=x();return T(c.louisville_result.createResult(t.studentId,c.currentTerm,c.currentSessionId,c.currentSession,c.currentClass,t.average,c.classAverage,t.average?c.formatPosition(d+1):""))}),r(1,"Download"),s()}}function Yn(o,u){if(o&1&&(n(0,"td"),C(1,Vn,2,0,"button",43)(2,Wn,2,0,"button",43)(3,Gn,2,0,"button",118)(4,Un,2,0,"button",43)(5,Hn,2,0,"button",43),s()),o&2){let a=x(2);l(),h("ngIf",a.getresultUrl=="student-result"),l(),h("ngIf",a.getresultUrl=="notre-dame-result"),l(),h("ngIf",a.getresultUrl=="notre-dame-result"),l(),h("ngIf",a.getresultUrl=="trailblazer-result"),l(),h("ngIf",a.getresultUrl=="louisville-result")}}var $n=(o,u,a)=>[o,"result",u,a],Xn=(o,u,a,e,i,t,d)=>({term:o,currentSessionId:u,currentSession:a,classId:e,average:i,classAverage:t,position:d});function qn(o,u){if(o&1&&(n(0,"td")(1,"button",119),r(2,"View result"),s()()),o&2){let a=x(),e=a.$implicit,i=a.index,t=x();l(),h("routerLink",vt(2,$n,"/admin",t.getannualResultUrl,e.studentId))("queryParams",gt(6,Xn,t.currentTerm,t.currentSessionId,t.currentSession,t.currentClass,e.average,t.classAverage,e.average?t.formatPosition(i+1):""))}}function Kn(o,u){if(o&1&&(n(0,"tr")(1,"td",113),r(2),s(),n(3,"td")(4,"a",114),r(5),s()(),n(6,"td")(7,"a",115),r(8),s()(),n(9,"td",116),r(10),s(),n(11,"td"),r(12),s(),n(13,"td"),r(14),s(),n(15,"td"),r(16),s(),C(17,Yn,6,5,"td",117)(18,qn,3,14,"td",117),s()),o&2){let a=u.$implicit,e=u.index,i=x();l(2),I(" ",e+1," "),l(3),p(a.studentName),l(3),p(a.sex),l(2),p(a.admissionNo),l(2),p(a.classes),l(2),p(a.average),l(2),p(i.formatPosition(i.getposition(a==null?null:a.average)+1)),l(),h("ngIf",i.currentTerm!="ANNUAL"),l(),h("ngIf",i.currentTerm=="ANNUAL")}}var oi=(()=>{let u=class u{constructor(e,i,t,d,c,m,S,b,g,y,U,O){this.router=e,this.route=i,this.auth=t,this.sch=d,this.gen=c,this.userdata=m,this.resultService=S,this.studentResult=b,this.resultMultiple=g,this.notreDameResult=y,this.louisvilleResult=U,this.trailblazersResult=O,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.resultlist=[],this.genk=c,this.userName=t.currentUserValue.name,this.schoolId=t.currentUserValue.schoolId,this.userImgPath=t.currentUserValue.logo,this.adminStatus=t.currentUserValue.status,this.student_result=b,this.result_multiple=g,this.notre_dame_result=y,this.louisville_result=U,this.trailblazers_Result=O}ngOnInit(){this.genk.topdata="View Result",this.getClassNames(),this.getSession(),this.getCurrentSession()}get getresultUrl(){return this.genk.resultTemplate.filter(e=>e.id==this.schoolId).length>0?this.genk.resultTemplate.filter(e=>e.id==this.schoolId)[0].result:this.genk.resultTemplate[0].result}get getannualResultUrl(){return this.genk.resultTemplate.filter(e=>e.id==this.schoolId).length>0?this.genk.resultTemplate.filter(e=>e.id==this.schoolId)[0].annual:this.genk.resultTemplate[0].annual}get getresultMultipleUrl(){return this.genk.resultTemplate.filter(e=>e.id==this.schoolId).length>0?this.genk.resultTemplate.filter(e=>e.id==this.schoolId)[0].multiple:this.genk.resultTemplate[0].multiple}get getAnnualResultMultipleUrl(){return this.genk.resultTemplate.filter(e=>e.id==this.schoolId).length>0?this.genk.resultTemplate.filter(e=>e.id==this.schoolId)[0].annualmultiple:this.genk.resultTemplate[0].annualmultiple}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.schoolClasses=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getResults(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getResultsAverageBySession(){this.userdata.loadingOnly(),this.currentTerm=="ANNUAL"?this.sch.getResultsAverageBySessionAnnual(this.currentClass,this.currentSessionId.toString()).subscribe(e=>{this.resultlist=e;let t=this.resultlist.map(d=>d.averageRaw).reduce((d,c)=>d+c,0);this.classAverage=(t/this.resultlist.length).toFixed(1),this.averageObj=this.resultlist.map(d=>({averageRaw:d.averageRaw,average:d.average,studentId:d.studentId})),this.averageObj=JSON.stringify(this.averageObj),console.log(this.classAverage),this.currentSession=this.sessionlist.filter(d=>d.id==this.currentSessionId)[0].sessionName,this.currentClassName=this.schoolClasses.filter(d=>d.id==Number(this.currentClass))[0].class,this.userdata.togLoadingOnly()}):this.sch.getResultsAverageBySession(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultlist=e;let t=this.resultlist.map(d=>d.averageRaw).reduce((d,c)=>d+c,0);this.classAverage=(t/this.resultlist.length).toFixed(1),this.averageObj=this.resultlist.map(d=>({averageRaw:d.averageRaw,average:d.average,studentId:d.studentId})),this.averageObj=JSON.stringify(this.averageObj),this.currentSession=this.sessionlist.filter(d=>d.id==this.currentSessionId)[0].sessionName,this.currentClassName=this.schoolClasses.filter(d=>d.id==Number(this.currentClass))[0].class,this.userdata.togLoadingOnly()})}getposition(e){return this.resultlist.findIndex(i=>i.average==e)}formatPosition(e){let i,t;switch(e==11||e==12||e==13?t=e:t=Number(e.toString()[e.toString().length-1]),t){case 1:i=e+"st";break;case 2:i=e+"nd";break;case 3:i=e+"rd";break;default:i=e+"th";break}return i}};u.\u0275fac=function(i){return new(i||u)(_(z),_(G),_(D),_(L),_(j),_(It),_($e),_(Kt),_(wt),_(Jt),_(ni),_(ii))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:190,vars:8,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],[1,"card-body","p-12"],["action","","id","kt_invoice_form"],[1,"d-flex","flex-column","align-items-start","flex-xxl-row"],["data-bs-toggle","tooltip","data-bs-trigger","hover","title","Enter invoice number",1,"d-flex","flex-center","flex-equal","fw-row","text-nowrap","order-1","order-xxl-2","me-4"],[1,"fs-2x","fw-bolder","text-gray-800"],[1,"separator","separator-dashed","my-10"],[1,"mb-0"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["name","classy","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fv-row","mb-5"],[1,"fs-6","fw-bold","form-label"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["name","clasis","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],["value","ANNUAL"],[1,"fv-row","mb-5",2,"margin-top","60px"],[1,"w-100","btn","btn-primary",2,"padding","10px",3,"click"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-customer-table-filter","search","placeholder","Search Students",1,"form-control","form-control-solid","w-250px","ps-15",3,"keyup"],["myInput",""],[1,"card-toolbar"],[1,"text-end"],["class","btn btn-sm btn-light-primary btn-active-primary me-3","class","btn btn-sm btn-light-primary btn-active-primary me-3",3,"click",4,"ngIf"],["class","btn btn-sm btn-light-primary btn-active-primary me-3",3,"routerLink","queryParams","state",4,"ngIf"],[1,"table-responsive","mb-10"],["id","kt_customers_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"w-10px","pe-2"],[1,"min-w-150px"],[1,"min-w-100px"],[1,"min-w-125px"],[1,"fw-bold","text-gray-600"],["myTbody",""],[4,"ngFor","ngForOf"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"d-flex","flex-column","mb-7","fv-row"],[1,"fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Students Class",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["name","Class","data-control","select2","data-placeholder","Select Class...","data-dropdown-parent","#kt_modal_add_customer",1,"form-select","form-select-solid","fw-bolder"],["value","1"],["value","2"],["name","Section","data-control","select2","data-placeholder","Select Section...","data-dropdown-parent","#kt_modal_add_customer",1,"form-select","form-select-solid","fw-bolder"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport","value","",1,"form-control","form-control-solid"],[1,"fv-row","mt-5","mb-7"],[1,"btn","btn-info","w-100"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit",1,"btn","btn-info"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["id","kt_customers_export_modal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-header"],["id","kt_customers_export_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"modal-body","scroll-y","mx-5","mx-xl-15","my-7"],["id","kt_customers_export_form","action","#",1,"form"],[1,"fs-5","fw-bold","form-label","mb-5"],["data-control","select2","data-placeholder","Select a format","data-hide-search","true","name","format",1,"form-select","form-select-solid"],["value","excell"],["value","pdf"],["value","cvs"],[1,"text-center"],[1,"row"],[1,"col","6"],["type","reset","id","kt_customers_export_cancel",1,"btn","btn-light","w-100","me-3"],["type","submit","id","kt_customers_export_submit",1,"w-100","btn","btn-info"],["id","kt_footer",1,"footer","py-4","d-flex","flex-lg-column"],[1,"container-fluid","d-flex","flex-column","flex-md-row","align-items-center","justify-content-between"],[1,"text-dark","order-2","order-md-1"],[1,"text-muted","fw-bold","me-1"],["href","https://GradexCloud.com","target","_blank",1,"text-gray-800","text-hover-info"],["id","chartdiv"],["mychartdiv",""],["id","myChart","width","3600","height","1800",2,"display","none"],["mychart",""],[3,"value"],[1,"btn","btn-sm","btn-light-primary","btn-active-primary","me-3",3,"click"],[1,"btn","btn-sm","btn-light-primary","btn-active-primary","me-3",3,"routerLink","queryParams","state"],[1,"text-gray-800","text-bold"],["href","View_user.html",1,"text-gray-800","text-hover-info","mb-1"],["href","#",1,"text-gray-600","text-hover-info","mb-1"],["data-filter","mastercard"],[4,"ngIf"],["class","btn btn-sm btn-light-primary btn-active-primary me-3",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-light-primary","btn-active-primary","me-3",3,"routerLink","queryParams"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",7)(8,"div",8)(9,"span",9),r(10,"Students Result"),s()()(),f(11,"div",10),n(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"label",15)(17,"span",16),r(18,"Select Class"),s()(),n(19,"div",17)(20,"select",18),M("ngModelChange",function(m){return A(t.currentClass,m)||(t.currentClass=m),m}),n(21,"option",19),r(22,"Select Class..."),s(),C(23,Fn,2,2,"option",20),s()()(),n(24,"div",21)(25,"label",22)(26,"span",16),r(27,"Session"),s()(),n(28,"div",17)(29,"select",23),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(30,"option",19),r(31,"Select Session..."),s(),C(32,Pn,2,2,"option",20),s()()()(),n(33,"div",13)(34,"div",14)(35,"label",15)(36,"span",16),r(37,"Term"),s()(),n(38,"div",17)(39,"select",24),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(40,"option",25),r(41,"Select term"),s(),n(42,"option",26),r(43,"First"),s(),n(44,"option",27),r(45,"Second"),s(),n(46,"option",28),r(47,"Third"),s(),n(48,"option",29),r(49,"Annual"),s()()()(),n(50,"div",30)(51,"div",17)(52,"button",31),v("click",function(){return t.getResultsAverageBySession()}),r(53,"Show Results"),s()()()(),n(54,"div",32)(55,"div",33)(56,"div",34)(57,"span",35),F(),n(58,"svg",36),f(59,"rect",37)(60,"path",38),s()(),P(),n(61,"input",39,40),v("keyup",function(){w(d);let m=E(62),S=E(88);return T(t.genk.searchTable(m,S))}),s()()(),n(63,"div",41)(64,"div",42),C(65,Dn,2,0,"button",43)(66,zn,2,16,"button",44),s()()()(),n(67,"div",45)(68,"table",46)(69,"thead")(70,"tr",47)(71,"th",48),r(72," S/N "),s(),n(73,"th",49),r(74,"Students Name"),s(),n(75,"th",50),r(76,"Gender"),s(),n(77,"th",49),r(78,"Admission No"),s(),n(79,"th",51),r(80,"Class"),s(),n(81,"th",51),r(82,"Average"),s(),n(83,"th",50),r(84,"Position"),s(),n(85,"th",50),r(86,"Actions"),s()()(),n(87,"tbody",52,53),C(89,Kn,19,9,"tr",54),s()()()()()()(),n(90,"div",55)(91,"div",56)(92,"div",57)(93,"form",58)(94,"div",59)(95,"h2",60),r(96,"Upload Students"),s(),n(97,"div",61)(98,"span",62),F(),n(99,"svg",36),f(100,"rect",63)(101,"rect",64),s()()()(),P(),n(102,"div",65)(103,"div",66)(104,"div",67)(105,"label",68)(106,"span",16),r(107,"Class"),s(),f(108,"i",69),s(),n(109,"select",70)(110,"option",19),r(111,"Select Class..."),s(),n(112,"option",71),r(113,"Primary 1"),s(),n(114,"option",72),r(115,"Primary 2"),s()()(),n(116,"div",67)(117,"label",68)(118,"span",16),r(119,"Section "),s()(),n(120,"select",73)(121,"option",19),r(122,"Select Section..."),s(),n(123,"option",71),r(124,"2022/2023"),s(),n(125,"option",72),r(126,"2023/2024"),s()()(),n(127,"div",74)(128,"label",75),r(129,"Upload Template"),s(),f(130,"i",76)(131,"input",77),s(),n(132,"div",78)(133,"button",79),r(134,"download Template Document"),s()()()(),n(135,"div",80)(136,"button",81),r(137,"Discard"),s(),n(138,"button",82)(139,"span",83),r(140,"Submit"),s(),n(141,"span",84),r(142,"Please wait... "),f(143,"span",85),s()()()()()()(),n(144,"div",86)(145,"div",56)(146,"div",57)(147,"div",87)(148,"h2",60),r(149,"Export Result"),s(),n(150,"div",88)(151,"span",62),F(),n(152,"svg",36),f(153,"rect",63)(154,"rect",64),s()()()(),P(),n(155,"div",89)(156,"form",90)(157,"div",14)(158,"label",91),r(159,"Select Export Format:"),s(),n(160,"select",92)(161,"option",93),r(162,"Excel"),s(),n(163,"option",94),r(164,"PDF"),s(),n(165,"option",95),r(166,"CVS"),s()()(),n(167,"div",96)(168,"div",97)(169,"div",98)(170,"button",99),r(171,"Discard"),s()(),n(172,"div",98)(173,"button",100)(174,"span",83),r(175,"Submit"),s(),n(176,"span",84),r(177,"Please wait... "),f(178,"span",85),s()()()()()()()()()()()()(),n(179,"div",101)(180,"div",102)(181,"div",103)(182,"span",104),r(183,"2022\xA9"),s(),n(184,"a",105),r(185,"gradeX-Cloud"),s()()()()(),n(186,"div",106,107),f(188,"canvas",108,109),s()}i&2&&(l(20),N("ngModel",t.currentClass),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(26),h("ngIf",t.getresultUrl=="student-result"),l(),h("ngIf",t.getresultUrl!="student-result"),l(23),h("ngForOf",t.resultlist))},dependencies:[W,he,q,ne,se,ie,te,$,ge,X,Fe],styles:['@media (max-width:800px){.fixewidth[_ngcontent-%COMP%]{min-width:150px;width:170px}.snfixewidth[_ngcontent-%COMP%]{min-width:10px;width:10px}}@media (min-width: 800px) and (max-width: 3000px){.fixed-column-state[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:100}.fixewidth[_ngcontent-%COMP%]{min-width:250px;width:250px}.snfixewidth[_ngcontent-%COMP%]{min-width:30px;width:30px}.marlin[_ngcontent-%COMP%]{width:90%;margin:20px auto}}.btnact[_ngcontent-%COMP%]{background-color:#10ab23;color:#fff;font-weight:600;padding:10px 20px;border-radius:30px}.nobtnact[_ngcontent-%COMP%]{color:#10ab23;font-weight:600;padding:10px 20px;border-radius:30px}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:inline-block;border-top:4px solid #FFF;border-right:4px solid transparent;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}.loader[_ngcontent-%COMP%]:after{content:"";box-sizing:border-box;position:absolute;left:0;top:0;width:48px;height:48px;border-radius:50%;border-bottom:4px solid #FF3D00;border-left:4px solid transparent}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}']});let o=u;return o})();ke();var Pt=K(Pe());function Jn(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA1?a.caSetupData.CA1:"CA1")}}function Zn(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA2?a.caSetupData.CA2:"CA2")}}function Qn(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA3?a.caSetupData.CA3:"CA3")}}function es(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA4?a.caSetupData.CA4:"CA4")}}function ts(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA5?a.caSetupData.CA5:"CA5")}}function is(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA6?a.caSetupData.CA6:"CA6")}}function ns(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA7?a.caSetupData.CA7:"CA7")}}function ss(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA8?a.caSetupData.CA8:"CA8")}}function rs(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA9?a.caSetupData.CA9:"CA9")}}function ls(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA10?a.caSetupData.CA10:"CA10")}}function os(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA11?a.caSetupData.CA11:"CA11")}}function as(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA12?a.caSetupData.CA12:"CA12")}}function ds(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA13?a.caSetupData.CA13:"CA13")}}function cs(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA14?a.caSetupData.CA14:"CA14")}}function ms(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA15?a.caSetupData.CA15:"CA15")}}function us(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca1)!==null&&e!==void 0?e:"")}}function ps(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca2)!==null&&e!==void 0?e:"")}}function hs(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca3)!==null&&e!==void 0?e:"")}}function gs(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca4)!==null&&e!==void 0?e:"")}}function Ss(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca5)!==null&&e!==void 0?e:"")}}function fs(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca6)!==null&&e!==void 0?e:"")}}function xs(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca7)!==null&&e!==void 0?e:"")}}function bs(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca8)!==null&&e!==void 0?e:"")}}function _s(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca9)!==null&&e!==void 0?e:"")}}function Cs(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca10)!==null&&e!==void 0?e:"")}}function vs(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca11)!==null&&e!==void 0?e:"")}}function ys(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca12)!==null&&e!==void 0?e:"")}}function Es(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca13)!==null&&e!==void 0?e:"")}}function Is(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca14)!==null&&e!==void 0?e:"")}}function ws(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca15)!==null&&e!==void 0?e:"")}}function Ts(o,u){if(o&1&&(n(0,"tr",29)(1,"td"),r(2),s(),C(3,us,2,1,"td",23)(4,ps,2,1,"td",23)(5,hs,2,1,"td",23)(6,gs,2,1,"td",23)(7,Ss,2,1,"td",23)(8,fs,2,1,"td",23)(9,xs,2,1,"td",23)(10,bs,2,1,"td",23)(11,_s,2,1,"td",23)(12,Cs,2,1,"td",23)(13,vs,2,1,"td",23)(14,ys,2,1,"td",23)(15,Es,2,1,"td",23)(16,Is,2,1,"td",23)(17,ws,2,1,"td",23),n(18,"td"),r(19),s(),n(20,"td"),r(21),s(),n(22,"td"),r(23),s(),n(24,"td"),r(25),s(),n(26,"td"),r(27),s(),n(28,"td"),r(29),s(),n(30,"td"),r(31),s(),n(32,"td"),r(33),s()()),o&2){let a=u.$implicit,e=x(),i,t,d,c,m,S,b,g;l(2),p(a.subject),l(),h("ngIf",e.caSetupData.CA1),l(),h("ngIf",e.caSetupData.CA2),l(),h("ngIf",e.caSetupData.CA3),l(),h("ngIf",e.caSetupData.CA4),l(),h("ngIf",e.caSetupData.CA5),l(),h("ngIf",e.caSetupData.CA6),l(),h("ngIf",e.caSetupData.CA7),l(),h("ngIf",e.caSetupData.CA8),l(),h("ngIf",e.caSetupData.CA9),l(),h("ngIf",e.caSetupData.CA10),l(),h("ngIf",e.caSetupData.CA11),l(),h("ngIf",e.caSetupData.CA12),l(),h("ngIf",e.caSetupData.CA13),l(),h("ngIf",e.caSetupData.CA14),l(),h("ngIf",e.caSetupData.CA15),l(2),p((i=a.exam==null?null:a.exam.toFixed(1))!==null&&i!==void 0?i:""),l(2),p((t=a.totalScore==null?null:a.totalScore.toFixed(1))!==null&&t!==void 0?t:""),l(2),p((d=a.grade)!==null&&d!==void 0?d:""),l(2),p((c=a.remark)!==null&&c!==void 0?c:""),l(2),p((m=a.position)!==null&&m!==void 0?m:""),l(2),p((S=a.lowestScore==null?null:a.lowestScore.toFixed(1))!==null&&S!==void 0?S:""),l(2),p((b=a.highestScore==null?null:a.highestScore.toFixed(1))!==null&&b!==void 0?b:""),l(2),p((g=a.average==null?null:a.average.toFixed(1))!==null&&g!==void 0?g:"")}}function ks(o,u){o&1&&(n(0,"div",30)(1,"div",31)(2,"div"),f(3,"span",32),s(),n(4,"div",33),r(5,"Loading Result.."),s()()())}var ai=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.activeRoute=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.gradeScalelist=[],this.gradescaletextlist=[],this.loadingResult=!1,this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Result",this.studentId=this.activeRoute.snapshot.params.id,this.activeRoute.queryParams.subscribe(e=>{this.currentTerm=e.term,this.currentSessionId=e.currentSessionId,this.currentSession=e.currentSession,this.currentClassId=e.classId,this.average=e.average,this.position=e.position}),this.getSchool(),this.getStudent(),this.getNoInClass(),this.getResultsByStudent(),this.getCaSetupByClass(),this.getGradeScaleByClass(),this.getStudentResultComment()}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getSchool(){this.sch.getSchoolData().subscribe(e=>{this.myschool=e})}getStudent(){this.sch.getStudentById(this.studentId.toString()).subscribe(e=>{debugger;this.studentobj=e,this.addLogo(),this.addSignature()})}getNoInClass(){this.sch.getNoInClass(this.studentId.toString()).subscribe(e=>{this.noInClass=e.count})}getResultsByStudent(){this.loadingResult=!0,this.sch.getResultsByStudent(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultlist=e,this.loadingResult=!1})}getStudentResultComment(){this.sch.getStudentResultComment(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname,this.caSetupScoreData=e.score})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e,this.gradescaletextlist.push(this.gradeScalelist[0].classLevel+":");let i;this.gradeScalelist.forEach(t=>{i=t.grade+" = "+t.remarks+" ("+t.begLimit+" - "+t.endLimit+")",this.gradescaletextlist.push(i)})})}convertToPDF(e){debugger;var i=new ae("p","pt","letter"),t=i.internal.pageSize.height||i.internal.pageSize.getHeight(),d=i.internal.pageSize.width||i.internal.pageSize.getWidth();i.setFont("Trebuchet MS","normal","900"),i.setTextColor("rgb(36, 91, 143)"),i.setFontSize(20),i.text(this.myschool?.schoolName??"",d/2,30,{align:"center"}),this.genk.logoString&&i.addImage(this.genk.logoString,"PNG",270,40,55,55),this.genk.signatureString&&i.addImage(this.genk.signatureString,"PNG",500,695,70,55),i.setFontSize(10),i.setTextColor("rgb(0, 0, 0)"),i.setFont("","","700"),i.text("Postal Address:",20,60),i.setFont("","","500");let c=i.splitTextToSize(this.myschool?.address??"",220);i.text(c,20,73),i.setFont("","","700"),i.text("Email:",380,60),i.setFont("","","500"),i.text(this.myschool?.email??"",418,60),i.setFont("","","700"),i.text("Phone:",380,74),i.setFont("","","500"),i.text(this.myschool?.phoneOne??"",418,74),i.setFont("","","700"),i.text("website:",380,88),i.setFont("","","500"),i.text(this.myschool?.website??"",424,88),i.setDrawColor(36,91,143),i.setLineWidth(2),i.line(20,100,580,100),i.setFontSize(8),i.setFont("","","700"),i.text("STUDENTS NAME:",20,120),i.setFont("","","500"),i.text(((this.studentobj?.surname??"")+" "+(this.studentobj?.middleName??"")+" "+(this.studentobj?.firstName??"")).trim(),113,120),i.setFont("","","700"),i.text("CLASS:",20,132),i.setFont("","","500"),i.text(this.studentobj?.class??"",113,132),i.setFont("","","700"),i.text("NO. IN CLASS:",20,144),i.setFont("","","500"),i.text(this.noInClass.toString(),113,144),i.setFont("","","700"),i.text("AVERAGE SCORE:",20,156),i.setFont("","","500"),i.text(this.average.toString(),113,156),i.setFont("","","700"),i.text("POSITION IN CLASS:",20,168),i.setFont("","","500"),i.text(this.position.toString(),113,168),i.setFont("","","700"),i.text("TERM:",380,120),i.setFont("","","500"),i.text(this.currentTerm,460,120),i.setFont("","","700"),i.text("SESSION:",380,132),i.setFont("","","500"),i.text(this.currentSession,460,132),i.setFont("","","700"),i.text("ADMISSION NO.:",380,144),i.setFont("","","500"),i.text(this.studentobj?.admissionNo??"",460,144),i.setFont("","","700"),i.text("NEXT TERM BEGINS:",380,156),i.setFont("","","500"),i.text("",460,156),i.setFontSize(12),i.setFont("","","700"),i.text("REPORT SHEET FOR JUNIOR AND SENIOR SECONDARY",d/2,190,{align:"center"});let m=this.resultlist,S=[];m.forEach(V=>{let R=[];R.push(V.subject),Object.keys(this.caSetupData).forEach(le=>{R.push(V[le.toLowerCase()])}),R.push(V.totalScore),R.push(V.grade),R.push(V.remark),R.push(V.position),R.push(V.lowestScore),R.push(V.highestScore),R.push(V.average),S.push(R)});let b=this.caSetupData,g=Object.keys(b),y=Object.values(b),U=Object.values(this.caSetupScoreData);for(let V=0;V<y.length;V++)y[V]=y[V]+"("+U[V]+"%)";y.forEach(V=>{V=V+"("+this.caSetupScoreData.CA1+"%)"});let O=["Subject",...y,"Total Score","Grade","Remark","Position","Lowest Score","Highest Score","Average"],Y=S;(0,Pt.default)(i,{head:[O],useCss:!0,body:S,styles:{font:"8px",lineColor:"#808080",lineWidth:.1,fontSize:8,cellPadding:3},headStyles:{fontSize:6,lineColor:"white",textColor:"white",fillColor:[45,113,177]},startY:200,margin:{left:20}});let ee=i.previousAutoTable.finalY;i.setFontSize(10),(0,Pt.default)(i,{body:[[{content:"KEY TO GRADE:",styles:{halign:"center",fontStyle:"bold"}},{content:["A = Excellent","B = Good","C = Fair","D = Poor","F = Fail"].join("  "),styles:{halign:"left"}}],[{content:"KEY TO RATINGS:",styles:{halign:"center",fontStyle:"bold"}},{content:"1 = Very Poor  2 = Poor  3 = Fair  4 = Good  5 = Excellent",styles:{halign:"left"}}]],styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},startY:620,tableWidth:552,margin:{left:20},theme:"grid"}),i.setFontSize(8),i.setFont("","","700");let Se=i.splitTextToSize("Form Teacher's Comment:",100);i.text(Se,20,700),i.setFont("","","500"),i.setTextColor("rgb(36, 91, 143)");let ve=i.splitTextToSize(this.resultComment?.formTeacherComment??"",370);i.text(ve,119,700),i.setTextColor("rgb(0, 0, 0)"),i.setFont("","","700");let we=i.splitTextToSize("Principal's Comment:",100);i.text(we,20,730),i.setFont("","","500"),i.setTextColor("rgb(36, 91, 143)");let ye=i.splitTextToSize(this.resultComment?.principalComment??"",370);i.text(ye,103,730),i.save("My_Results")}addLogo(){this.sch.getSchoolLogo(this.myschool.id).subscribe(e=>{debugger;let i=this.genk.getLogoMediaBase64(e,e.type)})}addSignature(){this.sch.obtainSignature(this.currentSessionId,this.currentTerm).subscribe(e=>{let i=this.genk.getMediaBase64(e,e.type)})}getBase64ImageFromUrl(e){return H(this,null,function*(){var i=yield fetch(e);let t=yield i.text();var c=this.base64ToBlob(t,"image/png");return new Promise((m,S)=>{var b=new FileReader;b.addEventListener("load",function(){m(b.result)},!1),b.onerror=()=>S(this),b.readAsDataURL(c)})})}base64ToBlob(e,i=""){let t=atob(e),d=[];for(let m=0;m<t.length;m+=512){let S=t.slice(m,m+512),b=new Array(S.length);for(let y=0;y<S.length;y++)b[y]=S.charCodeAt(y);let g=new Uint8Array(b);d.push(g)}return new Blob(d,{type:i})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(G),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:141,vars:33,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[2,"text-align","end","margin","10px 30px"],[2,"padding","10px 50px","border","none","outline","none","background-color","dodgerblue","color","white","border-radius","20px","box-shadow","1px 1px 3px rgb(0, 0, 0, 0.3)",3,"click"],[1,"fonticon-printer",2,"margin-right","6px","color","white","font-size","16px"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],["prin",""],[1,"card-body","p-12"],[2,"font-family","'Poppins-Medium'"],[2,"text-align","center","margin-bottom","20px"],[2,"font-size","39px","color","rgb(36, 91, 143)","font-weight","900"],[2,"display","flex","justify-content","space-between","font-size","16px"],[1,"col-4"],[2,"font-weight","600"],[1,"col-4","text-center"],[2,"object-fit","cover","height","100px","width","100px","border-radius","100%",3,"src"],[2,"height","6px","background-color","rgb(36, 91, 143)","margin-top","30px"],[2,"display","flex","justify-content","space-between","font-size","17px"],[2,"text-align","center","margin-top","10px"],["id","customers"],["tabl",""],[4,"ngIf"],["class","border-bottom border-bottom-dashed",4,"ngFor","ngForOf"],["style","height: 40vh; width: 100%; display: flex; justify-content: center; align-items: center; background-color: rgb(226, 228, 229);",4,"ngIf"],[2,"margin-bottom","40px"],[2,"font-size","15px","font-weight","600","color","rgb(75, 73, 73)"],[2,"font-size","15px","color","rgb(9, 95, 182)","font-style","italic"],[1,"border-bottom","border-bottom-dashed"],[2,"height","40vh","width","100%","display","flex","justify-content","center","align-items","center","background-color","rgb(226, 228, 229)"],[2,"text-align","center"],[1,"loader"],[2,"margin-top","10px","font-size","15px"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),v("click",function(){w(d);let m=E(9);return T(t.convertToPDF(m))}),f(4,"i",4),r(5," Print"),s()(),n(6,"div",5)(7,"div",6)(8,"div",7,8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"span",12),r(14),s()(),n(15,"div",13)(16,"div",14)(17,"span",15),r(18,"Postal Address:"),s(),f(19,"br"),n(20,"span"),r(21),s()(),n(22,"div",16),f(23,"img",17),s(),n(24,"div",14)(25,"span",15),r(26,"Email: "),s(),n(27,"span"),r(28),s(),f(29,"br"),n(30,"span",15),r(31,"Phone: "),s(),n(32,"span"),r(33),s(),f(34,"br"),n(35,"span",15),r(36,"website: "),s(),n(37,"span"),r(38),s()()(),f(39,"div",18),n(40,"div",19)(41,"div")(42,"span",15),r(43,"STUDENTS NAME: "),s(),n(44,"span"),r(45),s(),f(46,"br"),n(47,"span",15),r(48,"CLASS NAME: "),s(),n(49,"span"),r(50),s(),f(51,"br"),n(52,"span",15),r(53,"NO. IN CLASS: "),s(),n(54,"span"),r(55),s(),f(56,"br"),n(57,"span",15),r(58,"AVERAGE SCORE: "),s(),n(59,"span"),r(60),s(),f(61,"br"),n(62,"span",15),r(63,"POSITION IN CLASS: "),s(),n(64,"span"),r(65),s()(),n(66,"div",14)(67,"span",15),r(68,"TERM: "),s(),n(69,"span"),r(70),s(),f(71,"br"),n(72,"span",15),r(73,"SESSION: "),s(),n(74,"span"),r(75),s(),f(76,"br"),n(77,"span",15),r(78,"ADMISSION NO.: "),s(),n(79,"span"),r(80),s(),f(81,"br"),n(82,"span",15),r(83,"NEXT TERM BEGINS:"),s()()(),n(84,"div",20)(85,"h1"),r(86,"REPORT SHEET FOR JUNIOR AND SENIOR SECONDARY"),s()(),f(87,"div"),s(),n(88,"table",21,22)(90,"thead")(91,"tr")(92,"th"),r(93,"Subject"),s(),C(94,Jn,2,1,"th",23)(95,Zn,2,1,"th",23)(96,Qn,2,1,"th",23)(97,es,2,1,"th",23)(98,ts,2,1,"th",23)(99,is,2,1,"th",23)(100,ns,2,1,"th",23)(101,ss,2,1,"th",23)(102,rs,2,1,"th",23)(103,ls,2,1,"th",23)(104,os,2,1,"th",23)(105,as,2,1,"th",23)(106,ds,2,1,"th",23)(107,cs,2,1,"th",23)(108,ms,2,1,"th",23),n(109,"th"),r(110,"Exam"),s(),n(111,"th"),r(112,"Total Score"),s(),n(113,"th"),r(114,"Grade"),s(),n(115,"th"),r(116,"Remark"),s(),n(117,"th"),r(118,"Position"),s(),n(119,"th"),r(120,"Lowest Score"),s(),n(121,"th"),r(122,"Highest Score"),s(),n(123,"th"),r(124,"Average"),s()()(),n(125,"tbody"),C(126,Ts,34,24,"tr",24),s()(),C(127,ks,6,0,"div",25),n(128,"div")(129,"div",26)(130,"span",27),r(131,"Form Teacher's Comment:"),s(),r(132," \xA0\xA0 "),n(133,"span",28),r(134),s()(),n(135,"div")(136,"span",27),r(137,"Principal's Comment:"),s(),r(138," \xA0\xA0 "),n(139,"span",28),r(140),s()()()()()()()()()}if(i&2){let d;l(14),p(t.myschool==null?null:t.myschool.schoolName),l(7),p(t.myschool==null?null:t.myschool.address),l(2),h("src",t.setImg(t.myschool==null?null:t.myschool.schoolLogo),oe),l(5),p(t.myschool==null?null:t.myschool.email),l(5),p(t.myschool==null?null:t.myschool.phoneOne),l(5),p(t.myschool==null?null:t.myschool.website),l(7),p((((d=t.studentobj==null?null:t.studentobj.surname)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.middleName)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.firstName)!==null&&d!==void 0?d:"")).trim()),l(5),p(t.studentobj==null?null:t.studentobj.class),l(5),p(t.noInClass),l(5),p(t.average),l(5),p(t.position),l(5),p(t.currentTerm),l(5),p(t.currentSession),l(5),p(t.studentobj==null?null:t.studentobj.admissionNo),l(14),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA1),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA2),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA3),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA4),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA5),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA6),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA7),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA8),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA9),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA10),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA11),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA12),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA13),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA14),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA15),l(18),h("ngForOf",t.resultlist),l(),h("ngIf",t.loadingResult),l(7),p(t.resultComment==null?null:t.resultComment.formTeacherComment),l(6),p(t.resultComment==null?null:t.resultComment.principalComment)}},dependencies:[W,he],styles:["#customers[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px;font-size:9px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}.heitable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(186,187,190);padding:2px 5px}.resprint[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#1e90ff;color:#fff;border-radius:20px;box-shadow:1px 1px 3px #0000004d}.resprintdisabled[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#a0a3a6;color:#000;border-radius:20px;box-shadow:1px 1px 3px #0000004d}#customerslouismidterm[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerslouismidterm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:11px}#customerslouismidterm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;font-size:11px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}#customerstrail[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerstrail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:4px;font-size:10px}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customerstrail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-size:10px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}",'@media (max-width:800px){.fixewidth[_ngcontent-%COMP%]{min-width:150px;width:170px}.snfixewidth[_ngcontent-%COMP%]{min-width:10px;width:10px}}@media (min-width: 800px) and (max-width: 3000px){.fixed-column-state[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:100}.fixewidth[_ngcontent-%COMP%]{min-width:250px;width:250px}.snfixewidth[_ngcontent-%COMP%]{min-width:30px;width:30px}.marlin[_ngcontent-%COMP%]{width:90%;margin:20px auto}}.btnact[_ngcontent-%COMP%]{background-color:#10ab23;color:#fff;font-weight:600;padding:10px 20px;border-radius:30px}.nobtnact[_ngcontent-%COMP%]{color:#10ab23;font-weight:600;padding:10px 20px;border-radius:30px}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:inline-block;border-top:4px solid #FFF;border-right:4px solid transparent;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}.loader[_ngcontent-%COMP%]:after{content:"";box-sizing:border-box;position:absolute;left:0;top:0;width:48px;height:48px;border-radius:50%;border-bottom:4px solid #FF3D00;border-left:4px solid transparent}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}']});let o=u;return o})();var Ne=K(Te());function Ns(o,u){if(o&1&&(n(0,"option",105),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function As(o,u){if(o&1&&(n(0,"option",105),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),I("",a.sessionName," ")}}function Ms(o,u){if(o&1){let a=k();n(0,"tr")(1,"td",106),r(2),s(),n(3,"td")(4,"a",107),r(5),s()(),n(6,"td")(7,"a",108),r(8),s()(),n(9,"td"),r(10),s(),n(11,"td"),r(12),s(),n(13,"td")(14,"input",109,110),v("change",function(){let t=w(a).$implicit,d=E(15),c=x();return T(c.editComment(t.studentId,d.value))}),s()()()}if(o&2){let a=u.$implicit,e=u.index,i=x(),t;l(2),I(" ",e+1," "),l(3),p(a.studentName),l(3),p(a.sex),l(2),p(a.average),l(2),p(a.average?i.formatPosition(e+1):""),l(2),h("value",(t=a.comment)!==null&&t!==void 0?t:"")}}function Os(o,u){if(o&1&&(n(0,"option",105),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function Rs(o,u){if(o&1&&(n(0,"option",105),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),I("",a.sessionName," ")}}function Fs(o,u){if(o&1){let a=k();n(0,"div",111)(1,"div",112),v("click",function(){let t=w(a).$implicit,d=x();return T(d.getResultsByStudent(t.studentId,t.studentName,t.studentPhoto,t.comment))}),n(2,"div",82)(3,"div",113)(4,"div",114),f(5,"img",115),s()(),n(6,"div",83)(7,"a",116),r(8),s()()(),n(9,"div",85)(10,"div",83)(11,"a",84),r(12),s()()()(),f(13,"div",86),s()}if(o&2){let a=u.$implicit,e=x(),i;l(5),h("src",e.setImg(a.studentPhoto),oe),l(3),p(a.studentName),l(4),p((i=a.average)!==null&&i!==void 0?i:"")}}function Ps(o,u){if(o&1&&(n(0,"tr")(1,"td")(2,"a",107),r(3),s()(),n(4,"td")(5,"a",117),r(6),s()(),n(7,"td",117),r(8),s(),n(9,"td",117),r(10),s(),n(11,"td",117),r(12),s()()),o&2){let a=u.$implicit;l(3),p(a.subject),l(3),p(a.totalScore),l(2),p(a.grade),l(2),p(a.position),l(2),I("",a.remark," ")}}function Ds(o,u){if(o&1&&(n(0,"option",105),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function js(o,u){if(o&1&&(n(0,"option",105),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),I("",a.sessionName," ")}}function Ls(o,u){if(o&1){let a=k();n(0,"tr")(1,"td",106),r(2),s(),n(3,"td")(4,"a",107),r(5),s()(),n(6,"td")(7,"a",108),r(8),s()(),n(9,"td"),r(10),s(),n(11,"td"),r(12),s(),n(13,"td")(14,"input",109,118),v("change",function(){let t=w(a).$implicit,d=E(15),c=x();return T(c.editHostelComment(t.studentId,d.value))}),s()()()}if(o&2){let a=u.$implicit,e=u.index,i=x(),t;l(2),I(" ",e+1," "),l(3),p(a.studentName),l(3),p(a.sex),l(2),p(a.average),l(2),p(a.average?i.formatPosition(e+1):""),l(2),h("value",(t=a.comment)!==null&&t!==void 0?t:"")}}var di=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.route=i,this.auth=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.resultlist=[],this.principalresultlist=[],this.hostelresultlist=[],this.commentlist=[],this.principlecommentlist=[],this.hostelcommentlist=[],this.studentresultlist=[],this.destroy=new Ee,this.gradeScaleList=[],this.genk=c,this.userName=t.currentUserValue.name,this.userImgPath=t.currentUserValue.logo,this.adminStatus=t.currentUserValue.status,this.schoolId=t.currentUserValue.schoolId}ngOnInit(){this.genk.topdata="Comment Entry",this.getClassNames(),this.getSession(),this.getCurrentSession()}get HouseCommentHeader(){return this.schoolId==520?"House Mother Comment":"Hostel Supervisor Comment"}getClassNames(){this.sch.getClassNames().subscribe(e=>{debugger;this.schoolClasses=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getResults(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getResultsAverageByClass(){this.currentTerm=="ANNUAL"?this.sch.getAnnualResultsAverageByClassComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultlist=e,this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName}):this.sch.getResultsAverageByClassComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultlist=e,this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName})}getResultsAverageHostelPortal(){this.currentTerm=="ANNUAL"?this.sch.getAnnualResultsAverageHostelSupervisorComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.hostelresultlist=e,this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName}):this.sch.getResultsAverageHostelSupervisorComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.hostelresultlist=e,this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName})}getResultsAverageByClassPrincipalComment(){this.currentTerm=="ANNUAL"?this.sch.getAnnualResultsAverageByClassComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(t=>{this.principalresultlist=t,this.currentSession=this.sessionlist.filter(d=>d.id==this.currentSessionId)[0].sessionName}):this.sch.getResultsAverageByClassPrincipalComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(t=>{this.principalresultlist=t,this.currentSession=this.sessionlist.filter(d=>d.id==this.currentSessionId)[0].sessionName});let i=this.schoolClasses.filter(t=>t.id==this.currentClass)[0].classLevelId;debugger;this.sch.getGradeScaleByCategory(i).subscribe(t=>{this.gradeScaleList=t})}editComment(e,i){if(this.commentlist.length>0)if(this.commentlist.filter(t=>t.studentId==Number(e)).length>0)this.commentlist[this.commentlist.findIndex(t=>t.studentId==Number(e))].comment=i;else{let t={studentId:e,comment:i};this.commentlist.push(t)}else{let t={studentId:e,comment:i};this.commentlist.push(t)}}editPrincipleComment(e,i){if(this.principlecommentlist.length>0)if(this.principlecommentlist.filter(t=>t.studentId==Number(e)).length>0)this.principlecommentlist[this.principlecommentlist.findIndex(t=>t.studentId==Number(e))].comment=i;else{let t={studentId:e,comment:i};this.principlecommentlist.push(t)}else{let t={studentId:e,comment:i};this.principlecommentlist.push(t)}}editHostelComment(e,i){if(this.hostelcommentlist.length>0)if(this.hostelcommentlist.filter(t=>t.studentId==Number(e)).length>0)this.hostelcommentlist[this.hostelcommentlist.findIndex(t=>t.studentId==Number(e))].comment=i;else{let t={studentId:e,comment:i};this.hostelcommentlist.push(t)}else{let t={studentId:e,comment:i};this.hostelcommentlist.push(t)}}formatPosition(e){let i;switch(e){case 1:i="1st";break;case 2:i="2nd";break;case 3:i="3rd";break;default:i=e+"th";break}return i}saveComments(){Ne.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{Ne.default.showLoading(),this.sch.saveFormTeacherComment(this.commentlist,this.currentClass,this.currentSessionId.toString(),this.currentTerm).pipe(pe(this.destroy)).subscribe(e=>{Ne.default.close()})}}).then(e=>{Ne.default.fire({icon:"success",title:"Result Entry updated successfully!.",showConfirmButton:!1,timer:2e3})})}getResultsByStudent(e,i,t,d){this.myStudentId=e,this.myStudentName=i,this.myStudentPhoto=t,this.principleComment=d,this.currentTerm=="ANNUAL"?this.sch.getAnnualResultsPagePrincipal(this.currentClass,this.currentSessionId.toString(),e.toString()).subscribe(c=>{this.studentresultlist=c;for(let S=0;S<this.studentresultlist.length;S++){var m=this.gradeScaleList.filter(b=>b.endLimit>=this.studentresultlist[S].totalScore)[0];this.studentresultlist[S].grade=m.grade,this.studentresultlist[S].remark=m.remarks}}):this.sch.getResultsByStudent(this.currentClass,this.currentSessionId.toString(),this.currentTerm,e.toString()).subscribe(c=>{debugger;this.studentresultlist=c})}savePrincipleComments(){Ne.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{Ne.default.showLoading(),this.sch.saveFormPrincipalComment(this.principlecommentlist,this.currentClass,this.currentSessionId.toString(),this.currentTerm).pipe(pe(this.destroy)).subscribe(e=>{Ne.default.close()})}}).then(e=>{Ne.default.fire({icon:"success",title:"Result Entry updated successfully!.",showConfirmButton:!1,timer:2e3})})}saveHostelComments(){Ne.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{Ne.default.showLoading(),this.sch.saveHostelSupervisorComment(this.hostelcommentlist,this.currentClass,this.currentSessionId.toString(),this.currentTerm).pipe(pe(this.destroy)).subscribe(e=>{Ne.default.close()})}}).then(e=>{Ne.default.fire({icon:"success",title:"Result Entry updated successfully!.",showConfirmButton:!1,timer:2e3})})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(G),_(D),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:321,vars:23,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],["id","kt_ecommerce_add_product_form","data-kt-redirect","#",1,"form","d-flex","flex-column","flex-lg-row"],[1,"d-flex","flex-column","flex-row-fluid","gap-7","gap-lg-10"],[1,"nav","nav-custom","nav-tabs","nav-line-tabs","nav-line-tabs-2x","border-0","fs-4","fw-bold","mb-n2"],[1,"nav-item"],["data-bs-toggle","tab","href","#kt_ecommerce_add_product_general",1,"nav-link","text-active-primary","pb-4","active"],["data-bs-toggle","tab","href","#kt_ecommerce_add_product_new",1,"nav-link","text-active-primary","pb-4"],["data-bs-toggle","tab","href","#kt_ecommerce_add_product_general_H",1,"nav-link","text-active-primary","pb-4"],[1,"tab-content"],["id","kt_ecommerce_add_product_general","role","tab-panel",1,"tab-pane","fade","show","active"],[1,"d-flex","flex-column","gap-7","gap-lg-10"],[1,"card","card-flush","py-4"],[1,"card-body","pt-10"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["name","classy","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fs-6","fw-bold","form-label"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["name","clasis","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],["value","ANNUAL"],[1,"fv-row","mb-5",2,"margin-top","60px"],[1,"w-100","btn","btn-primary",2,"padding","10px",3,"click"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-customer-table-filter","search","placeholder","Search Students",1,"form-control","form-control-solid","w-250px","ps-15"],[1,"text-end"],["type","submit",1,"me-3","btn","btn-info",3,"click"],[1,"indicator-label"],["type","button","data-bs-toggle","modal","data-bs-target","#kt_modal_add_customer",1,"btn","btn-info"],[1,"table-responsive","mb-10"],["id","kt_customers_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"w-10px","pe-2"],[1,"min-w-150px"],[1,"min-w-100px"],[1,"min-w-125px"],[1,"min-w-300px"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],["id","kt_customers_table_length",1,"dataTables_length"],["name","kt_customers_table_length","aria-controls","kt_customers_table",1,"form-select","form-select-sm","form-select-solid"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-sm-12","col-md-7","d-flex","align-items-center","justify-content-center","justify-content-md-end"],["id","kt_customers_table_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","kt_customers_table_previous",1,"paginate_button","page-item","previous","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","0","tabindex","0",1,"page-link"],[1,"previous"],[1,"paginate_button","page-item","active"],["href","#","aria-controls","kt_customers_table","data-dt-idx","1","tabindex","0",1,"page-link"],["id","kt_customers_table_next",1,"paginate_button","page-item","next","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","2","tabindex","0",1,"page-link"],[1,"next"],["id","kt_ecommerce_add_product_new","role","tab-panel",1,"tab-pane","fade"],[1,"col-lg-6","col-xl-4","mb-5"],["id","kt_contacts_list",1,"card","card-flush"],["id","kt_contacts_list_body",1,"card-body","pt-5"],["data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_header, #kt_toolbar, #kt_footer, #kt_contacts_list_header","data-kt-scroll-wrappers","#kt_content, #kt_contacts_list_body","data-kt-scroll-stretch","#kt_contacts_list, #kt_contacts_main","data-kt-scroll-offset","5px",1,"scroll-y","me-n5","pe-5","h-300px","h-xl-auto"],[1,"d-flex","flex-stack","py-4"],[1,"d-flex","align-items-center"],[1,"ms-4"],["href","#",1,"fs-6","fw-bolder","text-gray-900","text-hover-primary","mb-2"],[1,"d-flex","align-items-stretch-end"],[1,"separator","separator"],["class","backit",4,"ngFor","ngForOf"],[1,"col-lg-6","col-xl-8"],["id","kt_contacts_main",1,"card","card-flush","h-lg-100"],[1,"card-body","pe-10"],[2,"text-align","center"],["alt","Emma Smith",2,"object-fit","cover","height","60px","width","60px","border-radius","100%",3,"src"],[2,"font-size","18px","margin-left","20px"],[1,"mb-0"],[1,"form-label","fs-6","fw-bolder","text-gray-700"],["name","notes","rows","3","placeholder","This is a very good result. I encourage you to work harder for a better result next term.",1,"form-control","form-control-solid",3,"value","change"],["depe",""],[1,"mt-3","btn","btn-sm","btn-primary",3,"click"],["id","kt_ecommerce_add_product_general_H","role","tab-panel",1,"tab-pane","fade"],["id","kt_footer",1,"footer","py-4","d-flex","flex-lg-column"],[1,"container-fluid","d-flex","flex-column","flex-md-row","align-items-center","justify-content-between"],[1,"text-dark","order-2","order-md-1"],[1,"text-muted","fw-bold","me-1"],["href","https://GradexCloud.com","target","_blank",1,"text-gray-800","text-hover-primary"],[3,"value"],[1,"text-gray-800","text-bold"],["href","View_user.html",1,"text-gray-800","text-hover-info","mb-1"],["href","#",1,"text-gray-600","text-hover-info","mb-1"],["id","textField","type","text","name","class","aria-label","Enter comment","placeholder","Enter comment...",1,"form-control","form-control-solid","form-control-lg",3,"value","change"],["de",""],[1,"backit"],[1,"d-flex","flex-stack","py-4",3,"click"],[1,"symbol","symbol-circle","symbol-30px","overflow-hidden"],[1,"symbol-label"],["alt","Emma Smith",1,"w-100",2,"object-fit","cover",3,"src"],[1,"fs-6","fw-bolder","text-gray-900","text-hover-primary","mb-2"],[1,"text-gray-800","text-hover-info","mb-1"],["dehe",""]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),r(9,"Form Teacher's Comment"),s()(),n(10,"li",7)(11,"a",9),r(12,"Principal's Comment"),s()(),n(13,"li",7)(14,"a",10),r(15),s()()(),n(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"div",16)(22,"div",17)(23,"div",18)(24,"label",19)(25,"span",20),r(26,"Class"),s()(),n(27,"div",21)(28,"select",22),M("ngModelChange",function(m){return A(t.currentClass,m)||(t.currentClass=m),m}),n(29,"option",23),r(30,"Select Class..."),s(),C(31,Ns,2,2,"option",24),s()()(),n(32,"div",18)(33,"label",25)(34,"span",20),r(35,"Session"),s()(),n(36,"div",21)(37,"select",26),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(38,"option",23),r(39,"Select Session..."),s(),C(40,As,2,2,"option",24),s()()()(),n(41,"div",17)(42,"div",18)(43,"label",19)(44,"span",20),r(45,"Term"),s()(),n(46,"div",21)(47,"select",27),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(48,"option",28),r(49,"Select term"),s(),n(50,"option",29),r(51,"First"),s(),n(52,"option",30),r(53,"Second"),s(),n(54,"option",31),r(55,"Third"),s(),n(56,"option",32),r(57,"Annual"),s()()()(),n(58,"div",33)(59,"div",21)(60,"button",34),v("click",function(){return t.getResultsAverageByClass()}),r(61,"Show Results"),s()()()(),n(62,"div",35)(63,"div",36)(64,"div",37)(65,"span",38),F(),n(66,"svg",39),f(67,"rect",40)(68,"path",41),s()(),P(),f(69,"input",42),s()(),n(70,"div")(71,"div",43)(72,"button",44),v("click",function(){return t.saveComments()}),n(73,"span",45),r(74,"Save Comment"),s()(),n(75,"button",46),r(76,"Batch Uploads "),s()()()()(),n(77,"div",47)(78,"table",48)(79,"thead")(80,"tr",49)(81,"th",50),r(82," S/N "),s(),n(83,"th",51),r(84,"Students Name"),s(),n(85,"th",52),r(86,"Gender"),s(),n(87,"th",53),r(88,"Average"),s(),n(89,"th",53),r(90,"Position"),s(),n(91,"th",54),r(92,"Class Teacher's Comment "),s()()(),n(93,"tbody",55),C(94,Ms,16,6,"tr",56),s()()(),n(95,"div",57)(96,"div",58)(97,"div",59)(98,"label")(99,"select",60)(100,"option",61),r(101,"10"),s(),n(102,"option",62),r(103,"25"),s(),n(104,"option",63),r(105,"50"),s(),n(106,"option",64),r(107,"100"),s()()()()(),n(108,"div",65)(109,"div",66)(110,"ul",67)(111,"li",68)(112,"a",69),f(113,"i",70),s()(),n(114,"li",71)(115,"a",72),r(116,"1"),s()(),n(117,"li",73)(118,"a",74),f(119,"i",75),s()()()()()()()()()(),n(120,"div",76)(121,"div",13)(122,"div",14)(123,"div",15)(124,"div",16)(125,"div",17)(126,"div",18)(127,"label",19)(128,"span",20),r(129,"Class"),s()(),n(130,"div",21)(131,"select",22),M("ngModelChange",function(m){return A(t.currentClass,m)||(t.currentClass=m),m}),n(132,"option",23),r(133,"Select Class..."),s(),C(134,Os,2,2,"option",24),s()()(),n(135,"div",18)(136,"label",25)(137,"span",20),r(138,"Session"),s()(),n(139,"div",21)(140,"select",26),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(141,"option",23),r(142,"Select Session..."),s(),C(143,Rs,2,2,"option",24),s()()()(),n(144,"div",17)(145,"div",18)(146,"label",19)(147,"span",20),r(148,"Term"),s()(),n(149,"div",21)(150,"select",27),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(151,"option",28),r(152,"Select term"),s(),n(153,"option",29),r(154,"First"),s(),n(155,"option",30),r(156,"Second"),s(),n(157,"option",31),r(158,"Third"),s(),n(159,"option",32),r(160,"Annual"),s()()()(),n(161,"div",33)(162,"div",21)(163,"button",34),v("click",function(){return t.getResultsAverageByClassPrincipalComment()}),r(164,"Show Results"),s()()()()()()(),n(165,"div",57)(166,"div",77)(167,"div",78)(168,"div",79)(169,"div",80)(170,"div",81)(171,"div",82)(172,"div",83)(173,"a",84),r(174,"Student Name"),s()()(),n(175,"div",85)(176,"div",83)(177,"a",84),r(178,"Average Score"),s()()()(),f(179,"div",86),C(180,Fs,14,3,"div",87),s()()()(),n(181,"div",88)(182,"div",89)(183,"div",90)(184,"div",47)(185,"div",91),f(186,"img",92),n(187,"span",93),r(188),s()(),n(189,"table",48)(190,"thead")(191,"tr",49)(192,"th",51),r(193,"Subject"),s(),n(194,"th",52),r(195,"Score"),s(),n(196,"th",53),r(197,"Grade"),s(),n(198,"th",53),r(199,"Position"),s(),n(200,"th",52),r(201," Remarks"),s()()(),n(202,"tbody",55),C(203,Ps,13,5,"tr",56),s()(),n(204,"div",94)(205,"label",95),r(206," Comment"),s(),n(207,"textarea",96,97),v("change",function(){w(d);let m=E(208);return T(t.editPrincipleComment(t.myStudentId,m.value))}),s()(),n(209,"a",98),v("click",function(){return t.savePrincipleComments()}),r(210,"Save"),s()()()()()()()(),n(211,"div",99)(212,"div",13)(213,"div",14)(214,"div",15)(215,"div",16)(216,"div",17)(217,"div",18)(218,"label",19)(219,"span",20),r(220,"Class"),s()(),n(221,"div",21)(222,"select",22),M("ngModelChange",function(m){return A(t.currentClass,m)||(t.currentClass=m),m}),n(223,"option",23),r(224,"Select Class..."),s(),C(225,Ds,2,2,"option",24),s()()(),n(226,"div",18)(227,"label",25)(228,"span",20),r(229,"Session"),s()(),n(230,"div",21)(231,"select",26),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(232,"option",23),r(233,"Select Session..."),s(),C(234,js,2,2,"option",24),s()()()(),n(235,"div",17)(236,"div",18)(237,"label",19)(238,"span",20),r(239,"Term"),s()(),n(240,"div",21)(241,"select",27),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(242,"option",28),r(243,"Select term"),s(),n(244,"option",29),r(245,"First"),s(),n(246,"option",30),r(247,"Second"),s(),n(248,"option",31),r(249,"Third"),s(),n(250,"option",32),r(251,"Annual"),s()()()(),n(252,"div",33)(253,"div",21)(254,"button",34),v("click",function(){return t.getResultsAverageHostelPortal()}),r(255,"Show Results"),s()()()(),n(256,"div",35)(257,"div",36)(258,"div",37)(259,"span",38),F(),n(260,"svg",39),f(261,"rect",40)(262,"path",41),s()(),P(),f(263,"input",42),s()(),n(264,"div")(265,"div",43)(266,"button",44),v("click",function(){return t.saveHostelComments()}),n(267,"span",45),r(268,"Save Comment"),s()(),n(269,"button",46),r(270,"Batch Uploads "),s()()()()(),n(271,"div",47)(272,"table",48)(273,"thead")(274,"tr",49)(275,"th",50),r(276," S/N "),s(),n(277,"th",51),r(278,"Students Name"),s(),n(279,"th",52),r(280,"Gender"),s(),n(281,"th",53),r(282,"Average"),s(),n(283,"th",53),r(284,"Position"),s(),n(285,"th",54),r(286,"Class Teacher's Comment "),s()()(),n(287,"tbody",55),C(288,Ls,16,6,"tr",56),s()()(),n(289,"div",57)(290,"div",58)(291,"div",59)(292,"label")(293,"select",60)(294,"option",61),r(295,"10"),s(),n(296,"option",62),r(297,"25"),s(),n(298,"option",63),r(299,"50"),s(),n(300,"option",64),r(301,"100"),s()()()()(),n(302,"div",65)(303,"div",66)(304,"ul",67)(305,"li",68)(306,"a",69),f(307,"i",70),s()(),n(308,"li",71)(309,"a",72),r(310,"1"),s()(),n(311,"li",73)(312,"a",74),f(313,"i",75),s()()()()()()()()()()()()()()()(),n(314,"div",100)(315,"div",101)(316,"div",102)(317,"span",103),r(318,"2022\xA9"),s(),n(319,"a",104),r(320,"GradexCloud"),s()()()()()}if(i&2){let d;l(15),p(t.HouseCommentHeader),l(13),N("ngModel",t.currentClass),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(47),h("ngForOf",t.resultlist),l(37),N("ngModel",t.currentClass),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(30),h("ngForOf",t.principalresultlist),l(6),h("src",t.setImg(t.myStudentPhoto),oe),l(2),p(t.myStudentName),l(15),h("ngForOf",t.studentresultlist),l(4),h("value",(d=t.principleComment)!==null&&d!==void 0?d:""),l(15),N("ngModel",t.currentClass),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(47),h("ngForOf",t.hostelresultlist)}},dependencies:[W,q,ne,se,ie,te,$,ge,X],styles:[".backit[_ngcontent-%COMP%]:hover{background-color:#8cc0ed;padding:0 2px}"]});let o=u;return o})();var Ue=K(mt());function Bs(o,u){if(o&1&&(n(0,"option",92),r(1),s()),o&2){let a=u.$implicit,e=x();h("value",a.id),l(),p(e.sheetType=="classlevel"?a.name:a.class)}}function zs(o,u){if(o&1&&(n(0,"option",92),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.sessionName)}}function Vs(o,u){o&1&&(n(0,"th",93),r(1,"Class"),s())}function Ws(o,u){if(o&1&&(n(0,"th",45),r(1),s()),o&2){let a=u.$implicit;l(),p(a.subject)}}function Gs(o,u){if(o&1&&(n(0,"td")(1,"span",96),r(2),s()()),o&2){let a=x().$implicit;l(2),p(a.studentClass)}}function Us(o,u){if(o&1&&(n(0,"td")(1,"span",96),r(2),s()()),o&2){let a=u.$implicit,e=x().$implicit,i=x();l(2),p(i.showSubjectTotal(e.subjects,a.subject))}}function Hs(o,u){if(o&1&&(n(0,"tr",94)(1,"td",95)(2,"span",96),r(3),s()(),n(4,"td",97)(5,"span",96),r(6),s()(),n(7,"td")(8,"span",96),r(9),s()(),C(10,Gs,3,1,"td",98)(11,Us,3,1,"td",99),n(12,"td")(13,"span",96),r(14),s()(),n(15,"td")(16,"span",96),r(17),s()(),n(18,"td")(19,"span",96),r(20),s()()()),o&2){let a=u.$implicit,e=u.index,i=x();l(3),p(e+1),l(3),p(a.studentName),l(3),p(a.admissionNo),l(),h("ngIf",i.sheetType=="classlevel"),l(),h("ngForOf",i.subjectlist),l(3),p(i.toNumber(a.total)),l(3),p(a.average),l(3),p(i.genk.formatPosition(i.getposition(a.average)+1))}}var ci=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.route=i,this.auth=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.resultlist=[],this.subjectlist=[],this.sheetType="class",this.genk=c,this.userName=t.currentUserValue.name,this.userImgPath=t.currentUserValue.logo,this.adminStatus=t.currentUserValue.status,this.mySchoolName=t.currentUserValue.schoolName}ngOnInit(){this.genk.topdata="Mastersheet",this.getSession(),this.getCurrentSession(),this.getResultSettingClassArm()}get classwidth(){return this.sheetType=="classlevel"?8:5}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.schoolClasses=e})}getSchoolLevel(){this.sch.getSchoolLevel().subscribe(e=>{this.schoolClasses=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getResultSettingClassArm(){this.sch.getResultSettingClassArm().subscribe(e=>{debugger;this.mastersheetClassArm=e.mastersheetClassArm,this.sheetType=this.mastersheetClassArm==2?"classlevel":"class",this.sheetType=="classlevel"?this.getSchoolLevel():this.getClassNames()})}getResults(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getMastersheetByClass(){this.currentTerm=="ANNUAL"?this.sch.getAnnualMastersheetByClassFlex(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultlist=e;let i=this.resultlist.sort((t,d)=>d.count-t.count);this.subjectlist=i[0].subjects,this.resultlist=this.resultlist.sort((t,d)=>d.average-t.average),this.currentSession=this.sessionlist.filter(t=>t.id==this.currentSessionId)[0].sessionName,this.currentClassName=this.schoolClasses.filter(t=>t.id==this.currentClass)[0].class}):this.sch.getMastersheetByClassFlex(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultlist=e;let i=this.resultlist.sort((t,d)=>d.count-t.count);this.subjectlist=i[0].subjects,this.resultlist=this.resultlist.sort((t,d)=>d.average-t.average),this.currentSession=this.sessionlist.filter(t=>t.id==this.currentSessionId)[0].sessionName,this.currentClassName=this.schoolClasses.filter(t=>t.id==this.currentClass)[0].class})}showSubjectTotal(e,i){if(e[e.findIndex(d=>d.subject==i)]){let d=e[e.findIndex(c=>c.subject==i)].totalScore;return Number(d.toFixed(2))}else return"i"}toNumber(e){return Number(e.toFixed(2))}toExcel(){let e=[];this.resultlist=this.resultlist.sort((S,b)=>b.average-S.average);for(let S=0;S<this.resultlist.length;S++){let b=new Object;if(b.SN=S+1,b.StudentName=this.resultlist[S].studentName.toUpperCase(),b.AdmissionNo=this.resultlist[S].admissionNo,this.sheetType=="classlevel"&&(b.Class=this.resultlist[S].studentClass),this.resultlist[S]?.subjects.length>0)for(let g=0;g<this.resultlist[S].subjects.length;g++)b[this.resultlist[S].subjects[g].subject]=this.resultlist[S].subjects[g].totalScore;b.Total=this.resultlist[S].total,b.Average=this.resultlist[S].average,b.Position=this.genk.formatPosition(this.getposition(this.resultlist[S].average)+1),e.push(b)}let i=Ue.utils.aoa_to_sheet([[this.mySchoolName]]);i.A1.s={font:{color:{rgb:"000000"},bold:!0,sz:25}};let t=this.currentClassName+" MASTER SHEET[ "+this.currentTerm+" TERM of "+this.currentSession+" ]";Ue.utils.sheet_add_aoa(i,[[t]],{origin:"A2"}),i.A2.s={font:{color:{rgb:"000000"},bold:!0,sz:18}},Ue.utils.sheet_add_json(i,e,{origin:"A3"}),i.A3.s={font:{color:{rgb:"000000"},bold:!0}},i.B3.s={font:{color:{rgb:"000000"},bold:!0}},i.C3.s={font:{color:{rgb:"000000"},bold:!0}};let d=[];this.sheetType=="classlevel"?(i.D3.s={font:{color:{rgb:"000000"},bold:!0}},d=["E3","F3","G3","H3","I3","J3","K3","L3","M3","N3","O3","P3","Q3","R3","S3","T3","U3","V3"]):d=["D3","E3","F3","G3","H3","I3","J3","K3","L3","M3","N3","O3","P3","Q3","R3","S3","T3","U3","V3"];for(let S of d)i[S]&&(i[S].s={font:{color:{rgb:"000000"},bold:!0},alignment:{textRotation:90}});var c=[{wch:4},{wch:35},{wch:13},{wch:this.classwidth},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5}];i["!cols"]=c;let m=Ue.utils.book_new();Ue.utils.book_append_sheet(m,i,"Students"),Ue.writeFile(m,"Mastersheet.xlsx",{compression:!0})}fitToColumn(e){debugger;return e[0].map((i,t)=>({wch:Math.max(...e.map(d=>d[t]?d[t].toString().length:0))}))}customizeExcel(e){debugger;for(let i in e){if(typeof e[i]!="object")continue;let t=Ue.utils.decode_cell(i);e[i].s={font:{name:"arial"},alignment:{vertical:"center",horizontal:"center",wrapText:"1"},border:{right:{style:"thin",color:"000000"},left:{style:"thin",color:"000000"}}},t.r==0&&(e[i].s.border.bottom={style:"thin",color:"000000"}),t.r%2&&(e[i].s.fill={patternType:"solid",fgColor:{rgb:"b2b2b2"},bgColor:{rgb:"b2b2b2"}})}}getposition(e){return this.resultlist.findIndex(i=>i.average==e)}};u.\u0275fac=function(i){return new(i||u)(_(z),_(G),_(D),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:144,vars:9,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],[1,"card-body","p-12"],["action","","id","kt_invoice_form"],[1,"d-flex","flex-column","align-items-start","flex-xxl-row"],["data-bs-toggle","tooltip","data-bs-trigger","hover",1,"d-flex","flex-center","flex-equal","fw-row","text-nowrap","order-1","order-xxl-2","me-4"],[1,"fs-2x","fw-bolder","text-gray-800"],[1,"separator","separator-dashed","my-10"],[1,"mb-0"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["name","classy","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fv-row","mb-5"],[1,"fs-6","fw-bold","form-label"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["name","clasis","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],["value","ANNUAL"],["name","sortby","aria-label","Select","data-control","select2",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value","class"],["value","classlevel"],[1,"text-center"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-end"],["type","button",1,"btn","btn-info",3,"click"],[1,"table-responsive","mb-10"],["data-kt-element","items",1,"table","g-3","gs-0","mb-0","fw-bolder","text-gray-700"],["tabl",""],[1,"border-bottom","fs-7","fw-bolder","text-gray-700","text-uppercase"],[1,"min-w-30px","w-30px","fixed-column",2,"background-color","white"],[1,"min-w-250px","w-250px","fixed-column",2,"background-color","white"],[1,"min-w-150px","w-150px","fixed-column",2,"background-color","white"],["class","min-w-100px w-100px fixed-column","style","background-color: white;",4,"ngIf"],["class","min-w-100px w-100px",4,"ngFor","ngForOf"],[1,"min-w-100px","w-100px"],[1,"min-w-100px","w-100px","text-start"],["class","border-bottom border-bottom-dashed","data-kt-element","Name",4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],["id","kt_customers_table_length",1,"dataTables_length"],["name","kt_customers_table_length","aria-controls","kt_customers_table",1,"form-select","form-select-sm","form-select-solid"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-sm-12","col-md-7","d-flex","align-items-center","justify-content-center","justify-content-md-end"],["id","kt_customers_table_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","kt_customers_table_previous",1,"paginate_button","page-item","previous","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","0","tabindex","0",1,"page-link"],[1,"previous"],[1,"paginate_button","page-item","active"],["href","#","aria-controls","kt_customers_table","data-dt-idx","1","tabindex","0",1,"page-link"],["id","kt_customers_table_next",1,"paginate_button","page-item","next","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","2","tabindex","0",1,"page-link"],[1,"next"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport","value","",1,"form-control","form-control-solid"],[1,"fv-row","mt-5","mb-7"],[1,"btn","btn-info","w-100"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit",1,"btn","btn-info"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"],[1,"min-w-100px","w-100px","fixed-column",2,"background-color","white"],["data-kt-element","Name",1,"border-bottom","border-bottom-dashed"],[1,"pe-2","fixed-column"],["type","text",1,"form-control","form-control-solid"],[1,"pe-7","fixed-column"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"div",6)(7,"div",7)(8,"span",8),r(9,"Mastersheet"),s()()(),f(10,"div",9),n(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"label",14)(16,"span",15),r(17,"Select Class"),s()(),n(18,"div",16)(19,"select",17),M("ngModelChange",function(c){return A(t.currentClass,c)||(t.currentClass=c),c}),n(20,"option",18),r(21,"Select Class..."),s(),C(22,Bs,2,2,"option",19),s()()(),n(23,"div",20)(24,"label",21)(25,"span",15),r(26,"Session"),s()(),n(27,"div",16)(28,"select",22),M("ngModelChange",function(c){return A(t.currentSessionId,c)||(t.currentSessionId=c),c}),n(29,"option",18),r(30,"Select Session..."),s(),C(31,zs,2,2,"option",19),s()()()(),n(32,"div",12)(33,"div",13)(34,"label",14)(35,"span",15),r(36,"Term"),s()(),n(37,"div",16)(38,"select",23),M("ngModelChange",function(c){return A(t.currentTerm,c)||(t.currentTerm=c),c}),n(39,"option",24),r(40,"Select term"),s(),n(41,"option",25),r(42,"First"),s(),n(43,"option",26),r(44,"Second"),s(),n(45,"option",27),r(46,"Third"),s(),n(47,"option",28),r(48,"Annual"),s()()()(),n(49,"div",13)(50,"label",21)(51,"span",15),r(52,"Sort By"),s()(),n(53,"div",16)(54,"select",29),M("ngModelChange",function(c){return A(t.sheetType,c)||(t.sheetType=c),c}),n(55,"option",30),r(56,"Position"),s(),n(57,"option",31),r(58,"Student Name"),s()()()()(),n(59,"div",32)(60,"button",33),v("click",function(){return t.getMastersheetByClass()}),r(61,"Load Mastersheet "),s()(),f(62,"br")(63,"br"),s(),n(64,"div",34)(65,"button",35),v("click",function(){return t.toExcel()}),r(66,"Download Mastersheet"),s()(),n(67,"div",36)(68,"table",37,38)(70,"thead")(71,"tr",39)(72,"th",40),r(73,"SN"),s(),n(74,"th",41),r(75,"Student Name"),s(),n(76,"th",42),r(77,"Admission No"),s(),C(78,Vs,2,0,"th",43)(79,Ws,2,1,"th",44),n(80,"th",45),r(81,"Total"),s(),n(82,"th",45),r(83,"Average"),s(),n(84,"th",46),r(85,"Position"),s()()(),n(86,"tbody"),C(87,Hs,21,8,"tr",47),s()()(),n(88,"div",48)(89,"div",49)(90,"div",50)(91,"label")(92,"select",51)(93,"option",52),r(94,"10"),s(),n(95,"option",53),r(96,"25"),s(),n(97,"option",54),r(98,"50"),s(),n(99,"option",55),r(100,"100"),s()()()()(),n(101,"div",56)(102,"div",57)(103,"ul",58)(104,"li",59)(105,"a",60),f(106,"i",61),s()(),n(107,"li",62)(108,"a",63),r(109,"1"),s()(),n(110,"li",64)(111,"a",65),f(112,"i",66),s()()()()()()()()()(),n(113,"div",67)(114,"div",68)(115,"div",69)(116,"form",70)(117,"div",71)(118,"h2",72),r(119,"Upload Result"),s(),n(120,"div",73)(121,"span",74),F(),n(122,"svg",75),f(123,"rect",76)(124,"rect",77),s()()()(),P(),n(125,"div",78)(126,"div",79)(127,"div",80)(128,"label",81),r(129,"Upload Template"),s(),f(130,"i",82)(131,"input",83),s(),n(132,"div",84)(133,"button",85),r(134,"download Template Document"),s()()()(),n(135,"div",86)(136,"button",87),r(137,"Discard"),s(),n(138,"button",88)(139,"span",89),r(140,"Submit"),s(),n(141,"span",90),r(142,"Please wait... "),f(143,"span",91),s()()()()()()()()()()),i&2&&(l(19),N("ngModel",t.currentClass),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(16),N("ngModel",t.sheetType),l(24),h("ngIf",t.sheetType=="classlevel"),l(),h("ngForOf",t.subjectlist),l(8),h("ngForOf",t.resultlist))},dependencies:[W,he,q,ne,se,ie,te,$,ge,X],styles:[`.table[_ngcontent-%COMP%] {
                                            width: auto;
                                        }

                                        .table-responsive[_ngcontent-%COMP%] {
                                            overflow-x: auto;
                                            max-width: 100%;
                                        }

                                        .fixed-column[_ngcontent-%COMP%] {
                                            position: sticky;
                                            left: 0;
                                            background-color: #fff;
                                            

                                            z-index: 1;
                                        }`]});let o=u;return o})();var nt=K(Te());function Ys(o,u){if(o&1){let a=k();n(0,"tr")(1,"td"),r(2),s(),n(3,"td")(4,"a",54),r(5),s()(),n(6,"td")(7,"a",55),r(8),s()(),n(9,"td"),r(10),s(),n(11,"td"),r(12),Ie(13,"date"),s(),n(14,"td",56)(15,"button",57),v("click",function(){let t=w(a).$implicit,d=x();return T(d.deletePublishByLevel(t.id))}),r(16,"Unpublish"),s()()()}if(o&2){let a=u.$implicit,e=u.index;l(2),I(" ",e+1," "),l(3),p(a.session),l(3),p(a.term),l(2),I(" ",a.classlevel," "),l(2),p(Yt(13,5,a.created,"MMM d, y"))}}function $s(o,u){if(o&1&&(n(0,"option",58),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.sessionName)}}function Xs(o,u){if(o&1&&(n(0,"option",58),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.name)}}var mi=(()=>{let u=class u{constructor(e,i,t,d){this.router=e,this.auth=i,this.sch=t,this.gen=d,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClassLevel=[],this.sessionlist=[],this.destroy=new Ee,this.publishedResult=[],this.genk=d,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Publish Result",this.getPublishedResult(),this.getClassLevels(),this.getSession(),this.getCurrentSession()}getClassLevels(){this.sch.getClassLevels().subscribe(e=>{this.schoolClassLevel=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getPublishedResult(){this.sch.getPublishedResult().subscribe(e=>{this.publishedResult=e})}createPublishByLevel(){debugger;this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName;let e=this.schoolClassLevel.filter(i=>i.id==this.currentLevelId)[0];this.currentLevel=this.schoolClassLevel.filter(i=>i.id==this.currentLevelId)[0].name,nt.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{nt.default.showLoading(),this.sch.createPublishByLevel(this.currentLevelId.toString(),this.currentLevel,this.currentSessionId.toString(),this.currentSession,this.currentTerm).pipe(pe(this.destroy)).subscribe(i=>{this.getPublishedResult(),nt.default.close()})}}).then(i=>{nt.default.fire({icon:"success",title:"Result Entry updated successfully!.",showConfirmButton:!1,timer:2e3})})}deletePublishByLevel(e){nt.default.fire({title:"Do you want to unpublish this result?",showCancelButton:!0,confirmButtonText:"Yes, Delete"}).then(i=>{i.isConfirmed&&this.sch.deletePublishByLevel(e.toString()).subscribe(t=>{this.getPublishedResult(),nt.default.fire("Data deleted","","success")})})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["app-dashboard"]],inputs:{header:"header"},decls:85,vars:6,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-customer-table-filter","search","placeholder","Search",1,"form-control","form-control-solid","w-250px","ps-15"],[1,"card-toolbar"],["data-kt-customer-table-toolbar","base",1,"d-flex","justify-content-end"],["type","button","data-bs-toggle","modal","data-bs-target","#kt_modal_add_customer",1,"btn","btn-info"],[1,"card-body","pt-0"],["id","kt_customers_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"w-50px","pe-2"],[1,"min-w-125px"],[1,"min-w-100px"],[1,"text-end","min-w-70px"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"d-flex","flex-column","mb-7","fv-row"],[1,"fs-6","fw-bold","mb-2"],[1,"required"],[1,"w-100"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","classy","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["name","clasis","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit",1,"btn","btn-info",3,"click"],[1,"indicator-label"],["href","#",1,"text-gray-800","text-hover-info","mb-1"],["href","#",1,"text-gray-600","text-hover-info","mb-1"],[1,"text-end"],["type","reset",1,"btn","btn-sm","btn-danger","btn-active-light-danger","me-3",3,"click"],[3,"value"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"span",8),F(),n(9,"svg",9),f(10,"rect",10)(11,"path",11),s()(),P(),f(12,"input",12),s()(),n(13,"div",13)(14,"div",14)(15,"button",15),r(16,"Publish Result"),s()()()(),n(17,"div",16)(18,"table",17)(19,"thead")(20,"tr",18)(21,"th",19),r(22," S/N "),s(),n(23,"th",20),r(24,"Session"),s(),n(25,"th",21),r(26,"Term"),s(),n(27,"th",20),r(28,"Class"),s(),n(29,"th",20),r(30,"Date Publish"),s(),n(31,"th",22),r(32,"Actions"),s()()(),n(33,"tbody",23),C(34,Ys,17,8,"tr",24),s()()()(),n(35,"div",25)(36,"div",26)(37,"div",27)(38,"form",28)(39,"div",29)(40,"h2",30),r(41,"Publish Results"),s(),n(42,"div",31)(43,"span",32),F(),n(44,"svg",9),f(45,"rect",33)(46,"rect",34),s()()()(),P(),n(47,"div",35)(48,"div",36)(49,"div",37)(50,"label",38)(51,"span",39),r(52,"Session "),s(),n(53,"div",40)(54,"select",41),M("ngModelChange",function(c){return A(t.currentSessionId,c)||(t.currentSessionId=c),c}),n(55,"option",42),r(56,"Select Session..."),s(),C(57,$s,2,2,"option",43),s()()()(),n(58,"div",37)(59,"label",38)(60,"span",39),r(61,"Class"),s()(),n(62,"select",44),M("ngModelChange",function(c){return A(t.currentLevelId,c)||(t.currentLevelId=c),c}),n(63,"option",42),r(64,"Select Class..."),s(),C(65,Xs,2,2,"option",43),s()(),n(66,"div",37)(67,"label",38)(68,"span",39),r(69,"Term"),s()(),n(70,"select",45),M("ngModelChange",function(c){return A(t.currentTerm,c)||(t.currentTerm=c),c}),n(71,"option",46),r(72,"Select term"),s(),n(73,"option",47),r(74,"First"),s(),n(75,"option",48),r(76,"Second"),s(),n(77,"option",49),r(78,"Third"),s()()()()(),n(79,"div",50)(80,"button",51),r(81,"Discard"),s(),n(82,"button",52),v("click",function(){return t.createPublishByLevel()}),n(83,"span",53),r(84,"Publish"),s()()()()()()()()()()()),i&2&&(l(34),h("ngForOf",t.publishedResult),l(20),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(5),N("ngModel",t.currentLevelId),l(3),h("ngForOf",t.schoolClassLevel),l(5),N("ngModel",t.currentTerm))},dependencies:[W,q,ne,se,ie,te,$,ge,X,Re],encapsulation:2});let o=u;return o})();var ut=K(mt());function qs(o,u){if(o&1&&(n(0,"option",72),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function Ks(o,u){if(o&1&&(n(0,"option",72),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.sessionName)}}function Js(o,u){if(o&1&&(n(0,"option",72),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.subjects)}}function Zs(o,u){if(o&1&&(n(0,"tr",73)(1,"td",74)(2,"span",75),r(3),s()(),n(4,"td",74)(5,"span",76),r(6),s()(),n(7,"td")(8,"span",76),r(9),s()(),n(10,"td",77)(11,"a",78),r(12),s()(),n(13,"td",77)(14,"span",78),r(15),s()(),n(16,"td",77)(17,"span",78),r(18),s()(),n(19,"td",77)(20,"span",78),r(21),s()()()),o&2){let a=u.$implicit,e=u.index,i=x();l(3),p(e+1),l(3),p(a.studentName),l(3),p(a.admissionNo),l(3),I("",i.currentSubjectName," "),l(3),p(a.totalScore),l(3),p(a.grade),l(3),p(i.genk.formatPosition(i.getposition(a==null?null:a.totalScore)+1))}}var ui=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.route=i,this.auth=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.resultlist=[],this.classSubjects=[],this.genk=c,this.userName=t.currentUserValue.name,this.userImgPath=t.currentUserValue.logo,this.adminStatus=t.currentUserValue.status}ngOnInit(){this.genk.topdata="Subject Result",this.getClassNames(),this.getSession(),this.getCurrentSession()}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.schoolClasses=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getResults(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getResultsAverageByClass(){this.sch.getResultsAverageByClass(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultlist=e,this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName})}getposition(e){return this.resultlist.findIndex(i=>i.totalScore==e)}getClassSubjects(){this.sch.getSubjectByClass(this.currentClass.toString()).subscribe(e=>{this.classSubjects=e})}setClass(e){this.currentClass=e.toString(),this.getClassSubjects()}getSubjectResultsByClass(){this.sch.getStudentResultsByClass(this.currentClass,this.currentSessionId.toString(),this.currentTerm,this.currentSubjectId.toString()).subscribe(e=>{this.resultlist=e,this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName,this.currentSubjectName=this.classSubjects.filter(i=>i.id==this.currentSubjectId)[0].subjects,this.currentClassName=this.schoolClasses.filter(i=>i.id==this.currentClass)[0].class})}exportTable(){var e=document.getElementById("subjecttable");let i=ut.utils.table_to_sheet(e);var t=[{wch:5},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20},{wch:20}];i["!cols"]=t;let d=ut.utils.book_new();ut.utils.book_append_sheet(d,i,"Subject-Result"),ut.writeFile(d,"Subject-Result.xlsx",{compression:!0})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(G),_(D),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:123,vars:8,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],[1,"card-body","p-12"],["action","","id","kt_invoice_form"],[1,"mb-0"],[1,"row"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label"],[1,"required"],[1,"w-100"],["name","classy","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"value","change"],["sess",""],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["name","class","aria-label","Select subject","data-control","select2","data-placeholder","Select subject..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["name","clasis","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],[1,"w-100","text-center"],["type","button",1,"mt-8","w-50","btn","btn-info",3,"click"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-customer-table-filter","search","placeholder","Search ",1,"form-control","form-control-solid","w-250px","ps-15",3,"keyup"],["myInput",""],[1,"card-toolbar"],[1,"text-end"],["type","button",1,"btn","btn-info",3,"click"],[1,"table-responsive","mb-10"],["id","subjecttable","data-kt-element","items",1,"table","g-5","gs-0","mb-0","fs-4","text-gray-700"],[1,"border-bottom","fs-7","fw-bolder","text-gray-700","text-uppercase"],[1,"min-w-10px","w-10px","fixed-column",2,"background-color","white"],[1,"min-w-250px","w-250px","fixed-column",2,"background-color","white"],[1,"min-w-150px","w-150px"],[1,"min-w-200px","w-200px","text-center"],[1,"min-w-150px","w-150px","text-center"],["myTbody",""],["class","border-bottom border-bottom-dashed","data-kt-element","Name",4,"ngFor","ngForOf"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],["id","kt_customers_table_length",1,"dataTables_length"],["name","kt_customers_table_length","aria-controls","kt_customers_table",1,"form-select","form-select-sm","form-select-solid"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-sm-12","col-md-7","d-flex","align-items-center","justify-content-center","justify-content-md-end"],["id","kt_customers_table_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","kt_customers_table_previous",1,"paginate_button","page-item","previous","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","0","tabindex","0",1,"page-link"],[1,"previous"],[1,"paginate_button","page-item","active"],["href","#","aria-controls","kt_customers_table","data-dt-idx","1","tabindex","0",1,"page-link"],["id","kt_customers_table_next",1,"paginate_button","page-item","next","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","2","tabindex","0",1,"page-link"],[1,"next"],["id","kt_footer",1,"footer","py-4","d-flex","flex-lg-column"],[1,"container-fluid","d-flex","flex-column","flex-md-row","align-items-center","justify-content-between"],[1,"text-dark","order-2","order-md-1"],[1,"text-muted","fw-bold","me-1"],["href","https://GradexCloud.com","target","_blank",1,"text-gray-800","text-hover-info"],[3,"value"],["data-kt-element","Name",1,"border-bottom","border-bottom-dashed"],[1,"pe-7","fixed-column",2,"background-color","white"],[1,"mb-1"],[1,"text-hover-info","mb-1"],[1,"text-center"],[1,"text-gray-800","text-hover-info","mb-1"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"label",11)(12,"span",12),r(13,"Class Name"),s()(),n(14,"div",13)(15,"select",14,15),v("change",function(){w(d);let m=E(16);return T(t.setClass(m.value))}),n(17,"option",16),r(18,"Select Class..."),s(),C(19,qs,2,2,"option",17),s()()(),n(20,"div",10)(21,"label",11)(22,"span",12),r(23,"Session"),s()(),n(24,"div",13)(25,"select",18),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(26,"option",16),r(27,"Select Session..."),s(),C(28,Ks,2,2,"option",17),s()()()(),n(29,"div",9)(30,"div",10)(31,"label",11)(32,"span",12),r(33,"Subject"),s()(),n(34,"div",13)(35,"select",19),M("ngModelChange",function(m){return A(t.currentSubjectId,m)||(t.currentSubjectId=m),m}),n(36,"option",16),r(37,"Select Subject..."),s(),C(38,Js,2,2,"option",17),s()()(),n(39,"div",10)(40,"label",11)(41,"span",12),r(42,"Term"),s()(),n(43,"div",13)(44,"select",20),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(45,"option",21),r(46,"Select term"),s(),n(47,"option",22),r(48,"First"),s(),n(49,"option",23),r(50,"Second"),s(),n(51,"option",24),r(52,"Third"),s()()()()(),n(53,"div",10)(54,"div",25)(55,"button",26),v("click",function(){return t.getSubjectResultsByClass()}),r(56,"Show Students"),s()()(),n(57,"div",27)(58,"div",28)(59,"div",29)(60,"span",30),F(),n(61,"svg",31),f(62,"rect",32)(63,"path",33),s()(),P(),n(64,"input",34,35),v("keyup",function(){w(d);let m=E(65),S=E(89);return T(t.genk.searchTable(m,S))}),s()()(),n(66,"div",36)(67,"div",37)(68,"button",38),v("click",function(){return t.exportTable()}),r(69,"Export"),s()()()()(),n(70,"div",39)(71,"table",40)(72,"thead")(73,"tr",41)(74,"th",42),r(75,"S/N"),s(),n(76,"th",43),r(77,"Student Name"),s(),n(78,"th",44),r(79,"Admission No"),s(),n(80,"th",45),r(81,"Subject"),s(),n(82,"th",46),r(83,"Total Score"),s(),n(84,"th",46),r(85,"Grade"),s(),n(86,"th",46),r(87,"Position"),s()()(),n(88,"tbody",null,47),C(90,Zs,22,7,"tr",48),s()()(),n(91,"div",8)(92,"div",49)(93,"div",50)(94,"label")(95,"select",51)(96,"option",52),r(97,"10"),s(),n(98,"option",53),r(99,"25"),s(),n(100,"option",54),r(101,"50"),s(),n(102,"option",55),r(103,"100"),s()()()()(),n(104,"div",56)(105,"div",57)(106,"ul",58)(107,"li",59)(108,"a",60),f(109,"i",61),s()(),n(110,"li",62)(111,"a",63),r(112,"1"),s()(),n(113,"li",64)(114,"a",65),f(115,"i",66),s()()()()()()()()()()()()(),n(116,"div",67)(117,"div",68)(118,"div",69)(119,"span",70),r(120,"2022\xA9"),s(),n(121,"a",71),r(122,"gradeX-Cloud"),s()()()()()}i&2&&(l(15),h("value",t.currentClass),l(4),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentSubjectId),l(3),h("ngForOf",t.classSubjects),l(6),N("ngModel",t.currentTerm),l(46),h("ngForOf",t.resultlist))},dependencies:[W,q,ne,se,ie,te,$,ge,X],styles:[`.table[_ngcontent-%COMP%] {
                                                width: auto;
                                            }

                                            .table-responsive[_ngcontent-%COMP%] {
                                                overflow-x: auto;
                                                max-width: 100%;
                                            }

                                            .fixed-column[_ngcontent-%COMP%] {
                                                position: sticky;
                                                left: 0;
                                                background-color: #fff;
                                                

                                                z-index: 1;
                                            }`]});let o=u;return o})();var Dt=K(Te());function Qs(o,u){if(o&1&&(n(0,"option",59),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function er(o,u){if(o&1&&(n(0,"option",59),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.sessionName)}}function tr(o,u){if(o&1){let a=k();n(0,"td",65)(1,"button",66),v("click",function(){w(a);let i=x().$implicit,t=x();return T(t.selectedStudent=i)}),r(2,"Block"),s()()}}function ir(o,u){if(o&1){let a=k();n(0,"td",65)(1,"button",67),v("click",function(){w(a);let i=x().$implicit,t=x();return T(t.unblockStudent(i.id))}),r(2,"Unblock"),s()()}}function nr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit;l(),p(a.reasonBlocked)}}function sr(o,u){if(o&1&&(n(0,"tr")(1,"td"),r(2),s(),n(3,"td")(4,"a",60),r(5),s()(),n(6,"td")(7,"a",61),r(8),s()(),n(9,"td",62),r(10),s(),C(11,tr,3,0,"td",63)(12,ir,3,0,"td",63)(13,nr,2,1,"td",64),s()),o&2){let a=u.$implicit,e=u.index,i;l(2),p(e+1),l(3),p((((i=a.surname)!==null&&i!==void 0?i:"")+" "+((i=a.middleName)!==null&&i!==void 0?i:"")+" "+((i=a.firstName)!==null&&i!==void 0?i:"")).trim()),l(3),p(a.sex),l(2),p(a.admissionNo),l(),h("ngIf",!a.isResultBlocked),l(),h("ngIf",a.isResultBlocked),l(),h("ngIf",a.isResultBlocked)}}function rr(o,u){if(o&1){let a=k();n(0,"div",68)(1,"label",69),r(2,"Other Reason"),s(),n(3,"textarea",70),M("ngModelChange",function(i){w(a);let t=x();return A(t.reason,i)||(t.reason=i),T(i)}),s()()}if(o&2){let a=x();l(3),N("ngModel",a.reason)}}var pi=(()=>{let u=class u{constructor(e,i,t,d){this.router=e,this.auth=i,this.sch=t,this.gen=d,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.students=[],this.isOther=!1,this.genk=d,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Block Result",this.getClassNames(),this.getSession(),this.getCurrentSession()}get setImg(){return this.userImgPath&&this.userImgPath.length>0?this.genk.imgurl+this.userImgPath:this.genk.defaultImg}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.schoolClasses=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getStudents(){this.sch.getStudentByClass(this.currentClassId).subscribe(e=>{this.students=e})}blockStudent(e){this.sch.blockStudentResult(e.toString(),this.reason).subscribe(i=>{this.students=i,this.getStudents(),this.isOther=!1,Dt.default.fire({icon:"success",title:"Student result blocked successfully!.",showConfirmButton:!1,timer:2e3})})}unblockStudent(e){this.sch.unblockStudentResult(e.toString()).subscribe(i=>{this.students=i,this.getStudents(),Dt.default.fire({icon:"success",title:"Student result unblocked successfully!.",showConfirmButton:!1,timer:2e3})})}changeReason(e){e=="Others"?this.isOther=!0:this.reason=e}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:114,vars:8,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],[1,"card-body","p-12"],["action","","id","kt_invoice_form"],[1,"mb-0"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["name","classy","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fs-6","fw-bold","form-label"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["name","clasis","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],[1,"fv-row","mb-5",2,"margin-top","60px"],[1,"w-100","btn","btn-primary",2,"padding","10px",3,"click"],[1,"table-responsive","mb-10"],["id","kt_customers_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"min-w-175px","mr-10"],[1,"min-w-75px"],[1,"min-w-50px"],[1,"text-start","min-w-70px"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],[1,"scroll-y","me-n7","pe-7"],[1,"fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Reason why student result is blocked",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["id","reason-select","name","reason","data-control","select2","data-placeholder","Select ...",1,"form-select","form-select-solid","fw-bolder",3,"value","change"],["reas",""],["disabled",""],["class","fv-row mt-5 mb-3","id","other-reason-container",4,"ngIf"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit",1,"btn","btn-info",3,"click"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"],["href","View_user.html",1,"text-gray-800","text-hover-info","mb-1"],[1,"text-gray-600","text-hover-info","mb-1"],["data-filter","mastercard"],["class","text-start",4,"ngIf"],[4,"ngIf"],[1,"text-start"],["data-bs-toggle","modal","data-bs-target","#kt_modal_add_customer",1,"btn","btn-sm","btn-light-danger","btn-active-danger","me-3",3,"click"],[1,"btn","btn-sm","btn-light-primary","btn-active-primary","me-3",3,"click"],["id","other-reason-container",1,"fv-row","mt-5","mb-3"],[1,"fs-5","fw-bold","form-label","mb-2"],["rows","3","name","target_details","placeholder","Type  Details","spellcheck","false",1,"form-control","form-control-solid",3,"ngModel","ngModelChange"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"label",10)(11,"span",11),r(12,"Select Class"),s()(),n(13,"div",12)(14,"select",13),M("ngModelChange",function(m){return A(t.currentClassId,m)||(t.currentClassId=m),m}),n(15,"option",14),r(16,"Select Class..."),s(),C(17,Qs,2,2,"option",15),s()()(),n(18,"div",9)(19,"label",16)(20,"span",11),r(21,"Session"),s()(),n(22,"div",12)(23,"select",17),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(24,"option",14),r(25,"Select Session..."),s(),C(26,er,2,2,"option",15),s()()()(),n(27,"div",8)(28,"div",9)(29,"label",10)(30,"span",11),r(31,"Term"),s()(),n(32,"div",12)(33,"select",18),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(34,"option",19),r(35,"Select term"),s(),n(36,"option",20),r(37,"First"),s(),n(38,"option",21),r(39,"Second"),s(),n(40,"option",22),r(41,"Third"),s()()()(),n(42,"div",23)(43,"div",12)(44,"button",24),v("click",function(){return t.getStudents()}),r(45,"Show Results"),s()()()()(),n(46,"div",25)(47,"table",26)(48,"thead")(49,"tr",27)(50,"th"),r(51,"S/N"),s(),n(52,"th",28),r(53,"Student Name"),s(),n(54,"th",29),r(55,"Gender"),s(),n(56,"th",30),r(57,"Admission Number"),s(),n(58,"th",31),r(59,"Actions"),s(),n(60,"th",30),r(61,"Reason"),s()()(),n(62,"tbody",32),C(63,sr,14,7,"tr",33),s()()()()()()()()()(),n(64,"div",34)(65,"div",35)(66,"div",36)(67,"form",37)(68,"div",38)(69,"h2",39),r(70,"Reason"),s(),n(71,"div",40)(72,"span",41),F(),n(73,"svg",42),f(74,"rect",43)(75,"rect",44),s()()()(),P(),n(76,"div",45)(77,"div",46)(78,"label",47)(79,"span",11),r(80,"Reason"),s(),f(81,"i",48),s(),n(82,"select",49,50),v("change",function(){w(d);let m=E(83);return T(t.changeReason(m.value))}),n(84,"option",51),r(85,"Select ..."),s(),n(86,"option"),r(87,"Outstanding Fees"),s(),n(88,"option"),r(89,"Disciplinary Issues"),s(),n(90,"option"),r(91,"Incomplete Assessments"),s(),n(92,"option"),r(93,"Exam Malpractice"),s(),n(94,"option"),r(95,"Incorrect Personal Information"),s(),n(96,"option"),r(97,"Violation of Hostel Rules"),s(),n(98,"option"),r(99,"Unmet Attendance Requirements"),s(),n(100,"option"),r(101,"Incomplete Registration"),s(),n(102,"option"),r(103,"Others"),s()(),C(104,rr,4,1,"div",52),s()(),n(105,"div",53)(106,"button",54),r(107,"Discard"),s(),n(108,"button",55),v("click",function(){return t.blockStudent(t.selectedStudent.id)}),n(109,"span",56),r(110,"Submit"),s(),n(111,"span",57),r(112,"Please wait... "),f(113,"span",58),s()()()()()()()}i&2&&(l(14),N("ngModel",t.currentClassId),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(30),h("ngForOf",t.students),l(19),h("value",t.reason),l(22),h("ngIf",t.isOther))},dependencies:[W,he,q,ne,se,Zt,ie,te,$,ge,X],encapsulation:2});let o=u;return o})();ke();var st=K(Pe());function lr(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA1?a.caSetupData.CA1:"CA1")}}function or(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA2?a.caSetupData.CA2:"CA2")}}function ar(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA3?a.caSetupData.CA3:"CA3")}}function dr(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA4?a.caSetupData.CA4:"CA4")}}function cr(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA5?a.caSetupData.CA5:"CA5")}}function mr(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA6?a.caSetupData.CA6:"CA6")}}function ur(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA7?a.caSetupData.CA7:"CA7")}}function pr(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA8?a.caSetupData.CA8:"CA8")}}function hr(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA9?a.caSetupData.CA9:"CA9")}}function gr(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA10?a.caSetupData.CA10:"CA10")}}function Sr(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA11?a.caSetupData.CA11:"CA11")}}function fr(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA12?a.caSetupData.CA12:"CA12")}}function xr(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA13?a.caSetupData.CA13:"CA13")}}function br(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA14?a.caSetupData.CA14:"CA14")}}function _r(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA15?a.caSetupData.CA15:"CA15")}}function Cr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca1)!==null&&e!==void 0?e:"")}}function vr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca2)!==null&&e!==void 0?e:"")}}function yr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca3)!==null&&e!==void 0?e:"")}}function Er(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca4)!==null&&e!==void 0?e:"")}}function Ir(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca5)!==null&&e!==void 0?e:"")}}function wr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca6)!==null&&e!==void 0?e:"")}}function Tr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca7)!==null&&e!==void 0?e:"")}}function kr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca8)!==null&&e!==void 0?e:"")}}function Nr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca9)!==null&&e!==void 0?e:"")}}function Ar(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca10)!==null&&e!==void 0?e:"")}}function Mr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca11)!==null&&e!==void 0?e:"")}}function Or(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca12)!==null&&e!==void 0?e:"")}}function Rr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca13)!==null&&e!==void 0?e:"")}}function Fr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca14)!==null&&e!==void 0?e:"")}}function Pr(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca15)!==null&&e!==void 0?e:"")}}var xt=o=>({color:o});function Dr(o,u){if(o&1&&(n(0,"tr",49)(1,"td"),r(2),s(),C(3,Cr,2,1,"td",23)(4,vr,2,1,"td",23)(5,yr,2,1,"td",23)(6,Er,2,1,"td",23)(7,Ir,2,1,"td",23)(8,wr,2,1,"td",23)(9,Tr,2,1,"td",23)(10,kr,2,1,"td",23)(11,Nr,2,1,"td",23)(12,Ar,2,1,"td",23)(13,Mr,2,1,"td",23)(14,Or,2,1,"td",23)(15,Rr,2,1,"td",23)(16,Fr,2,1,"td",23)(17,Pr,2,1,"td",23),n(18,"td",50),r(19),s(),n(20,"td",50),r(21),s(),n(22,"td",50),r(23),s(),n(24,"td",50),r(25),s(),n(26,"td"),r(27),s(),n(28,"td"),r(29),s(),n(30,"td"),r(31),s(),n(32,"td"),r(33),s()()),o&2){let a=u.$implicit,e=x(),i,t,d,c,m,S,b,g;l(2),p(a.subject),l(),h("ngIf",e.caSetupData.CA1),l(),h("ngIf",e.caSetupData.CA2),l(),h("ngIf",e.caSetupData.CA3),l(),h("ngIf",e.caSetupData.CA4),l(),h("ngIf",e.caSetupData.CA5),l(),h("ngIf",e.caSetupData.CA6),l(),h("ngIf",e.caSetupData.CA7),l(),h("ngIf",e.caSetupData.CA8),l(),h("ngIf",e.caSetupData.CA9),l(),h("ngIf",e.caSetupData.CA10),l(),h("ngIf",e.caSetupData.CA11),l(),h("ngIf",e.caSetupData.CA12),l(),h("ngIf",e.caSetupData.CA13),l(),h("ngIf",e.caSetupData.CA14),l(),h("ngIf",e.caSetupData.CA15),l(),h("ngStyle",J(28,xt,e.getScoreColor(a.exam==null?null:a.exam.toFixed(1),60))),l(),I(" ",(i=a.exam==null?null:a.exam.toFixed(1))!==null&&i!==void 0?i:"",""),l(),h("ngStyle",J(30,xt,e.getScoreColor(a.totalScore==null?null:a.totalScore.toFixed(1),100))),l(),I(" ",(t=a.totalScore==null?null:a.totalScore.toFixed(1))!==null&&t!==void 0?t:"",""),l(),h("ngStyle",J(32,xt,e.gradeColor(a.grade))),l(),p((d=a.grade)!==null&&d!==void 0?d:""),l(),h("ngStyle",J(34,xt,e.getRemarkColor(a.remark))),l(),I("",(c=a.remark)!==null&&c!==void 0?c:""," "),l(2),p((m=a.position)!==null&&m!==void 0?m:""),l(2),p((S=a.lowestScore==null?null:a.lowestScore.toFixed(1))!==null&&S!==void 0?S:""),l(2),p((b=a.highestScore==null?null:a.highestScore.toFixed(1))!==null&&b!==void 0?b:""),l(2),p((g=a.average==null?null:a.average.toFixed(1))!==null&&g!==void 0?g:"")}}function jr(o,u){if(o&1&&(n(0,"tr",51)(1,"td"),r(2),s(),n(3,"td"),r(4),s()()),o&2){let a=u.$implicit;l(2),p(a.skill),l(2),p(a.score)}}function Lr(o,u){if(o&1&&(n(0,"tr",51)(1,"td"),r(2),s(),n(3,"td"),r(4),s()()),o&2){let a=u.$implicit;l(2),p(a.skill),l(2),p(a.score)}}function Br(o,u){if(o&1&&(n(0,"tr")(1,"td",52),r(2),s(),n(3,"td"),r(4),s(),n(5,"td"),r(6),s(),n(7,"td"),r(8),s(),n(9,"td"),r(10),s()()),o&2){let a=u.$implicit,e=x();l(),h("ngStyle",J(6,xt,a.color.toString())),l(),p(a.color),l(2),p(a.grade),l(2),I("",a.begLimit+" - "+e.floorNum(a.endLimit)," "),l(2),p(e.over60Num(a.begLimit)+" - "+e.over60Num(a.endLimit)),l(2),p(e.over40Num(a.begLimit)+" - "+e.over40Num(a.endLimit))}}var hi=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.activeRoute=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.gradeScalelist=[],this.psycomotorlist=[],this.psycomotorlist2=[],this.grademinimumlist=[],this.grademinimumlistOver60=[],this.grademinimumlistOver40=[],this.mySchoolClasses=[],this.gradescaletextlist=[],this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Dashboard",this.studentId=this.activeRoute.snapshot.params.id,this.activeRoute.queryParams.subscribe(e=>{this.currentTerm=e.term,this.currentSessionId=e.currentSessionId,this.currentSession=e.currentSession,this.currentClassId=e.classId,this.average=e.average,this.position=e.position}),this.getSchool(),this.getStudent(),this.getStudentTotal(),this.getClassNames(),this.getResultsByStudent(),this.getCaSetupByClass(),this.getGradeScaleByClass(),this.getPsycomotorByStudent(),this.getStudentResultComment(),this.getStudentBMI(),this.getNextTerm()}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getSchool(){this.sch.getSchoolData().subscribe(e=>{this.myschool=e})}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.mySchoolClasses=e,this.getNoInClass()})}getStudent(){this.sch.getStudentById(this.studentId.toString()).subscribe(e=>H(this,null,function*(){this.studentobj=e,yield this.addLogo(),yield this.addSignature()}))}getStudentTotal(){this.sch.getStudentTermTotal(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.studentTotal=e.total})}getNoInClass(){this.sch.getNoInClassBySession(this.currentClassId.toString(),this.currentSessionId,this.currentTerm).subscribe(e=>{this.noInClass=e.count,this.className=this.mySchoolClasses.filter(i=>i.id==Number(this.currentClassId))[0].class})}getNextTerm(){this.sch.getNextTerm(this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{e&&(this.nextResumptionDate=e.date)})}getStudentBMI(){this.sch.getStudentBMI(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.bmi=e,console.log(this.bmi)})}getStudentEstimatedAttendance(){this.sch.getStudentEstimatedAttendance(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.estAttendance=e,console.log(this.bmi)})}getResultsByStudent(){this.sch.getResultsByStudent(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultlist=e})}getStudentResultComment(){this.sch.getStudentResultComment(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e,this.gradeScalelist.forEach(i=>{i.color=this.gradeColor(i.grade)});debugger;this.grademinimumlist.push({color:"Green",remark:this.gradeScalelist.filter(i=>i.color=="Green")[this.gradeScalelist.filter(i=>i.color=="Green").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Green")[this.gradeScalelist.filter(i=>i.color=="Green").length-1].begLimit}),this.grademinimumlist.push({color:"Black",remark:this.gradeScalelist.filter(i=>i.color=="Black")[this.gradeScalelist.filter(i=>i.color=="Black").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Black")[this.gradeScalelist.filter(i=>i.color=="Black").length-1].begLimit}),this.grademinimumlist.push({color:"Blue",remark:this.gradeScalelist.filter(i=>i.color=="Blue")[this.gradeScalelist.filter(i=>i.color=="Blue").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Blue")[this.gradeScalelist.filter(i=>i.color=="Blue").length-1].begLimit}),this.grademinimumlist.push({color:"Red",remark:this.gradeScalelist.filter(i=>i.color=="Red")[this.gradeScalelist.filter(i=>i.color=="Red").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Red")[this.gradeScalelist.filter(i=>i.color=="Red").length-1].begLimit}),this.grademinimumlistOver60.push({color:"Green",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Green")[this.gradeScalelist.filter(i=>i.color=="Green").length-1].begLimit)}),this.grademinimumlistOver60.push({color:"Black",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Black")[this.gradeScalelist.filter(i=>i.color=="Black").length-1].begLimit)}),this.grademinimumlistOver60.push({color:"Blue",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Blue")[this.gradeScalelist.filter(i=>i.color=="Blue").length-1].begLimit)}),this.grademinimumlistOver60.push({color:"Red",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Red")[this.gradeScalelist.filter(i=>i.color=="Red").length-1].begLimit)}),console.log(this.grademinimumlist)})}gradeColor(e){return e?.includes("A")||e?.includes("B")?"Black":e?.includes("C")?"Green":e?.includes("D")||e?.includes("E")?"Blue":e?.includes("F")?"Red":"Black"}getPsycomotorByStudent(){this.sch.getPsycomotorByStudent(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.psycomotorlist=e.slice(0,Math.round(e.length/2)),this.psycomotorlist2=e.slice(Math.round(e.length/2),e.length)})}convertToPDF(e){0 .toPrecision(1);var t=new ae("p","pt","letter"),d=t.internal.pageSize.height||t.internal.pageSize.getHeight(),c=t.internal.pageSize.width||t.internal.pageSize.getWidth();t.setFont("Trebuchet MS","normal","900"),t.setTextColor("rgb(36, 91, 143)"),t.setFontSize(20),t.text(this.myschool?.schoolName??"",c/2,30,{align:"center"}),this.genk.logoString&&t.addImage(this.genk.logoString,"PNG",270,40,55,55),this.genk.signatureString&&t.addImage(this.genk.signatureString,"PNG",495,705,70,55),t.setFontSize(10),t.setTextColor("rgb(0, 0, 0)"),t.setFont("","","700"),t.text("Postal Address:",20,60),t.setFont("","","500");let m=t.splitTextToSize(this.myschool?.address??"",220);if(t.text(m,20,73),t.setFont("","","700"),t.text("Email:",380,60),t.setFont("","","500"),t.text(this.myschool?.email??"",418,60),t.setFont("","","700"),t.text("Phone:",380,74),t.setFont("","","500"),t.text(this.myschool?.phoneOne??"",418,74),t.setFont("","","700"),t.text("website:",380,88),t.setFont("","","500"),t.text(this.myschool?.website??"",424,88),t.setDrawColor(36,91,143),t.setLineWidth(2),t.line(20,100,580,100),t.setFontSize(8),t.setFont("","","700"),t.text("STUDENTS NAME:",20,120),t.setFont("","","500"),t.text(((this.studentobj?.surname??"")+" "+(this.studentobj?.middleName??"")+" "+(this.studentobj?.firstName??"")).trim(),113,120),t.setFont("","","700"),t.text("CLASS:",20,132),t.setFont("","","500"),t.text(this.className??"",113,132),t.setFont("","","700"),t.text("NO. IN CLASS:",20,144),t.setFont("","","500"),t.text(this.noInClass.toString(),113,144),t.setFont("","","700"),t.text("AVERAGE SCORE:",20,156),t.setFont("","","500"),t.text(this.average.toString(),113,156),t.setFont("","","700"),t.text("TOTAL SCORE:",20,168),t.setFont("","","500"),t.text(this.studentTotal.toFixed(1).toString(),113,168),t.setFont("","","700"),t.text("POSITION IN CLASS:",20,180),t.setFont("","","500"),t.text(this.position.toString(),113,180),t.setFont("","","700"),t.text("TERM:",380,120),t.setFont("","","500"),t.text(this.currentTerm,460,120),t.setFont("","","700"),t.text("SESSION:",380,132),t.setFont("","","500"),t.text(this.currentSession,460,132),t.setFont("","","700"),t.text("ADMISSION NO.:",380,144),t.setFont("","","500"),t.text(this.studentobj?.admissionNo??"",460,144),t.setFont("","","700"),t.setFontSize(7),t.text("NEXT TERM BEGINS:",380,156),t.setFont("","","500"),this.nextResumptionDate){let ee=new Date(this.nextResumptionDate),Z=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(ee);t.setFontSize(8),t.text(Z,460,156)}t.setFont("","","700"),t.text("HOUSE:",380,168),t.setFont("","","500"),t.text("",460,168),t.setFont("","","700"),t.text("NO OF TIMES PRESENT:",380,180),t.setFont("","","500"),t.text("",460,180),t.setFontSize(12),t.setFont("","","700"),t.text("CONTINUOUS ASSESSMENT DOSSIER FOR JUNIOR SECONDARY SCHOOL",c/2,200,{align:"center"}),(0,st.default)(t,{html:"#customers",useCss:!0,styles:{font:"20px",lineWidth:.2,fontSize:6},headStyles:{lineColor:"white"},startY:206,margin:{top:150,left:20,bottom:70}}),t.setFontSize(10),(0,st.default)(t,{html:"#ireg",useCss:!0,styles:{font:"6px",lineColor:"#808080",lineWidth:.2,fontSize:7,halign:"center"},headStyles:{lineColor:"white",fontSize:8,fontStyle:"bold"},startY:403,margin:{top:150,left:20,bottom:30}}),(0,st.default)(t,{html:"#grade",useCss:!0,styles:{font:"8px",lineWidth:.2,fontSize:6},startY:472,margin:{top:150,left:300,bottom:30}}),t.setFont("","","700"),t.setFontSize(9),t.text("PSYCOMOTOR DOMAIN",65,464),t.setFont("","","700"),t.setFontSize(9),t.text("COGNITIVE DOMAIN RATING",355,464),(0,st.default)(t,{html:"#psyco",useCss:!0,styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:6},headStyles:{lineColor:"white"},startY:472,tableWidth:130,margin:{top:150,left:20,bottom:30}}),(0,st.default)(t,{html:"#psyco2",useCss:!0,styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:6},headStyles:{lineColor:"white"},startY:472,tableWidth:130,margin:{top:150,left:150,bottom:30}}),(0,st.default)(t,{html:"#mykey",useCss:!0,styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:6},headStyles:{lineColor:"white"},startY:606,tableWidth:260,margin:{top:150,left:20,bottom:30}}),t.setTextColor("rgb(36, 91, 143)"),t.setFontSize(9),t.setFont("","","600");let S=t.splitTextToSize("House Mistress's Comment:",150);t.text(S,20,650),t.setFont("","","200"),t.setTextColor("rgb(0, 0, 10)");let b=t.splitTextToSize(this.resultComment?.formTeacherComment??"",370);t.text(b,176,650),t.setDrawColor(0,0,0),t.setLineWidth(1),t.line(170,653,580,653),t.setFontSize(9),t.setFont("","","600"),t.setTextColor("rgb(36, 91, 143)");let g=t.splitTextToSize("Form Teacher's Comment:",100);t.text(g,20,670),t.setFont("","","200"),t.setTextColor("rgb(0, 0, 0)");let y=t.splitTextToSize(this.resultComment?.formTeacherComment??"",370);t.text(y,176,670),t.setDrawColor(0,0,0),t.setLineWidth(1),t.line(170,673,580,673),t.setFontSize(9),t.setFont("","","600"),t.setTextColor("rgb(36, 91, 143)");let U=t.splitTextToSize("Principal's Comment:",100);t.text(U,20,690),t.setFont("","","200"),t.setTextColor("rgb(0, 0, 0)");let O=t.splitTextToSize(this.resultComment?.principalComment??"",370);t.text(O,176,690),t.setDrawColor(0,0,0),t.setLineWidth(1),t.line(170,693,580,693),t.setTextColor("rgb(36, 91, 143)"),t.setFontSize(9),t.setFont("","","600");let Y=t.splitTextToSize("Principal's Signature Date & Stamp:",80);t.text(Y,415,730),t.save("My_Results")}addLogo(){return new Promise((e,i)=>{this.sch.getSchoolLogoArray(this.myschool.id).subscribe(t=>{t?.photo?this.genk.logoString=`data:image/jpeg;base64,${t.photo}`:this.genk.logoString="",e()},t=>i(t))})}addSignature(){return new Promise((e,i)=>{this.sch.obtainSignatureArray(this.currentSessionId,this.currentTerm).subscribe(t=>{t?.photo?this.genk.signatureString=`data:image/jpeg;base64,${t.photo}`:this.genk.signatureString="",e()},t=>i(t))})}floorNum(e){return Math.floor(e)}over60Num(e){let i=0,d=(e/100*60).toString().split(".");return d.length>1?i=+(d[0]+"."+d[1][0]):i=Number(d[0]),i}over40Num(e){let i=0,d=(e/100*40).toString().split(".");return d.length>1?i=+(d[0]+"."+d[1][0]):i=Number(d[0]),i}getScoreColor(e,i){if(i==100){if(e>=this.grademinimumlist[0].minscore)return this.grademinimumlist[0].color;if(e>=this.grademinimumlist[1].minscore&&e<this.grademinimumlist[0].minscore)return this.grademinimumlist[1].color;if(e>=this.grademinimumlist[2].minscore&&e<this.grademinimumlist[1].minscore)return this.grademinimumlist[2].color;if(e>=this.grademinimumlist[3].minscore&&e<this.grademinimumlist[2].minscore)return this.grademinimumlist[3].color}else if(i==60){if(e>=this.grademinimumlistOver60[0].minscore)return this.grademinimumlistOver60[0].color;if(e>=this.grademinimumlistOver60[1].minscore&&e<this.grademinimumlistOver60[0].minscore)return this.grademinimumlistOver60[1].color;if(e>=this.grademinimumlistOver60[2].minscore&&e<this.grademinimumlistOver60[1].minscore)return this.grademinimumlistOver60[2].color;if(e>=this.grademinimumlistOver60[3].minscore&&e<this.grademinimumlistOver60[2].minscore)return this.grademinimumlistOver60[3].color}}getRemarkColor(e){return this.grademinimumlist.filter(i=>i.remark?.toLowerCase()==e?.toLowerCase())[0]?.color}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(G),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:230,vars:43,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[2,"text-align","end","margin","10px 30px"],[2,"padding","10px 50px","border","none","outline","none","background-color","dodgerblue","color","white","border-radius","20px","box-shadow","1px 1px 3px rgb(0, 0, 0, 0.3)",3,"click"],[1,"fonticon-printer",2,"margin-right","6px","color","white","font-size","16px"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],["prin",""],[1,"card-body","p-12"],[2,"font-family","'Poppins-Medium'"],[2,"text-align","center","margin-bottom","20px"],[2,"font-size","39px","color","rgb(36, 91, 143)","font-weight","900"],[2,"display","flex","justify-content","space-between","font-size","16px"],[1,"col-4"],[2,"font-weight","600"],[1,"col-4","text-center"],[2,"object-fit","cover","height","100px","width","100px","border-radius","100%",3,"src"],[2,"height","6px","background-color","rgb(36, 91, 143)","margin-top","30px"],[2,"display","flex","justify-content","space-between","font-size","17px"],[2,"text-align","center","margin-top","10px"],["id","customers"],["tabl",""],[4,"ngIf"],["class","border-bottom border-bottom-dashed",4,"ngFor","ngForOf"],["id","ireg",1,"heitable",2,"width","100%"],["span","2"],[2,"text-align","center","font-size","10px","font-weight","600"],["colspan","2","scope","colgroup"],["colspan","4","scope","colgroup"],[2,"font-size","10px","font-weight","600"],["scope","col"],[2,"font-size","10px"],[2,"margin","50px 0 30px 0"],["id","mykey",2,"border","1px solid rgb(174, 179, 181)"],[2,"font-size","9px"],[2,"padding","2px 5px"],[2,"display","flex","justify-content","space-between"],[2,"display","flex","width","50%"],["id","psyco",2,"width","50%"],["style","font-size: 11px;",4,"ngFor","ngForOf"],["id","psyco2",2,"width","50%"],["id","grade",2,"font-size","11px","width","40%"],[2,"border","solid 1px grey"],[4,"ngFor","ngForOf"],[2,"padding","0 0 50px 50px"],[2,"margin-bottom","15px"],[2,"font-size","15px","font-weight","600","color","rgb(75, 73, 73)"],[2,"font-size","15px","color","rgb(9, 95, 182)","font-style","italic"],[1,"border-bottom","border-bottom-dashed"],[3,"ngStyle"],[2,"font-size","11px"],[2,"font-weight","700",3,"ngStyle"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),v("click",function(){w(d);let m=E(9);return T(t.convertToPDF(m))}),f(4,"i",4),r(5," Print"),s()(),n(6,"div",5)(7,"div",6)(8,"div",7,8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"span",12),r(14),s()(),n(15,"div",13)(16,"div",14)(17,"span",15),r(18,"Postal Address:"),s(),f(19,"br"),n(20,"span"),r(21),s()(),n(22,"div",16),f(23,"img",17),s(),n(24,"div",14)(25,"span",15),r(26,"Email: "),s(),n(27,"span"),r(28),s(),f(29,"br"),n(30,"span",15),r(31,"Phone: "),s(),n(32,"span"),r(33),s(),f(34,"br"),n(35,"span",15),r(36,"website: "),s(),n(37,"span"),r(38),s()()(),f(39,"div",18),n(40,"div",19)(41,"div")(42,"span",15),r(43,"STUDENTS NAME: "),s(),n(44,"span"),r(45),s(),f(46,"br"),n(47,"span",15),r(48,"CLASS NAME: "),s(),n(49,"span"),r(50),s(),f(51,"br"),n(52,"span",15),r(53,"NO. IN CLASS: "),s(),n(54,"span"),r(55),s(),f(56,"br"),n(57,"span",15),r(58,"AVERAGE SCORE: "),s(),n(59,"span"),r(60),s(),f(61,"br"),n(62,"span",15),r(63,"TOTAL SCORE: "),s(),n(64,"span"),r(65),s(),f(66,"br"),n(67,"span",15),r(68,"POSITION IN CLASS: "),s(),n(69,"span"),r(70),s()(),n(71,"div",14)(72,"span",15),r(73,"TERM: "),s(),n(74,"span"),r(75),s(),f(76,"br"),n(77,"span",15),r(78,"SESSION: "),s(),n(79,"span"),r(80),s(),f(81,"br"),n(82,"span",15),r(83,"ADMISSION NO.: "),s(),n(84,"span"),r(85),s(),f(86,"br"),n(87,"span",15),r(88,"NEXT TERM BEGINS: "),s(),n(89,"span"),r(90),Ie(91,"date"),s(),f(92,"br"),n(93,"span",15),r(94,"HOUSE: "),s(),f(95,"span")(96,"br"),n(97,"span",15),r(98,"NO OF TIMES PRESENT: "),s(),f(99,"span")(100,"br"),s()(),n(101,"div",20)(102,"h1"),r(103,"CONTINUOUS ASSESSMENT DOSSIER FOR JUNIOR AND SENIOR SECONDARY SCHOOL"),s()(),f(104,"div"),s(),n(105,"table",21,22)(107,"thead")(108,"tr")(109,"th"),r(110,"Subject"),s(),C(111,lr,2,1,"th",23)(112,or,2,1,"th",23)(113,ar,2,1,"th",23)(114,dr,2,1,"th",23)(115,cr,2,1,"th",23)(116,mr,2,1,"th",23)(117,ur,2,1,"th",23)(118,pr,2,1,"th",23)(119,hr,2,1,"th",23)(120,gr,2,1,"th",23)(121,Sr,2,1,"th",23)(122,fr,2,1,"th",23)(123,xr,2,1,"th",23)(124,br,2,1,"th",23)(125,_r,2,1,"th",23),n(126,"th"),r(127,"Exam (60%)"),s(),n(128,"th"),r(129,"Total Score (100%)"),s(),n(130,"th"),r(131,"Grade"),s(),n(132,"th"),r(133,"Remark"),s(),n(134,"th"),r(135,"Position"),s(),n(136,"th"),r(137,"Lowest Score"),s(),n(138,"th"),r(139,"Highest Score"),s(),n(140,"th"),r(141,"Average"),s()()(),n(142,"tbody"),C(143,Dr,34,36,"tr",24),s()(),f(144,"br"),n(145,"table",25),f(146,"colgroup",26)(147,"colgroup",26),n(148,"tr",27)(149,"th",28),r(150,"HEIGHT"),s(),n(151,"th",28),r(152,"WEIGHT"),s(),n(153,"th",29),r(154,"SOCIETIES/CLUBS"),s()(),n(155,"tr",30)(156,"th",31),r(157,"Beginning of Term"),s(),n(158,"th",31),r(159,"End of Term"),s(),n(160,"th",31),r(161,"Beginning of Term"),s(),n(162,"th",31),r(163,"End of Term"),s(),n(164,"th",31),r(165,"Academic"),s(),n(166,"th",31),r(167,"Social"),s(),n(168,"th",31),r(169,"Pious"),s(),n(170,"th",31),r(171,"Social Acad"),s()(),n(172,"tr",32)(173,"td",31),r(174),s(),n(175,"td",31),r(176),s(),n(177,"td",31),r(178),s(),n(179,"td",31),r(180),s(),n(181,"td",31),r(182,"4000"),s(),n(183,"td",31),r(184,"1000"),s(),n(185,"td",31),r(186,"St. Vincent de paul"),s(),n(187,"td",31),r(188,"Road Safety"),s()()(),n(189,"div",33)(190,"table",34)(191,"tr",35)(192,"th",36),r(193,"KEY-TO-RATINGS:"),s(),n(194,"td",36),r(195,"1 = Unsatisfactory \xA0\xA0 2 = Below Average \xA0\xA0 3 = Average \xA0\xA0 4 = Good \xA0\xA0 5 = Excellent"),s()()()(),n(196,"div",37)(197,"div",38)(198,"table",39),C(199,jr,5,2,"tr",40),s(),n(200,"table",41),C(201,Lr,5,2,"tr",40),s()(),n(202,"table",42)(203,"thead",15)(204,"tr",43)(205,"th"),r(206,"Color"),s(),n(207,"th"),r(208,"Grade"),s(),n(209,"th"),r(210,"Over 100"),s(),n(211,"th"),r(212,"Over 60"),s(),n(213,"th"),r(214,"Over 40"),s()()(),n(215,"tbody"),C(216,Br,11,8,"tr",44),s()()()(),n(217,"div",45)(218,"div",46)(219,"span",47),r(220,"Form Teacher's Comment:"),s(),r(221," \xA0\xA0 "),n(222,"span",48),r(223),s()(),n(224,"div")(225,"span",47),r(226,"Principal's Comment:"),s(),r(227," \xA0\xA0 "),n(228,"span",48),r(229),s()()()()()()()()}if(i&2){let d;l(14),p(t.myschool==null?null:t.myschool.schoolName),l(7),p(t.myschool==null?null:t.myschool.address),l(2),h("src",t.setImg(t.myschool==null?null:t.myschool.schoolLogo),oe),l(5),p(t.myschool==null?null:t.myschool.email),l(5),p(t.myschool==null?null:t.myschool.phoneOne),l(5),p(t.myschool==null?null:t.myschool.website),l(7),p((((d=t.studentobj==null?null:t.studentobj.surname)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.middleName)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.firstName)!==null&&d!==void 0?d:"")).trim()),l(5),p(t.className),l(5),p(t.noInClass),l(5),p(t.average),l(5),p(t.studentTotal==null?null:t.studentTotal.toFixed(1)),l(5),p(t.position),l(5),p(t.currentTerm),l(5),p(t.currentSession),l(5),p(t.studentobj==null?null:t.studentobj.admissionNo),l(5),p(Oe(91,41,t.nextResumptionDate)),l(21),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA1),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA2),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA3),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA4),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA5),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA6),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA7),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA8),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA9),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA10),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA11),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA12),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA13),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA14),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA15),l(18),h("ngForOf",t.resultlist),l(31),I("",t.bmi==null?null:t.bmi.heightBOT,"cm"),l(2),I("",t.bmi==null?null:t.bmi.heightEOT,"cm"),l(2),I("",t.bmi==null?null:t.bmi.weightBOT,"cm"),l(2),I("",t.bmi==null?null:t.bmi.weightEOT,"cm"),l(19),h("ngForOf",t.psycomotorlist),l(2),h("ngForOf",t.psycomotorlist2),l(15),h("ngForOf",t.gradeScalelist),l(7),p(t.resultComment==null?null:t.resultComment.formTeacherComment),l(6),p(t.resultComment==null?null:t.resultComment.principalComment)}},dependencies:[W,he,Et,Re],styles:["#customers[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px;font-size:9px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}.heitable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(186,187,190);padding:2px 5px}.resprint[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#1e90ff;color:#fff;border-radius:20px;box-shadow:1px 1px 3px #0000004d}.resprintdisabled[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#a0a3a6;color:#000;border-radius:20px;box-shadow:1px 1px 3px #0000004d}#customerslouismidterm[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerslouismidterm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:11px}#customerslouismidterm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;font-size:11px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}#customerstrail[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerstrail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:4px;font-size:10px}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customerstrail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-size:10px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}"]});let o=u;return o})();ke();var jt=K(Pe());function zr(o,u){if(o&1&&(n(0,"tr",34)(1,"td"),r(2),s(),n(3,"td"),r(4),s(),n(5,"td"),r(6),s(),n(7,"td"),r(8),s(),n(9,"td"),r(10),s(),n(11,"td"),r(12),s(),n(13,"td"),r(14),s(),n(15,"td"),r(16),s(),n(17,"td"),r(18),s(),n(19,"td"),r(20),s(),n(21,"td"),r(22),s(),n(23,"td"),r(24),s()()),o&2){let a=u.$implicit,e=x(),i,t,d,c,m,S,b,g;l(2),p(a.subject),l(2),p((i=a.firstTermTotalScore==null?null:a.firstTermTotalScore.toFixed(1))!==null&&i!==void 0?i:""),l(2),p((t=a.secondTermTotalScore==null?null:a.secondTermTotalScore.toFixed(1))!==null&&t!==void 0?t:""),l(2),p((d=a.thirdTermTotalScore==null?null:a.thirdTermTotalScore.toFixed(1))!==null&&d!==void 0?d:""),l(2),p((c=e.calTotal(a.firstTermTotalScore,a.secondTermTotalScore,a.thirdTermTotalScore))==null?null:c.toFixed(1)),l(2),p(e.calTotalAverage(a.firstTermTotalScore,a.secondTermTotalScore,a.thirdTermTotalScore)),l(2),p(e.calGrade(e.calTotalAverage(a.firstTermTotalScore,a.secondTermTotalScore,a.thirdTermTotalScore)).grade),l(2),p(e.calGrade(e.calTotalAverage(a.firstTermTotalScore,a.secondTermTotalScore,a.thirdTermTotalScore)).remark),l(2),p((m=a.position)!==null&&m!==void 0?m:""),l(2),p((S=a.lowestScore==null?null:a.lowestScore.toFixed(1))!==null&&S!==void 0?S:""),l(2),p((b=a.highestScore==null?null:a.highestScore.toFixed(1))!==null&&b!==void 0?b:""),l(2),p((g=a.average==null?null:a.average.toFixed(1))!==null&&g!==void 0?g:"")}}function Vr(o,u){if(o&1&&(n(0,"span")(1,"span"),r(2),s(),r(3," \xA0\xA0 "),s()),o&2){let a=u.$implicit;l(2),p(a)}}var gi=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.activeRoute=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.gradeScalelist=[],this.gradescaletextlist=[],this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Dashboard",this.studentId=this.activeRoute.snapshot.params.id,this.activeRoute.queryParams.subscribe(e=>{debugger;this.currentTerm=e.term,this.currentSessionId=e.currentSessionId,this.currentSession=e.currentSession,this.currentClassId=e.classId,this.average=e.average,this.position=e.position}),this.getSchool(),this.getStudent(),this.getNoInClass(),this.getResultsByStudent(),this.getCaSetupByClass(),this.getGradeScaleByClass(),this.getStudentResultComment()}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}calTotal(e,i,t){return(e??0)+(i??0)+(t??0)}calTotalAverage(e,i,t){let d=(e??0)+(i??0)+(t??0),c=(e?1:0)+(i?1:0)+(t?1:0);return Number(d/c).toFixed(1)}calHighestAverage(e,i,t,d){let c=(e?1:0)+(i?1:0)+(t?1:0);return Number(d/c).toFixed(1)}calGrade(e){let i;return this.gradeScalelist.forEach(t=>{e>=t.begLimit&&e<=t.endLimit&&(i={grade:t.grade,remark:t.remarks})}),i||{grade:"i",remark:"Not Aplicable"}}getSchool(){this.sch.getSchoolData().subscribe(e=>{this.myschool=e})}getStudent(){this.sch.getStudentById(this.studentId.toString()).subscribe(e=>H(this,null,function*(){this.studentobj=e,yield this.addLogo(),yield this.addSignature()}))}getNoInClass(){this.sch.getNoInClass(this.studentId.toString()).subscribe(e=>{this.noInClass=e.count})}getResultsByStudent(){this.sch.getAnnualResultsPageSession(this.currentClassId,this.currentSessionId.toString(),this.studentId).subscribe(e=>{this.resultlist=e})}getStudentResultComment(){this.sch.getStudentResultComment(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e,this.gradescaletextlist.push(this.gradeScalelist[0].classLevel+":");let i;this.gradeScalelist.forEach(t=>{i=t.grade+" = "+t.remarks+" ("+t.begLimit+" - "+t.endLimit+")",this.gradescaletextlist.push(i)})})}convertToPDF(e){debugger;var i=new ae("p","pt","letter"),t=i.internal.pageSize.height||i.internal.pageSize.getHeight(),d=i.internal.pageSize.width||i.internal.pageSize.getWidth();i.setFont("Trebuchet MS","normal","900"),i.setTextColor("rgb(36, 91, 143)"),i.setFontSize(20),i.text(this.myschool?.schoolName??"",d/2,30,{align:"center"}),this.genk.logoString&&i.addImage(this.genk.logoString,"PNG",270,40,55,55),this.genk.signatureString&&i.addImage(this.genk.signatureString,"PNG",500,695,70,55),i.setFontSize(10),i.setTextColor("rgb(0, 0, 0)"),i.setFont("","","700"),i.text("Postal Address:",20,60),i.setFont("","","500");let c=i.splitTextToSize(this.myschool?.address??"",220);i.text(c,20,73),i.setFont("","","700"),i.text("Email:",380,60),i.setFont("","","500"),i.text(this.myschool?.email??"",418,60),i.setFont("","","700"),i.text("Phone:",380,74),i.setFont("","","500"),i.text(this.myschool?.phoneOne??"",418,74),i.setFont("","","700"),i.text("website:",380,88),i.setFont("","","500"),i.text(this.myschool?.website??"",424,88),i.setDrawColor(36,91,143),i.setLineWidth(2),i.line(20,100,580,100),i.setFontSize(8),i.setFont("","","700"),i.text("STUDENTS NAME:",20,120),i.setFont("","","500"),i.text(((this.studentobj?.surname??"")+" "+(this.studentobj?.middleName??"")+" "+(this.studentobj?.firstName??"")).trim(),113,120),i.setFont("","","700"),i.text("CLASS:",20,132),i.setFont("","","500"),i.text(this.studentobj?.class??"",113,132),i.setFont("","","700"),i.text("NO. IN CLASS:",20,144),i.setFont("","","500"),i.text(this.noInClass.toString(),113,144),i.setFont("","","700"),i.text("AVERAGE SCORE:",20,156),i.setFont("","","500"),i.text(this.average.toString(),113,156),i.setFont("","","700"),i.text("POSITION IN CLASS:",20,168),i.setFont("","","500"),i.text(this.position.toString(),113,168),i.setFont("","","700"),i.text("TERM:",380,120),i.setFont("","","500"),i.text(this.currentTerm,460,120),i.setFont("","","700"),i.text("SESSION:",380,132),i.setFont("","","500"),i.text(this.currentSession,460,132),i.setFont("","","700"),i.text("ADMISSION NO.:",380,144),i.setFont("","","500"),i.text(this.studentobj?.admissionNo??"",460,144),i.setFont("","","700"),i.text("NEXT TERM BEGINS:",380,156),i.setFont("","","500"),i.text("",460,156),i.setFontSize(12),i.setFont("","","700"),i.text("REPORT SHEET FOR JUNIOR AND SENIOR SECONDARY",d/2,190,{align:"center"}),(0,jt.default)(i,{html:"#customers",styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:200,margin:{top:150,left:20,bottom:70}}),i.setFontSize(10),(0,jt.default)(i,{html:"#mykey",styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:620,margin:{top:150,left:20,bottom:30}}),i.setFontSize(8),i.setFont("","","700");let m=i.splitTextToSize("Form Teacher's Comment:",100);i.text(m,20,700),i.setFont("","","500"),i.setTextColor("rgb(36, 91, 143)");let S=i.splitTextToSize(this.resultComment?.formTeacherComment??"",370);i.text(S,119,700),i.setTextColor("rgb(0, 0, 0)"),i.setFont("","","700");let b=i.splitTextToSize("Principal's Comment:",100);i.text(b,20,730),i.setFont("","","500"),i.setTextColor("rgb(36, 91, 143)");let g=i.splitTextToSize(this.resultComment?.principalComment??"",370);i.text(g,103,730),i.save("My_Results")}addLogo(){return new Promise((e,i)=>{this.sch.getSchoolLogoArray(this.myschool.id).subscribe(t=>{t?.photo?this.genk.logoString=`data:image/jpeg;base64,${t.photo}`:this.genk.logoString="",e()},t=>i(t))})}addSignature(){return new Promise((e,i)=>{this.sch.obtainSignatureArray(this.currentSessionId,this.currentTerm).subscribe(t=>{t?.photo?this.genk.signatureString=`data:image/jpeg;base64,${t.photo}`:this.genk.signatureString="",e()},t=>i(t))})}getBase64ImageFromUrl(e){return H(this,null,function*(){var i=yield fetch(e);let t=yield i.text();var c=this.base64ToBlob(t,"image/png");return new Promise((m,S)=>{var b=new FileReader;b.addEventListener("load",function(){debugger;m(b.result)},!1),b.onerror=()=>S(this),b.readAsDataURL(c)})})}base64ToBlob(e,i=""){let t=atob(e),d=[];for(let m=0;m<t.length;m+=512){let S=t.slice(m,m+512),b=new Array(S.length);for(let y=0;y<S.length;y++)b[y]=S.charCodeAt(y);let g=new Uint8Array(b);d.push(g)}return new Blob(d,{type:i})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(G),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:143,vars:18,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[2,"text-align","end","margin","10px 30px"],[2,"padding","10px 50px","border","none","outline","none","background-color","dodgerblue","color","white","border-radius","20px","box-shadow","1px 1px 3px rgb(0, 0, 0, 0.3)",3,"click"],[1,"fonticon-printer",2,"margin-right","6px","color","white","font-size","16px"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],["prin",""],[1,"card-body","p-12"],[2,"font-family","'Poppins-Medium'"],[2,"text-align","center","margin-bottom","20px"],[2,"font-size","39px","color","rgb(36, 91, 143)","font-weight","900"],[2,"display","flex","justify-content","space-between","font-size","16px"],[1,"col-4"],[2,"font-weight","600"],[1,"col-4","text-center"],[2,"object-fit","cover","height","100px","width","100px","border-radius","100%",3,"src"],[2,"height","6px","background-color","rgb(36, 91, 143)","margin-top","30px"],[2,"display","flex","justify-content","space-between","font-size","17px"],[2,"text-align","center","margin-top","10px"],["id","customers"],["tabl",""],["class","border-bottom border-bottom-dashed",4,"ngFor","ngForOf"],[2,"margin","50px 0 30px 0"],["id","mykey",2,"width","100%","border","1px solid black","border-collapse","collapse"],[2,"border","1px solid black","border-collapse","collapse","width","200px","text-align","center","padding","10px 0"],[2,"border","1px solid black","border-collapse","collapse","padding","10px 10px"],[4,"ngFor","ngForOf"],[2,"border","1px solid black","border-collapse","collapse","width","200px","text-align","center","padding","5px 0"],[2,"border","1px solid black","border-collapse","collapse","padding","5px 10px"],[2,"margin-bottom","40px"],[2,"font-size","15px","font-weight","600","color","rgb(75, 73, 73)"],[2,"font-size","15px","color","rgb(9, 95, 182)","font-style","italic"],[1,"border-bottom","border-bottom-dashed"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),v("click",function(){w(d);let m=E(9);return T(t.convertToPDF(m))}),f(4,"i",4),r(5," Print"),s()(),n(6,"div",5)(7,"div",6)(8,"div",7,8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"span",12),r(14),s()(),n(15,"div",13)(16,"div",14)(17,"span",15),r(18,"Postal Address:"),s(),f(19,"br"),n(20,"span"),r(21),s()(),n(22,"div",16),f(23,"img",17),s(),n(24,"div",14)(25,"span",15),r(26,"Email: "),s(),n(27,"span"),r(28),s(),f(29,"br"),n(30,"span",15),r(31,"Phone: "),s(),n(32,"span"),r(33),s(),f(34,"br"),n(35,"span",15),r(36,"website: "),s(),n(37,"span"),r(38),s()()(),f(39,"div",18),n(40,"div",19)(41,"div")(42,"span",15),r(43,"STUDENTS NAME: "),s(),n(44,"span"),r(45),s(),f(46,"br"),n(47,"span",15),r(48,"CLASS NAME: "),s(),n(49,"span"),r(50),s(),f(51,"br"),n(52,"span",15),r(53,"NO. IN CLASS: "),s(),n(54,"span"),r(55),s(),f(56,"br"),n(57,"span",15),r(58,"AVERAGE SCORE: "),s(),n(59,"span"),r(60),s(),f(61,"br"),n(62,"span",15),r(63,"POSITION IN CLASS: "),s(),n(64,"span"),r(65),s()(),n(66,"div",14)(67,"span",15),r(68,"TERM: "),s(),n(69,"span"),r(70),s(),f(71,"br"),n(72,"span",15),r(73,"SESSION: "),s(),n(74,"span"),r(75),s(),f(76,"br"),n(77,"span",15),r(78,"ADMISSION NO.: "),s(),n(79,"span"),r(80),s(),f(81,"br"),n(82,"span",15),r(83,"NEXT TERM BEGINS:"),s()()(),n(84,"div",20)(85,"h1"),r(86,"REPORT SHEET FOR JUNIOR AND SENIOR SECONDARY"),s()(),f(87,"div"),s(),n(88,"table",21,22)(90,"thead")(91,"tr")(92,"th"),r(93,"Subject"),s(),n(94,"th"),r(95,"1st Term"),s(),n(96,"th"),r(97,"2nd Term"),s(),n(98,"th"),r(99,"3rd Term"),s(),n(100,"th"),r(101,"Total"),s(),n(102,"th"),r(103,"Annual"),s(),n(104,"th"),r(105,"Grade"),s(),n(106,"th"),r(107,"Remark"),s(),n(108,"th"),r(109,"Position"),s(),n(110,"th"),r(111,"Lowest Score"),s(),n(112,"th"),r(113,"Highest Score"),s(),n(114,"th"),r(115,"Average"),s()()(),n(116,"tbody"),C(117,zr,25,12,"tr",23),s()(),n(118,"div",24)(119,"table",25)(120,"tr")(121,"th",26),r(122,"KEY TO GRADE:"),s(),n(123,"td",27),C(124,Vr,4,1,"span",28),s()(),n(125,"tr")(126,"th",29),r(127,"KEY TO RATINGS:"),s(),n(128,"td",30),r(129,"1 = Very Poor \xA0\xA0 2 = Poor \xA0\xA0 3 = Fair \xA0\xA0 4 = Good \xA0\xA0 5 = Excellent"),s()()()(),n(130,"div")(131,"div",31)(132,"span",32),r(133,"Form Teacher's Comment:"),s(),r(134," \xA0\xA0 "),n(135,"span",33),r(136),s()(),n(137,"div")(138,"span",32),r(139,"Principal's Comment:"),s(),r(140," \xA0\xA0 "),n(141,"span",33),r(142),s()()()()()()()()()}if(i&2){let d;l(14),p(t.myschool==null?null:t.myschool.schoolName),l(7),p(t.myschool==null?null:t.myschool.address),l(2),h("src",t.setImg(t.myschool==null?null:t.myschool.schoolLogo),oe),l(5),p(t.myschool==null?null:t.myschool.email),l(5),p(t.myschool==null?null:t.myschool.phoneOne),l(5),p(t.myschool==null?null:t.myschool.website),l(7),p((((d=t.studentobj==null?null:t.studentobj.surname)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj.middleName)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj.firstName)!==null&&d!==void 0?d:"")).trim()),l(5),p(t.studentobj==null?null:t.studentobj.class),l(5),p(t.noInClass),l(5),p(t.average),l(5),p(t.position),l(5),p(t.currentTerm),l(5),p(t.currentSession),l(5),p(t.studentobj==null?null:t.studentobj.admissionNo),l(37),h("ngForOf",t.resultlist),l(7),h("ngForOf",t.gradescaletextlist),l(12),p(t.resultComment==null?null:t.resultComment.formTeacherComment),l(6),p(t.resultComment==null?null:t.resultComment.principalComment)}},dependencies:[W],styles:["#customers[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px;font-size:9px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}.heitable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(186,187,190);padding:2px 5px}.resprint[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#1e90ff;color:#fff;border-radius:20px;box-shadow:1px 1px 3px #0000004d}.resprintdisabled[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#a0a3a6;color:#000;border-radius:20px;box-shadow:1px 1px 3px #0000004d}#customerslouismidterm[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerslouismidterm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:11px}#customerslouismidterm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;font-size:11px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}#customerstrail[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerstrail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:4px;font-size:10px}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customerstrail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-size:10px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}"]});let o=u;return o})();ke();var Lt=K(Pe()),Si=K(Nt()),fe=K(Te());function Wr(o,u){if(o&1&&(n(0,"span")(1,"span"),r(2),s(),r(3," \xA0\xA0 "),s()),o&2){let a=u.$implicit;l(2),p(a)}}var fi=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.activeRoute=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.resultviewlist=[],this.gradeScalelist=[],this.resArray=[],this.goo=0,this.resultComment=[],this.gradescaletextlist=[],this.downloadCount=0,this.photoByteslist=[],this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.startProcessingModal(),this.genk.topdata="Dashboard",this.activeRoute.queryParams.subscribe(e=>{this.currentTerm=e.term,this.currentSessionId=e.currentSessionId,this.currentSession=e.currentSession,this.currentClassId=e.classId,this.currentClassName=e.className,this.zip=new Si.default,this.pdfFolders=this.zip.folder(this.currentClassName+"_Results")}),this.isResultPhoto(),this.getNoInClass(),this.getCaSetupByClass(),this.getGradeScaleByClass(),this.getStudentResultComment()}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getNoInClass(){this.sch.getNoInClassId(this.currentClassId.toString()).subscribe(e=>{this.noInClass=e.count})}isResultPhoto(){this.sch.isResultPhoto().subscribe(e=>H(this,null,function*(){this.isResPhoto=e.isPhoto,this.isResPhoto?this.getStudentPhotosBytes():this.getSchool()}))}getResultsByStudent(){this.sch.getResultsByStudentAll(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultlist=e,this.getResultsAverageByClass()})}getStudentPhotosBytes(){fe.default.fire({title:"Downloading Student Photos...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{fe.default.showLoading(),this.sch.getStudentPhotosBytes(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.photoByteslist=e,fe.default.close(),this.getSchool()})}})}getStudentResultComment(){this.sch.getStudentResultCommentByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname,this.getResultsByStudent()})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e,this.gradescaletextlist.push(this.gradeScalelist[0].classLevel+":");let i;this.gradeScalelist.forEach(t=>{i=t.grade+" = "+t.remarks+" ("+t.begLimit+" - "+t.endLimit+")",this.gradescaletextlist.push(i)})})}getSchool(){this.sch.getSchoolData().subscribe(e=>{this.myschool=e,fe.default.fire({title:"Downloading Result...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{fe.default.showLoading(),this.addLogo(),this.addSignature();let i=setInterval(()=>{this.genk.logoString&&this.resultlist.length>0&&this.genk.signatureString&&(clearInterval(i),clearTimeout(t),this.getResultsByStudent(),fe.default.close())},500),t=setTimeout(()=>{clearInterval(i),fe.default.close(),fe.default.fire({icon:"error",title:"Failed to download result!",showConfirmButton:!1,timer:2e3})},4e4)}})})}convertToPDF(e,i,t,d,c,m,S,b){return H(this,null,function*(){var g=new ae("p","pt","letter"),y=g.internal.pageSize.height||g.internal.pageSize.getHeight(),U=g.internal.pageSize.width||g.internal.pageSize.getWidth();if(this.isResPhoto){if(g.setFont("Trebuchet MS","normal","900"),g.setTextColor("rgb(36, 91, 143)"),g.setFontSize(20),g.text(this.myschool?.schoolName??"",U/2,30,{align:"center"}),this.genk.logoString&&g.addImage(this.genk.logoString,"PNG",20,40,55,55),this.genk.signatureString&&g.addImage(this.genk.signatureString,"PNG",500,695,70,55),this.photobyte)g.addImage(`data:image/jpeg;base64,${this.photobyte}`,"PNG",522,40,55,55);else{let le=yield this.genk.fetchBase64Image(this.genk.defaultImg);g.addImage(le,"PNG",522,40,55,55)}g.setFontSize(10),g.setTextColor("rgb(0, 0, 0)"),g.setFont("","","600");let R=g.splitTextToSize(this.myschool?.address??"",400);g.text(R,U/2,48,{align:"center"}),g.setFont("","","500"),g.text("Email: "+this.myschool?.email,U/2,60,{align:"center"}),g.setFont("","","500"),g.text("Phone: "+this.myschool?.phoneOne,U/2,74,{align:"center"}),g.setFont("","","500"),g.text("website: "+this.myschool?.website,U/2,88,{align:"center"}),g.setDrawColor(36,91,143),g.setLineWidth(2),g.line(20,100,580,100)}else{g.setFont("Trebuchet MS","normal","900"),g.setTextColor("rgb(36, 91, 143)"),g.setFontSize(20),g.text(this.myschool?.schoolName??"",U/2,30,{align:"center"}),this.genk.logoString&&g.addImage(this.genk.logoString,"PNG",270,40,55,55),this.genk.signatureString&&g.addImage(this.genk.signatureString,"PNG",500,695,70,55),g.setFontSize(10),g.setTextColor("rgb(0, 0, 0)"),g.setFont("","","700"),g.text("Postal Address:",20,60),g.setFont("","","500");let R=g.splitTextToSize(this.myschool?.address??"",220);g.text(R,20,73),g.setFont("","","700"),g.text("Email:",380,60),g.setFont("","","500"),g.text(this.myschool?.email??"",418,60),g.setFont("","","700"),g.text("Phone:",380,74),g.setFont("","","500"),g.text(this.myschool?.phoneOne??"",418,74),g.setFont("","","700"),g.text("website:",380,88),g.setFont("","","500"),g.text(this.myschool?.website??"",424,88),g.setDrawColor(36,91,143),g.setLineWidth(2),g.line(20,100,580,100)}g.setFont("","","700"),g.text("STUDENTS NAME:",20,120),g.setFont("","","500"),g.text(d.trim(),113,120),g.setFont("","","700"),g.text("CLASS:",20,132),g.setFont("","","500"),g.text(c??"",113,132),g.setFont("","","700"),g.text("NO. IN CLASS:",20,144),g.setFont("","","500"),g.text(this.noInClass.toString(),113,144),g.setFont("","","700"),g.text("AVERAGE SCORE:",20,156),g.setFont("","","500"),g.text(e.toString(),113,156),g.setFont("","","700"),g.text("POSITION IN CLASS:",20,168),g.setFont("","","500"),g.text(i.toString(),113,168),g.setFont("","","700"),g.text("TERM:",380,120),g.setFont("","","500"),g.text(this.currentTerm,460,120),g.setFont("","","700"),g.text("SESSION:",380,132),g.setFont("","","500"),g.text(this.currentSession,460,132),g.setFont("","","700"),g.text("ADMISSION NO.:",380,144),g.setFont("","","500"),g.text(m??"",460,144),g.setFont("","","700"),g.text("NEXT TERM BEGINS:",380,156),g.setFont("","","500"),g.text("",460,156),g.setFontSize(12),g.setFont("","","700"),g.text("REPORT SHEET FOR JUNIOR AND SENIOR SECONDARY",U/2,190,{align:"center"});let O=this.caSetupData,ee=["Subject",...Object.values(O),"Total Score","Grade","Remark","Position","Lowest Score","Highest Score","Average"],Z=t;(0,Lt.default)(g,{head:[ee],body:t,styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:200,margin:{top:150,left:20,bottom:70}}),g.setFontSize(10),(0,Lt.default)(g,{html:"#mykey",styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:620,margin:{top:150,left:20,bottom:30}}),g.setFontSize(8),g.setFont("","","700");let Se=g.splitTextToSize("Form Teacher's Comment:",100);g.text(Se,20,700),g.setFont("","","500"),g.setTextColor("rgb(36, 91, 143)");let ve=g.splitTextToSize(S??"",370);g.text(ve,119,700),g.setTextColor("rgb(0, 0, 0)"),g.setFont("","","700");let we=g.splitTextToSize("Principal's Comment:",100);g.text(we,20,730),g.setFont("","","500"),g.setTextColor("rgb(36, 91, 143)");let ye=g.splitTextToSize(b??"",370);g.text(ye,103,730),this.goo=this.goo+1,this.downloadCount=this.downloadCount+1;let V=g.output("blob");this.pdfFolders.file(d.split(" ").join("_")+"_"+this.goo+".pdf",V)})}addLogo(){this.sch.getSchoolLogo(this.myschool.id).subscribe(e=>{let i=this.genk.getLogoMediaBase64(e,e.type)})}addSignature(){this.sch.obtainSignature(this.currentSessionId,this.currentTerm).subscribe(e=>{let i=this.genk.getMediaBase64(e,e.type)})}getResultsAverageByClass(){return H(this,null,function*(){this.sch.getResultsAverageByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>H(this,null,function*(){this.resultviewlist=e,this.startDownloadModal();for(let d=0;d<this.resultviewlist.length;d++){let c=this.resultComment.filter(b=>b.studentId==this.resultviewlist[d].studentId)[0];this.photoByteslist.filter(b=>b.studentId==this.resultviewlist[d].studentId).length>0&&(this.photobyte=this.photoByteslist.filter(b=>b.studentId==this.resultviewlist[d].studentId)[0].passport);let m=this.resultlist.filter(b=>b.studentId==this.resultviewlist[d].studentId)[0].result,S=[];m.forEach(b=>{let g=[];g.push(b.subject),Object.keys(this.caSetupData).forEach(y=>{g.push(b[y.toLowerCase()])}),g.push(b.totalScore),g.push(b.grade),g.push(b.remark),g.push(b.position),g.push(b.lowestScore),g.push(b.highestScore),g.push(b.average),S.push(g)}),this.convertToPDF(this.resultviewlist[d].average,this.genk.formatPosition(d+1),S,this.resultviewlist[d].studentName,this.resultviewlist[d].classes,this.resultviewlist[d].admissionNo,c?.formTeacherComment,c?.principalComment)}let i=yield this.zip.generateAsync({type:"blob"}),t=document.createElement("a");t.href=URL.createObjectURL(i),t.download=this.myschool.schoolName+"_Results.zip",t.click()}))})}startDownloadModal(){let e;fe.default.fire({title:"Student Results Downloading!",html:"<b></b> Results downloaded....",didOpen:()=>{fe.default.showLoading();let i=fe.default.getPopup().querySelector("b");i.textContent=`${this.downloadCount}`,this.downloadCount==this.resultviewlist.length&&(fe.default.close(),window.history.back())}}).then(i=>{i.dismiss===fe.default.DismissReason.timer&&console.log("I was closed by the timer")})}startProcessingModal(){let e;fe.default.fire({title:"Processing Result Data...",didOpen:()=>{fe.default.showLoading(),e=setInterval(()=>{this.resultviewlist.length>0&&fe.default.close()},100)},willClose:()=>{clearInterval(e)}}).then(i=>{i.dismiss===fe.default.DismissReason.timer&&console.log("I was closed by the timer")})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(G),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:88,vars:13,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[2,"text-align","end","margin","10px 30px"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],["prin",""],[1,"card-body","p-12"],[2,"font-family","'Poppins-Medium'"],[2,"text-align","center","margin-bottom","20px"],[2,"font-size","39px","color","rgb(36, 91, 143)","font-weight","900"],[2,"display","flex","justify-content","space-between","font-size","16px"],[1,"col-4"],[2,"font-weight","600"],[1,"col-4","text-center"],[2,"object-fit","cover","height","100px","width","100px","border-radius","100%",3,"src"],[2,"height","6px","background-color","rgb(36, 91, 143)","margin-top","30px"],[2,"display","flex","justify-content","space-between","font-size","17px"],[2,"text-align","center","margin-top","10px"],[2,"margin","50px 0 30px 0"],["id","mykey",2,"width","100%","border","1px solid black","border-collapse","collapse"],[2,"border","1px solid black","border-collapse","collapse","width","200px","text-align","center","padding","10px 0"],[2,"border","1px solid black","border-collapse","collapse","padding","10px 10px"],[4,"ngFor","ngForOf"],[2,"border","1px solid black","border-collapse","collapse","width","200px","text-align","center","padding","5px 0"],[2,"border","1px solid black","border-collapse","collapse","padding","5px 10px"]],template:function(i,t){if(i&1&&(n(0,"div",0)(1,"div",1),f(2,"div",2),n(3,"div",3)(4,"div",4)(5,"div",5,6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"span",10),r(11),s()(),n(12,"div",11)(13,"div",12)(14,"span",13),r(15,"Postal Address:"),s(),f(16,"br"),n(17,"span"),r(18),s()(),n(19,"div",14),f(20,"img",15),s(),n(21,"div",12)(22,"span",13),r(23,"Email: "),s(),n(24,"span"),r(25),s(),f(26,"br"),n(27,"span",13),r(28,"Phone: "),s(),n(29,"span"),r(30),s(),f(31,"br"),n(32,"span",13),r(33,"website: "),s(),n(34,"span"),r(35),s()()(),f(36,"div",16),n(37,"div",17)(38,"div")(39,"span",13),r(40,"STUDENTS NAME: "),s(),n(41,"span"),r(42),s(),f(43,"br"),n(44,"span",13),r(45,"CLASS NAME: "),s(),n(46,"span"),r(47),s(),f(48,"br"),n(49,"span",13),r(50,"NO. IN CLASS: "),s(),n(51,"span"),r(52),s(),f(53,"br"),s(),n(54,"div",12)(55,"span",13),r(56,"TERM: "),s(),n(57,"span"),r(58),s(),f(59,"br"),n(60,"span",13),r(61,"SESSION: "),s(),n(62,"span"),r(63),s(),f(64,"br"),n(65,"span",13),r(66,"ADMISSION NO.: "),s(),n(67,"span"),r(68),s(),f(69,"br"),n(70,"span",13),r(71,"NEXT TERM BEGINS:"),s()()(),n(72,"div",18)(73,"h1"),r(74,"REPORT SHEET FOR JUNIOR AND SENIOR SECONDARY"),s()(),f(75,"div"),s(),n(76,"div",19)(77,"table",20)(78,"tr")(79,"th",21),r(80,"KEY TO GRADE:"),s(),n(81,"td",22),C(82,Wr,4,1,"span",23),s()(),n(83,"tr")(84,"th",24),r(85,"KEY TO RATINGS:"),s(),n(86,"td",25),r(87,"1 = Very Poor \xA0\xA0 2 = Poor \xA0\xA0 3 = Fair \xA0\xA0 4 = Good \xA0\xA0 5 = Excellent"),s()()()()()()()()()()),i&2){let d;l(11),p(t.myschool==null?null:t.myschool.schoolName),l(7),p(t.myschool==null?null:t.myschool.address),l(2),h("src",t.setImg(t.myschool==null?null:t.myschool.schoolLogo),oe),l(5),p(t.myschool==null?null:t.myschool.email),l(5),p(t.myschool==null?null:t.myschool.phoneOne),l(5),p(t.myschool==null?null:t.myschool.website),l(7),p((((d=t.studentobj==null?null:t.studentobj.surname)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.middleName)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.firstName)!==null&&d!==void 0?d:"")).trim()),l(5),p(t.studentobj==null?null:t.studentobj.class),l(5),p(t.noInClass),l(6),p(t.currentTerm),l(5),p(t.currentSession),l(5),p(t.studentobj==null?null:t.studentobj.admissionNo),l(14),h("ngForOf",t.gradescaletextlist)}},dependencies:[W],styles:["#customers[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px;font-size:9px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}.heitable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(186,187,190);padding:2px 5px}.resprint[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#1e90ff;color:#fff;border-radius:20px;box-shadow:1px 1px 3px #0000004d}.resprintdisabled[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#a0a3a6;color:#000;border-radius:20px;box-shadow:1px 1px 3px #0000004d}#customerslouismidterm[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerslouismidterm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:11px}#customerslouismidterm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;font-size:11px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}#customerstrail[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerstrail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:4px;font-size:10px}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customerstrail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-size:10px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}"]});let o=u;return o})();ke();var Bt=K(Pe()),xi=K(Nt()),ze=K(Te());function Gr(o,u){if(o&1&&(n(0,"span")(1,"span"),r(2),s(),r(3," \xA0\xA0 "),s()),o&2){let a=u.$implicit;l(2),p(a)}}var bi=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.activeRoute=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.resultviewlist=[],this.gradeScalelist=[],this.resArray=[],this.goo=0,this.resultComment=[],this.gradescaletextlist=[],this.downloadCount=0,this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.startProcessingModal(),this.genk.topdata="Dashboard",this.activeRoute.queryParams.subscribe(e=>{this.currentTerm=e.term,this.currentSessionId=e.currentSessionId,this.currentSession=e.currentSession,this.currentClassId=e.classId,this.currentClassName=e.className,this.zip=new xi.default,this.pdfFolders=this.zip.folder(this.currentClassName+"_Results")}),this.getSchool(),this.getNoInClass(),this.getCaSetupByClass(),this.getGradeScaleByClass(),this.getStudentResultComment()}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getSchool(){this.sch.getSchoolData().subscribe(e=>{this.myschool=e,this.addLogo(),this.addSignature()})}getNoInClass(){this.sch.getNoInClassId(this.currentClassId.toString()).subscribe(e=>{this.noInClass=e.count})}getResultsByStudent(){this.sch.getAnnualResultsPageAllSession(this.currentClassId,this.currentSessionId.toString()).subscribe(e=>{this.resultlist=e,this.getResultsAverageByClass()})}getStudentResultComment(){this.sch.getStudentResultCommentByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname,this.getResultsByStudent()})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e,this.gradescaletextlist.push(this.gradeScalelist[0].classLevel+":");let i;this.gradeScalelist.forEach(t=>{i=t.grade+" = "+t.remarks+" ("+t.begLimit+" - "+t.endLimit+")",this.gradescaletextlist.push(i)})})}convertToPDF(e,i,t,d,c,m,S,b){var g=new ae("p","pt","letter"),y=g.internal.pageSize.height||g.internal.pageSize.getHeight(),U=g.internal.pageSize.width||g.internal.pageSize.getWidth();g.setFont("Trebuchet MS","normal","900"),g.setTextColor("rgb(36, 91, 143)"),g.setFontSize(20),g.text(this.myschool?.schoolName??"",U/2,30,{align:"center"}),g.addImage(this.docimg,"PNG",270,40,55,55),g.addImage(this.signatureimg,"PNG",500,695,70,55),g.setFontSize(10),g.setTextColor("rgb(0, 0, 0)"),g.setFont("","","700"),g.text("Postal Address:",20,60),g.setFont("","","500");let O=g.splitTextToSize(this.myschool?.address??"",220);g.text(O,20,73),g.setFont("","","700"),g.text("Email:",380,60),g.setFont("","","500"),g.text(this.myschool?.email??"",418,60),g.setFont("","","700"),g.text("Phone:",380,74),g.setFont("","","500"),g.text(this.myschool?.phoneOne??"",418,74),g.setFont("","","700"),g.text("website:",380,88),g.setFont("","","500"),g.text(this.myschool?.website??"",424,88),g.setDrawColor(36,91,143),g.setLineWidth(2),g.line(20,100,580,100),g.setFontSize(8),g.setFont("","","700"),g.text("STUDENTS NAME:",20,120),g.setFont("","","500"),g.text(d.trim(),113,120),g.setFont("","","700"),g.text("CLASS:",20,132),g.setFont("","","500"),g.text(c??"",113,132),g.setFont("","","700"),g.text("NO. IN CLASS:",20,144),g.setFont("","","500"),g.text(this.noInClass.toString(),113,144),g.setFont("","","700"),g.text("AVERAGE SCORE:",20,156),g.setFont("","","500"),g.text(e.toString(),113,156),g.setFont("","","700"),g.text("POSITION IN CLASS:",20,168),g.setFont("","","500"),g.text(i.toString(),113,168),g.setFont("","","700"),g.text("TERM:",380,120),g.setFont("","","500"),g.text(this.currentTerm,460,120),g.setFont("","","700"),g.text("SESSION:",380,132),g.setFont("","","500"),g.text(this.currentSession,460,132),g.setFont("","","700"),g.text("ADMISSION NO.:",380,144),g.setFont("","","500"),g.text(m??"",460,144),g.setFont("","","700"),g.text("NEXT TERM BEGINS:",380,156),g.setFont("","","500"),g.text("",460,156),g.setFontSize(12),g.setFont("","","700"),g.text("REPORT SHEET FOR JUNIOR AND SENIOR SECONDARY",U/2,190,{align:"center"});let Y=this.caSetupData,ee=Object.values(Y),Z=["Subject","1st Term","2nd Term","3rd Term","Total","Annual","Grade","Remark","Position","Lowest Score","Highest Score","Average"],Se=t;(0,Bt.default)(g,{head:[Z],body:t,styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:200,margin:{top:150,left:20,bottom:70}}),g.setFontSize(10),(0,Bt.default)(g,{html:"#mykey",styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:620,margin:{top:150,left:20,bottom:30}}),g.setFontSize(8),g.setFont("","","700");let ve=g.splitTextToSize("Form Teacher's Comment:",100);g.text(ve,20,700),g.setFont("","","500"),g.setTextColor("rgb(36, 91, 143)");let we=g.splitTextToSize(S??"",370);g.text(we,119,700),g.setTextColor("rgb(0, 0, 0)"),g.setFont("","","700");let ye=g.splitTextToSize("Principal's Comment:",100);g.text(ye,20,730),g.setFont("","","500"),g.setTextColor("rgb(36, 91, 143)");let V=g.splitTextToSize(b??"",370);g.text(V,103,730),this.goo=this.goo+1,this.downloadCount=this.downloadCount+1;let R=g.output("blob");this.pdfFolders.file(d.split(" ").join("_")+"_"+this.goo+".pdf",R)}addLogo(){this.getBase64ImageFromUrl(this.genk.imgurl+"api/school/getSchoolLogo?"+new URLSearchParams({id:this.myschool.id})).then(e=>this.docimg=e).catch(e=>console.error(e))}addSignature(){this.getBase64ImageFromUrl(this.genk.imgurl+"api/school/getSchoolSig?"+new URLSearchParams({id:this.myschool.id})).then(e=>this.signatureimg=e).catch(e=>console.error(e))}getBase64ImageFromUrl(e){return H(this,null,function*(){var i=yield fetch(e);let t=yield i.text();var c=this.base64ToBlob(t,"image/png");return new Promise((m,S)=>{var b=new FileReader;b.addEventListener("load",function(){m(b.result)},!1),b.onerror=()=>S(this),b.readAsDataURL(c)})})}base64ToBlob(e,i=""){let t=atob(e),d=[];for(let m=0;m<t.length;m+=512){let S=t.slice(m,m+512),b=new Array(S.length);for(let y=0;y<S.length;y++)b[y]=S.charCodeAt(y);let g=new Uint8Array(b);d.push(g)}return new Blob(d,{type:i})}getResultsAverageByClass(){return H(this,null,function*(){this.sch.getAnnualResultsAverageByClass(this.currentClassId,this.currentSessionId.toString()).subscribe(e=>H(this,null,function*(){debugger;this.resultviewlist=e,this.startDownloadModal();for(let d=0;d<this.resultviewlist.length;d++){let c=this.resultComment.filter(b=>b.studentId==this.resultviewlist[d].studentId)[0],m=this.resultlist.filter(b=>b.studentId==this.resultviewlist[d].studentId)[0].result,S=[];m.forEach(b=>{let g=[];g.push(b.subject),g.push(b.firstTermTotalScore),g.push(b.secondTermTotalScore),g.push(b.thirdTermTotalScore),g.push(this.calTotal(b.firstTermTotalScore,b.secondTermTotalScore,b.thirdTermTotalScore)),g.push(this.calTotalAverage(b.firstTermTotalScore,b.secondTermTotalScore,b.thirdTermTotalScore)),g.push(this.calGrade(this.calTotalAverage(b.firstTermTotalScore,b.secondTermTotalScore,b.thirdTermTotalScore)).grade),g.push(this.calGrade(this.calTotalAverage(b.firstTermTotalScore,b.secondTermTotalScore,b.thirdTermTotalScore)).remark),g.push(b.position),g.push(Number(b.lowestScore).toFixed(1)),g.push(Number(b.highestScore).toFixed(1)),g.push(Number(b.average).toFixed(1)),S.push(g)}),this.convertToPDF(this.resultviewlist[d].average,this.genk.formatPosition(d+1),S,this.resultviewlist[d].studentName,this.resultviewlist[d].classes,this.resultviewlist[d].admissionNo,c?.formTeacherComment,c?.principalComment)}let i=yield this.zip.generateAsync({type:"blob"}),t=document.createElement("a");t.href=URL.createObjectURL(i),t.download=this.myschool.schoolName+"_Results.zip",t.click()}))})}startDownloadModal(){let e;ze.default.fire({title:"Student Results Downloading!",html:"<b></b> Results downloaded....",didOpen:()=>{ze.default.showLoading();let i=ze.default.getPopup().querySelector("b");i.textContent=`${this.downloadCount}`,this.downloadCount==this.resultviewlist.length&&(ze.default.close(),window.history.back())}}).then(i=>{i.dismiss===ze.default.DismissReason.timer&&console.log("I was closed by the timer")})}startProcessingModal(){let e;ze.default.fire({title:"Processing Result Data...",didOpen:()=>{ze.default.showLoading(),e=setInterval(()=>{this.resultviewlist.length>0&&ze.default.close()},100)},willClose:()=>{clearInterval(e)}}).then(i=>{i.dismiss===ze.default.DismissReason.timer&&console.log("I was closed by the timer")})}calTotal(e,i,t){return(e??0)+(i??0)+(t??0)}calTotalAverage(e,i,t){let d=(e??0)+(i??0)+(t??0),c=(e?1:0)+(i?1:0)+(t?1:0);return Number((d/c).toFixed(1))}calHighestAverage(e,i,t,d){let c=(e?1:0)+(i?1:0)+(t?1:0);return Number(d/c).toFixed(1)}calGrade(e){let i;return this.gradeScalelist.forEach(t=>{e>=t.begLimit&&e<=t.endLimit&&(i={grade:t.grade,remark:t.remarks})}),i||{grade:"i",remark:"Not Aplicable"}}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(G),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:88,vars:13,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[2,"text-align","end","margin","10px 30px"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],["prin",""],[1,"card-body","p-12"],[2,"font-family","'Poppins-Medium'"],[2,"text-align","center","margin-bottom","20px"],[2,"font-size","39px","color","rgb(36, 91, 143)","font-weight","900"],[2,"display","flex","justify-content","space-between","font-size","16px"],[1,"col-4"],[2,"font-weight","600"],[1,"col-4","text-center"],[2,"object-fit","cover","height","100px","width","100px","border-radius","100%",3,"src"],[2,"height","6px","background-color","rgb(36, 91, 143)","margin-top","30px"],[2,"display","flex","justify-content","space-between","font-size","17px"],[2,"text-align","center","margin-top","10px"],[2,"margin","50px 0 30px 0"],["id","mykey",2,"width","100%","border","1px solid black","border-collapse","collapse"],[2,"border","1px solid black","border-collapse","collapse","width","200px","text-align","center","padding","10px 0"],[2,"border","1px solid black","border-collapse","collapse","padding","10px 10px"],[4,"ngFor","ngForOf"],[2,"border","1px solid black","border-collapse","collapse","width","200px","text-align","center","padding","5px 0"],[2,"border","1px solid black","border-collapse","collapse","padding","5px 10px"]],template:function(i,t){if(i&1&&(n(0,"div",0)(1,"div",1),f(2,"div",2),n(3,"div",3)(4,"div",4)(5,"div",5,6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"span",10),r(11),s()(),n(12,"div",11)(13,"div",12)(14,"span",13),r(15,"Postal Address:"),s(),f(16,"br"),n(17,"span"),r(18),s()(),n(19,"div",14),f(20,"img",15),s(),n(21,"div",12)(22,"span",13),r(23,"Email: "),s(),n(24,"span"),r(25),s(),f(26,"br"),n(27,"span",13),r(28,"Phone: "),s(),n(29,"span"),r(30),s(),f(31,"br"),n(32,"span",13),r(33,"website: "),s(),n(34,"span"),r(35),s()()(),f(36,"div",16),n(37,"div",17)(38,"div")(39,"span",13),r(40,"STUDENTS NAME: "),s(),n(41,"span"),r(42),s(),f(43,"br"),n(44,"span",13),r(45,"CLASS NAME: "),s(),n(46,"span"),r(47),s(),f(48,"br"),n(49,"span",13),r(50,"NO. IN CLASS: "),s(),n(51,"span"),r(52),s(),f(53,"br"),s(),n(54,"div",12)(55,"span",13),r(56,"TERM: "),s(),n(57,"span"),r(58),s(),f(59,"br"),n(60,"span",13),r(61,"SESSION: "),s(),n(62,"span"),r(63),s(),f(64,"br"),n(65,"span",13),r(66,"ADMISSION NO.: "),s(),n(67,"span"),r(68),s(),f(69,"br"),n(70,"span",13),r(71,"NEXT TERM BEGINS:"),s()()(),n(72,"div",18)(73,"h1"),r(74,"REPORT SHEET FOR JUNIOR AND SENIOR SECONDARY"),s()(),f(75,"div"),s(),n(76,"div",19)(77,"table",20)(78,"tr")(79,"th",21),r(80,"KEY TO GRADE:"),s(),n(81,"td",22),C(82,Gr,4,1,"span",23),s()(),n(83,"tr")(84,"th",24),r(85,"KEY TO RATINGS:"),s(),n(86,"td",25),r(87,"1 = Very Poor \xA0\xA0 2 = Poor \xA0\xA0 3 = Fair \xA0\xA0 4 = Good \xA0\xA0 5 = Excellent"),s()()()()()()()()()()),i&2){let d;l(11),p(t.myschool==null?null:t.myschool.schoolName),l(7),p(t.myschool==null?null:t.myschool.address),l(2),h("src",t.setImg(t.myschool==null?null:t.myschool.schoolLogo),oe),l(5),p(t.myschool==null?null:t.myschool.email),l(5),p(t.myschool==null?null:t.myschool.phoneOne),l(5),p(t.myschool==null?null:t.myschool.website),l(7),p((((d=t.studentobj==null?null:t.studentobj.surname)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.middleName)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.firstName)!==null&&d!==void 0?d:"")).trim()),l(5),p(t.studentobj==null?null:t.studentobj.class),l(5),p(t.noInClass),l(6),p(t.currentTerm),l(5),p(t.currentSession),l(5),p(t.studentobj==null?null:t.studentobj.admissionNo),l(14),h("ngForOf",t.gradescaletextlist)}},dependencies:[W],styles:["#customers[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px;font-size:9px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}.heitable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(186,187,190);padding:2px 5px}.resprint[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#1e90ff;color:#fff;border-radius:20px;box-shadow:1px 1px 3px #0000004d}.resprintdisabled[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#a0a3a6;color:#000;border-radius:20px;box-shadow:1px 1px 3px #0000004d}#customerslouismidterm[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerslouismidterm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:11px}#customerslouismidterm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;font-size:11px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}#customerstrail[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerstrail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:4px;font-size:10px}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customerstrail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-size:10px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}"]});let o=u;return o})();var Ce=K(Te());function Ur(o,u){if(o&1&&(n(0,"option",40),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),I("",a.sessionName," ")}}function Hr(o,u){if(o&1&&(n(0,"option",40),r(1),s()),o&2){let a=u.$implicit;h("value",a),l(),I("",a," ")}}function Yr(o,u){if(o&1){let a=k();n(0,"div",41)(1,"label",42)(2,"input",43,44),v("change",function(){let t=w(a).$implicit,d=E(3),c=x();return T(c.setField(d.checked,t.key))}),s(),n(4,"span",45),r(5),s()()()}if(o&2){let a=u.$implicit,e=x();l(2),h("checked",e.isCheckAll),l(3),I(" ",a.value," ")}}var _i=(()=>{let u=class u{constructor(e,i,t,d){this.router=e,this.auth=i,this.sch=t,this.gen=d,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClassLevel=[],this.sessionlist=[],this.destroy=new Ee,this.publishedResult=[],this.isCheckAll=!0,this.calist=[],this.category=[],this.subjectList=[],this.loading=!1,this.scaleList=[],this.genk=d,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Process Midterm",this.getPublishedResult(),this.getClassLevels(),this.getSession(),this.getCurrentSession(),this.getSchoolCategory()}getClassLevels(){this.sch.getClassLevels().subscribe(e=>{this.schoolClassLevel=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getCaSetupByClass(){this.sch.testGetCaSetupByClass(this.selectedCategory).subscribe(e=>{this.caSetupData=e.systemname,this.dispalyCaSetupData=this.caSetupData,delete this.dispalyCaSetupData.Exam,this.caScoreData=e.score;for(let i in this.dispalyCaSetupData)this.dispalyCaSetupData.hasOwnProperty(i)&&this.calist.push({type:i,name:this.dispalyCaSetupData[i],max:this.caScoreData[i]})})}setField(e,i){e?this.calist.push({type:i,name:this.dispalyCaSetupData[i],max:this.caScoreData[i]}):this.calist=this.calist.filter(t=>t.type!=i),console.log(this.calist)}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getPublishedResult(){this.sch.getPublishedResult().subscribe(e=>{this.publishedResult=e})}createPublishByLevel(){debugger;this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName;let e=this.schoolClassLevel.filter(i=>i.id==this.currentLevelId)[0];this.currentLevel=this.schoolClassLevel.filter(i=>i.id==this.currentLevelId)[0].name,Ce.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{Ce.default.showLoading(),this.sch.createPublishByLevel(this.currentLevelId.toString(),this.currentLevel,this.currentSessionId.toString(),this.currentSession,this.currentTerm).pipe(pe(this.destroy)).subscribe(i=>{this.getPublishedResult(),Ce.default.close()})}}).then(i=>{Ce.default.fire({icon:"success",title:"Result Entry updated successfully!.",showConfirmButton:!1,timer:2e3})})}deletePublishByLevel(e){Ce.default.fire({title:"Do you want to unpublish this result?",showCancelButton:!0,confirmButtonText:"Yes, Delete"}).then(i=>{i.isConfirmed&&this.sch.deletePublishByLevel(e.toString()).subscribe(t=>{this.getPublishedResult(),Ce.default.fire("Data deleted","","success")})})}getGradeScale(){this.sch.getGradeScale().subscribe(e=>{this.subjectList=e})}saveEdit(e){let i=this.subjectList.filter(t=>t.id==e)[0];this.lowerlimt=i.begLimit,this.upperlimit=i.endLimit,this.grade=i.grade,this.remarks=i.remarks,this.gradeScaleId=i.id}changeGradeScale(e){debugger;this.classlevel=e,this.scaleList=this.subjectList.filter(i=>i.classLevel==e)}editGradeScale(){this.loading=!0;let e={id:this.gradeScaleId,begLimit:this.lowerlimt,endLimit:this.upperlimit,grade:this.grade,remarks:this.remarks,classLevel:this.classlevel};Ce.default.fire({title:"Saving Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{Ce.default.showLoading(),this.sch.updateGradeScale(e).pipe(pe(this.destroy)).subscribe(i=>{Ce.default.close(),this.loading=!1,this.getGradeScale()})}}).then(i=>{Ce.default.fire({icon:"success",title:"Grade Scale saved successfully!.",showConfirmButton:!1,timer:2e3})})}saveGradeScale(){this.loading=!0;let e={begLimit:this.lowerlimt,endLimit:this.upperlimit,grade:this.grade,remarks:this.remarks,classLevel:this.classlevel};Ce.default.fire({title:"Saving Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{Ce.default.showLoading(),this.sch.saveGradeScale(e).pipe(pe(this.destroy)).subscribe(i=>{Ce.default.close(),this.loading=!1,this.getGradeScale()})}}).then(i=>{Ce.default.fire({icon:"success",title:"Grade Scale saved successfully!.",showConfirmButton:!1,timer:2e3})})}deleteGradeScale(e){this.sch.deleteGradeScale(e.toString()).subscribe(i=>{this.getGradeScale(),Ce.default.fire({icon:"success",title:"Grade Scale deleted successfully!.",showConfirmButton:!1,timer:2e3})})}Submit(){this.loading=!0,this.sch.saveMidtermSettings(this.calist,this.currentSessionId,this.currentTerm,this.selectedCategory).pipe(pe(this.destroy)).subscribe(e=>{this.loading=!1,Ce.default.fire({icon:"success",title:"Midterm Results Published successfully!.",showConfirmButton:!1,timer:2e3})})}getSchoolCategory(){this.sch.getSchoolCategory().subscribe(e=>{this.category=e})}loadCA(){this.getCaSetupByClass()}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:70,vars:9,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-5","mb-xl-10"],["role","button","data-bs-toggle","collapse","data-bs-target","#kt_account_connected_accounts","aria-expanded","true","aria-controls","kt_account_connected_accounts",1,"card-header","border-0","cursor-pointer"],[1,"card-title","m-0"],[1,"fw-bolder","m-0"],["id","kt_account_settings_connected_accounts",1,"collapse","show"],[1,"card-body","border-top","p-9"],["action","","id","kt_invoice_form"],[1,"mb-0"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","clasis","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],["value","ANNUAL"],["name","categ","aria-label","Select Term",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],[1,"fv-row","mb-10","text-end"],["type","button",1,"btn","btn-primary","mt-12",2,"padding","12px 70px",3,"click"],[1,"d-flex","col-12","flex-column","fv-row","rounded-3","p-5","border","border-dashed","border-gray-300"],[1,"fs-5","fw-bold","form-label","mb-5"],["data-bs-toggle","popover","data-bs-trigger","hover focus","data-bs-html","true","data-bs-delay-hide","1000","data-bs-content","Thresholds help manage risk by limiting the unpaid usage balance a customer can accrue. Thresholds only measure and bill for metered usage (including discounts but excluding tax). <a href='#'>Learn more</a>.","data-kt-initialized","1",1,"ms-2","cursor-pointer"],[1,"ki-duotone","ki-information","fs-7"],[1,"path1"],[1,"path2"],[1,"path3"],["class","d-flex mb-3",4,"ngFor","ngForOf"],[2,"text-align","end"],["type","button",1,"btn","btn-info","mt-3",3,"disabled","click"],[3,"value"],[1,"d-flex","mb-3"],[1,"form-check","form-check-sm","me-6","form-check-custom","form-check-solid"],["type","checkbox",1,"form-check-input",3,"checked","change"],["pho",""],[1,"form-check-label","fw-bold","fs-6"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),r(8,"Publish Assessment Result"),s()()(),n(9,"div",8)(10,"div",9)(11,"form",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"label",15)(17,"span",16),r(18,"Select Session"),s()(),n(19,"div",17)(20,"select",18),M("ngModelChange",function(c){return A(t.currentSessionId,c)||(t.currentSessionId=c),c}),n(21,"option",19),r(22,"Select Session..."),s(),C(23,Ur,2,2,"option",20),s()()()(),n(24,"div",13)(25,"div",14)(26,"label",15)(27,"span",16),r(28,"Term"),s()(),n(29,"div",17)(30,"select",21),M("ngModelChange",function(c){return A(t.currentTerm,c)||(t.currentTerm=c),c}),n(31,"option",22),r(32,"Select term"),s(),n(33,"option",23),r(34,"First"),s(),n(35,"option",24),r(36,"Second"),s(),n(37,"option",25),r(38,"Third"),s(),n(39,"option",26),r(40,"Annual"),s()()()()(),n(41,"div",13)(42,"div",14)(43,"label",15)(44,"span",16),r(45,"Category"),s()(),n(46,"div",17)(47,"select",27),M("ngModelChange",function(c){return A(t.selectedCategory,c)||(t.selectedCategory=c),c}),n(48,"option",19),r(49,"Select Category"),s(),C(50,Hr,2,2,"option",20),s()()()(),n(51,"div",13)(52,"div",28)(53,"div",17)(54,"button",29),v("click",function(){return t.loadCA()}),r(55,"Load CA"),s()()()()(),n(56,"div",30)(57,"div",31),r(58," Result Components "),n(59,"span",32)(60,"i",33),f(61,"span",34)(62,"span",35)(63,"span",36),s()()(),C(64,Yr,6,2,"div",37),Ie(65,"keyvalue"),s()(),n(66,"div",38)(67,"div")(68,"button",39),v("click",function(){return t.Submit()}),r(69,"Publish Assessment Result"),s()()()()()()()()()()()),i&2&&(l(20),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(17),N("ngModel",t.selectedCategory),l(3),h("ngForOf",t.category),l(14),h("ngForOf",Oe(65,7,t.dispalyCaSetupData)),l(4),h("disabled",t.loading))},dependencies:[W,q,ne,se,ie,te,$,ge,X,$t],encapsulation:2});let o=u;return o})();ke();var rt=K(Pe());function $r(o,u){if(o&1&&(n(0,"tr",48)(1,"td"),r(2),s(),n(3,"td"),r(4),s(),n(5,"td"),r(6),s(),n(7,"td"),r(8),s(),n(9,"td"),r(10),s(),n(11,"td"),r(12),s(),n(13,"td"),r(14),s(),n(15,"td"),r(16),s(),n(17,"td"),r(18),s(),n(19,"td"),r(20),s(),n(21,"td"),r(22),s(),n(23,"td"),r(24),s()()),o&2){let a=u.$implicit,e=x(),i,t,d,c,m,S,b,g;l(2),p(a.subject),l(2),p((i=a.firstTermTotalScore==null?null:a.firstTermTotalScore.toFixed(1))!==null&&i!==void 0?i:""),l(2),p((t=a.secondTermTotalScore==null?null:a.secondTermTotalScore.toFixed(1))!==null&&t!==void 0?t:""),l(2),p((d=a.thirdTermTotalScore==null?null:a.thirdTermTotalScore.toFixed(1))!==null&&d!==void 0?d:""),l(2),p((c=e.calTotal(a.firstTermTotalScore,a.secondTermTotalScore,a.thirdTermTotalScore))==null?null:c.toFixed(1)),l(2),p(e.calTotalAverage(a.firstTermTotalScore,a.secondTermTotalScore,a.thirdTermTotalScore)),l(2),p(e.calGrade(e.calTotalAverage(a.firstTermTotalScore,a.secondTermTotalScore,a.thirdTermTotalScore)).grade),l(2),p(e.calGrade(e.calTotalAverage(a.firstTermTotalScore,a.secondTermTotalScore,a.thirdTermTotalScore)).remark),l(2),p((m=a.position)!==null&&m!==void 0?m:""),l(2),p((S=a.lowestScore==null?null:a.lowestScore.toFixed(1))!==null&&S!==void 0?S:""),l(2),p((b=a.highestScore==null?null:a.highestScore.toFixed(1))!==null&&b!==void 0?b:""),l(2),p((g=a.average==null?null:a.average.toFixed(1))!==null&&g!==void 0?g:"")}}function Xr(o,u){if(o&1&&(n(0,"tr",49)(1,"td"),r(2),s(),n(3,"td"),r(4),s()()),o&2){let a=u.$implicit;l(2),p(a.skill),l(2),p(a.score)}}function qr(o,u){if(o&1&&(n(0,"tr",49)(1,"td"),r(2),s(),n(3,"td"),r(4),s()()),o&2){let a=u.$implicit;l(2),p(a.skill),l(2),p(a.score)}}var Kr=o=>({color:o});function Jr(o,u){if(o&1&&(n(0,"tr")(1,"td",50),r(2),s(),n(3,"td"),r(4),s(),n(5,"td"),r(6),s(),n(7,"td"),r(8),s(),n(9,"td"),r(10),s()()),o&2){let a=u.$implicit,e=x();l(),h("ngStyle",J(6,Kr,a.color.toString())),l(),p(a.color),l(2),p(a.grade),l(2),I("",a.begLimit+" - "+e.floorNum(a.endLimit)," "),l(2),p(e.over60Num(a.begLimit)+" - "+e.over60Num(a.endLimit)),l(2),p(e.over40Num(a.begLimit)+" - "+e.over40Num(a.endLimit))}}var Ci=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.activeRoute=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.gradeScalelist=[],this.psycomotorlist=[],this.psycomotorlist2=[],this.grademinimumlist=[],this.grademinimumlistOver60=[],this.grademinimumlistOver40=[],this.mySchoolClasses=[],this.gradescaletextlist=[],this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Dashboard",this.studentId=this.activeRoute.snapshot.params.id,this.activeRoute.queryParams.subscribe(e=>{this.currentTerm=e.term,this.currentSessionId=e.currentSessionId,this.currentSession=e.currentSession,this.currentClassId=e.classId,this.average=e.average,this.position=e.position}),this.getSchool(),this.getStudent(),this.getStudentTotal(),this.getClassNames(),this.getResultsByStudent(),this.getCaSetupByClass(),this.getGradeScaleByClass(),this.getPsycomotorByStudent(),this.getStudentResultComment(),this.getNextTerm()}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}calTotal(e,i,t){return(e??0)+(i??0)+(t??0)}calTotalAverage(e,i,t){let d=(e??0)+(i??0)+(t??0),c=(e?1:0)+(i?1:0)+(t?1:0);return Number(d/c).toFixed(1)}calHighestAverage(e,i,t,d){let c=(e?1:0)+(i?1:0)+(t?1:0);return Number(d/c).toFixed(1)}calGrade(e){let i;return this.gradeScalelist.forEach(t=>{e>=t.begLimit&&e<=t.endLimit&&(i={grade:t.grade,remark:t.remarks})}),i||{grade:"i",remark:"Not Aplicable"}}getSchool(){this.sch.getSchoolData().subscribe(e=>{this.myschool=e})}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.mySchoolClasses=e,this.getNoInClass()})}getStudent(){this.sch.getStudentById(this.studentId.toString()).subscribe(e=>{this.studentobj=e,this.addLogo(),this.addSignature()})}getNoInClass(){this.sch.getNoInClassByAnnualSession(this.currentClassId.toString(),this.currentSessionId,this.currentTerm).subscribe(e=>{this.noInClass=e.count,this.className=this.mySchoolClasses.filter(i=>i.id==Number(this.currentClassId))[0].class})}getStudentTotal(){this.sch.getStudentAnnualTotal(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.studentTotal=e.total})}getNextTerm(){this.sch.getNextTerm(this.currentSessionId.toString(),"FIRST").subscribe(e=>{e&&(this.nextResumptionDate=e.date)})}getResultsByStudent(){this.sch.getAnnualResultsPageSession(this.currentClassId,this.currentSessionId.toString(),this.studentId).subscribe(e=>{this.resultlist=e})}getStudentResultComment(){this.sch.getStudentResultComment(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e,this.gradeScalelist.forEach(i=>{i.color=this.gradeColor(i.grade)});debugger;this.grademinimumlist.push({color:"Green",remark:this.gradeScalelist.filter(i=>i.color=="Green")[this.gradeScalelist.filter(i=>i.color=="Green").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Green")[this.gradeScalelist.filter(i=>i.color=="Green").length-1].begLimit}),this.grademinimumlist.push({color:"Black",remark:this.gradeScalelist.filter(i=>i.color=="Black")[this.gradeScalelist.filter(i=>i.color=="Black").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Black")[this.gradeScalelist.filter(i=>i.color=="Black").length-1].begLimit}),this.grademinimumlist.push({color:"Blue",remark:this.gradeScalelist.filter(i=>i.color=="Blue")[this.gradeScalelist.filter(i=>i.color=="Blue").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Blue")[this.gradeScalelist.filter(i=>i.color=="Blue").length-1].begLimit}),this.grademinimumlist.push({color:"Red",remark:this.gradeScalelist.filter(i=>i.color=="Red")[this.gradeScalelist.filter(i=>i.color=="Red").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Red")[this.gradeScalelist.filter(i=>i.color=="Red").length-1].begLimit}),this.grademinimumlistOver60.push({color:"Green",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Green")[this.gradeScalelist.filter(i=>i.color=="Green").length-1].begLimit)}),this.grademinimumlistOver60.push({color:"Black",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Black")[this.gradeScalelist.filter(i=>i.color=="Black").length-1].begLimit)}),this.grademinimumlistOver60.push({color:"Blue",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Blue")[this.gradeScalelist.filter(i=>i.color=="Blue").length-1].begLimit)}),this.grademinimumlistOver60.push({color:"Red",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Red")[this.gradeScalelist.filter(i=>i.color=="Red").length-1].begLimit)}),console.log(this.grademinimumlist)})}getPsycomotorByStudent(){this.sch.getPsycomotorByStudent(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.psycomotorlist=e.slice(0,Math.round(e.length/2)),this.psycomotorlist2=e.slice(Math.round(e.length/2),e.length),e.length<1&&this.sch.getPsycomotorByList(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(i=>{var t=i;let d=[];for(let c=0;c<t.length;c++)d[c]={skill:t[c],score:""};debugger;this.psycomotorlist=d.slice(0,Math.round(d.length/2)),this.psycomotorlist2=d.slice(Math.round(d.length/2),d.length)})})}gradeColor(e){return e.includes("A")||e.includes("B")?"Black":e.includes("C")?"Green":e.includes("D")||e.includes("E")?"Blue":e.includes("F")?"Red":"Black"}convertToPDF(e){var i=new ae("p","pt","letter"),t=i.internal.pageSize.height||i.internal.pageSize.getHeight(),d=i.internal.pageSize.width||i.internal.pageSize.getWidth();i.setFont("Trebuchet MS","normal","900"),i.setTextColor("rgb(36, 91, 143)"),i.setFontSize(20),i.text(this.myschool?.schoolName??"",d/2,30,{align:"center"}),this.genk.logoString&&i.addImage(this.genk.logoString,"PNG",270,40,55,55),this.genk.signatureString&&i.addImage(this.genk.signatureString,"PNG",495,705,70,55),i.setFontSize(10),i.setTextColor("rgb(0, 0, 0)"),i.setFont("","","700"),i.text("Postal Address:",20,60),i.setFont("","","500");let c=i.splitTextToSize(this.myschool?.address??"",220);if(i.text(c,20,73),i.setFont("","","700"),i.text("Email:",380,60),i.setFont("","","500"),i.text(this.myschool?.email??"",418,60),i.setFont("","","700"),i.text("Phone:",380,74),i.setFont("","","500"),i.text(this.myschool?.phoneOne??"",418,74),i.setFont("","","700"),i.text("website:",380,88),i.setFont("","","500"),i.text(this.myschool?.website??"",424,88),i.setDrawColor(36,91,143),i.setLineWidth(2),i.line(20,100,580,100),i.setFontSize(8),i.setFont("","","700"),i.text("STUDENTS NAME:",20,120),i.setFont("","","500"),i.text(((this.studentobj?.surname??"")+" "+(this.studentobj?.middleName??"")+" "+(this.studentobj?.firstName??"")).trim(),113,120),i.setFont("","","700"),i.text("CLASS:",20,132),i.setFont("","","500"),i.text(this.className??"",113,132),i.setFont("","","700"),i.text("NO. IN CLASS:",20,144),i.setFont("","","500"),i.text(this.noInClass.toString(),113,144),i.setFont("","","700"),i.text("AVERAGE SCORE:",20,156),i.setFont("","","500"),i.text(this.average.toString(),113,156),i.setFont("","","700"),i.text("TOTAL SCORE:",20,168),i.setFont("","","500"),i.text(this.studentTotal.toFixed(1).toString(),113,168),i.setFont("","","700"),i.text("POSITION IN CLASS:",20,180),i.setFont("","","500"),i.text(this.position.toString(),113,180),i.setFont("","","700"),i.text("TERM:",380,120),i.setFont("","","500"),i.text(this.currentTerm,460,120),i.setFont("","","700"),i.text("SESSION:",380,132),i.setFont("","","500"),i.text(this.currentSession,460,132),i.setFont("","","700"),i.text("ADMISSION NO.:",380,144),i.setFont("","","500"),i.text(this.studentobj?.admissionNo??"",460,144),i.setFont("","","700"),i.setFontSize(7),i.text("NEXT TERM BEGINS:",380,156),i.setFont("","","500"),this.nextResumptionDate){let Y=new Date(this.nextResumptionDate),ee=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(Y);i.setFontSize(8),i.text(ee,460,156)}i.setFont("","","700"),i.text("HOUSE:",380,168),i.setFont("","","500"),i.text("",460,168),i.setFont("","","700"),i.text("NO OF TIMES PRESENT:",380,180),i.setFont("","","500"),i.text("",460,180),i.setFontSize(12),i.setFont("","","700"),i.text("CONTINUOUS ASSESSMENT DOSSIER FOR JUNIOR SECONDARY SCHOOL",d/2,200,{align:"center"}),(0,rt.default)(i,{html:"#customers",useCss:!0,styles:{font:"20px",lineWidth:.2,fontSize:6},headStyles:{lineColor:"white"},startY:206,margin:{top:150,left:20,bottom:70}}),i.setFontSize(10),(0,rt.default)(i,{html:"#ireg",useCss:!0,styles:{font:"6px",lineColor:"#808080",lineWidth:.2,fontSize:7,halign:"center"},headStyles:{lineColor:"white",fontSize:8,fontStyle:"bold"},startY:403,margin:{top:150,left:20,bottom:30}}),(0,rt.default)(i,{html:"#grade",useCss:!0,styles:{font:"8px",lineWidth:.2,fontSize:6},startY:472,margin:{top:150,left:300,bottom:30}}),i.setFont("","","700"),i.setFontSize(9),i.text("PSYCOMOTOR DOMAIN",65,464),i.setFont("","","700"),i.setFontSize(9),i.text("COGNITIVE DOMAIN RATING",355,464),(0,rt.default)(i,{html:"#psyco",useCss:!0,styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:6},headStyles:{lineColor:"white"},startY:472,tableWidth:130,margin:{top:150,left:20,bottom:30}}),(0,rt.default)(i,{html:"#psyco2",useCss:!0,styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:6},headStyles:{lineColor:"white"},startY:472,tableWidth:130,margin:{top:150,left:150,bottom:30}}),(0,rt.default)(i,{html:"#mykey",useCss:!0,styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:6},headStyles:{lineColor:"white"},startY:606,tableWidth:260,margin:{top:150,left:20,bottom:30}}),i.setTextColor("rgb(36, 91, 143)"),i.setFontSize(9),i.setFont("","","600");let m=i.splitTextToSize("House Mistress's Comment:",150);i.text(m,20,650),i.setFont("","","200"),i.setTextColor("rgb(0, 0, 10)");let S=i.splitTextToSize(this.resultComment?.formTeacherComment??"",370);i.text(S,176,650),i.setDrawColor(0,0,0),i.setLineWidth(1),i.line(170,653,580,653),i.setFontSize(9),i.setFont("","","600"),i.setTextColor("rgb(36, 91, 143)");let b=i.splitTextToSize("Form Teacher's Comment:",100);i.text(b,20,670),i.setFont("","","200"),i.setTextColor("rgb(0, 0, 0)");let g=i.splitTextToSize(this.resultComment?.formTeacherComment??"",370);i.text(g,176,670),i.setDrawColor(0,0,0),i.setLineWidth(1),i.line(170,673,580,673),i.setFontSize(9),i.setFont("","","600"),i.setTextColor("rgb(36, 91, 143)");let y=i.splitTextToSize("Principal's Comment:",100);i.text(y,20,690),i.setFont("","","200"),i.setTextColor("rgb(0, 0, 0)");let U=i.splitTextToSize(this.resultComment?.principalComment??"",370);i.text(U,176,690),i.setDrawColor(0,0,0),i.setLineWidth(1),i.line(170,693,580,693),i.setTextColor("rgb(36, 91, 143)"),i.setFontSize(9),i.setFont("","","600");let O=i.splitTextToSize("Principal's Signature Date & Stamp:",80);i.text(O,415,730),i.save("My_Results")}addLogo(){this.sch.getSchoolLogo(this.myschool.id).subscribe(e=>{let i=this.genk.getLogoMediaBase64(e,e.type);console.log(this.docimg)})}addSignature(){this.sch.obtainSignature(this.currentSessionId,this.currentTerm).subscribe(e=>{let i=this.genk.getMediaBase64(e,e.type);console.log(this.signatureimg)})}getBase64ImageFromUrl(e){return H(this,null,function*(){var i=yield fetch(e);let t=yield i.text();var c=this.base64ToBlob(t,"image/png");return new Promise((m,S)=>{var b=new FileReader;b.addEventListener("load",function(){m(b.result)},!1),b.onerror=()=>S(this),b.readAsDataURL(c)})})}base64ToBlob(e,i=""){let t=atob(e),d=[];for(let m=0;m<t.length;m+=512){let S=t.slice(m,m+512),b=new Array(S.length);for(let y=0;y<S.length;y++)b[y]=S.charCodeAt(y);let g=new Uint8Array(b);d.push(g)}return new Blob(d,{type:i})}floorNum(e){return Math.floor(e)}over60Num(e){let i=0,d=(e/100*60).toString().split(".");return d.length>1?i=+(d[0]+"."+d[1][0]):i=Number(d[0]),i}over40Num(e){let i=0,d=(e/100*40).toString().split(".");return d.length>1?i=+(d[0]+"."+d[1][0]):i=Number(d[0]),i}getScoreColor(e,i){if(i==100){if(e>=this.grademinimumlist[0].minscore)return this.grademinimumlist[0].color;if(e>=this.grademinimumlist[1].minscore&&e<this.grademinimumlist[0].minscore)return this.grademinimumlist[1].color;if(e>=this.grademinimumlist[2].minscore&&e<this.grademinimumlist[1].minscore)return this.grademinimumlist[2].color;if(e>=this.grademinimumlist[3].minscore&&e<this.grademinimumlist[2].minscore)return this.grademinimumlist[3].color}else if(i==60){if(e>=this.grademinimumlistOver60[0].minscore)return this.grademinimumlistOver60[0].color;if(e>=this.grademinimumlistOver60[1].minscore&&e<this.grademinimumlistOver60[0].minscore)return this.grademinimumlistOver60[1].color;if(e>=this.grademinimumlistOver60[2].minscore&&e<this.grademinimumlistOver60[1].minscore)return this.grademinimumlistOver60[2].color;if(e>=this.grademinimumlistOver60[3].minscore&&e<this.grademinimumlistOver60[2].minscore)return this.grademinimumlistOver60[3].color}}getRemarkColor(e){return this.grademinimumlist.filter(i=>i.remark?.toLowerCase()==e?.toLowerCase())[0]?.color}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(G),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:221,vars:24,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[2,"text-align","end","margin","10px 30px"],[2,"padding","10px 50px","border","none","outline","none","background-color","dodgerblue","color","white","border-radius","20px","box-shadow","1px 1px 3px rgb(0, 0, 0, 0.3)",3,"click"],[1,"fonticon-printer",2,"margin-right","6px","color","white","font-size","16px"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],["prin",""],[1,"card-body","p-12"],[2,"font-family","'Poppins-Medium'"],[2,"text-align","center","margin-bottom","20px"],[2,"font-size","39px","color","rgb(36, 91, 143)","font-weight","900"],[2,"display","flex","justify-content","space-between","font-size","16px"],[1,"col-4"],[2,"font-weight","600"],[1,"col-4","text-center"],[2,"object-fit","cover","height","100px","width","100px","border-radius","100%",3,"src"],[2,"height","6px","background-color","rgb(36, 91, 143)","margin-top","30px"],[2,"display","flex","justify-content","space-between","font-size","17px"],[2,"text-align","center","margin-top","10px"],["id","customers"],["tabl",""],["class","border-bottom border-bottom-dashed",4,"ngFor","ngForOf"],["id","ireg",1,"heitable",2,"width","100%"],["span","2"],[2,"text-align","center","font-size","10px","font-weight","600"],["colspan","2","scope","colgroup"],["colspan","4","scope","colgroup"],[2,"font-size","10px","font-weight","600"],["scope","col"],[2,"font-size","10px"],[2,"margin","50px 0 30px 0"],["id","mykey",2,"border","1px solid rgb(174, 179, 181)"],[2,"font-size","9px"],[2,"padding","2px 5px"],[2,"display","flex","justify-content","space-between"],[2,"display","flex","width","50%"],["id","psyco",2,"width","50%"],["style","font-size: 11px;",4,"ngFor","ngForOf"],["id","psyco2",2,"width","50%"],["id","grade",2,"font-size","11px","width","40%"],[2,"border","solid 1px grey"],[4,"ngFor","ngForOf"],[2,"padding","0 0 50px 50px"],[2,"margin-bottom","15px"],[2,"font-size","15px","font-weight","600","color","rgb(75, 73, 73)"],[2,"font-size","15px","color","rgb(9, 95, 182)","font-style","italic"],[1,"border-bottom","border-bottom-dashed"],[2,"font-size","11px"],[2,"font-weight","700",3,"ngStyle"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),v("click",function(){w(d);let m=E(9);return T(t.convertToPDF(m))}),f(4,"i",4),r(5," Print"),s()(),n(6,"div",5)(7,"div",6)(8,"div",7,8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"span",12),r(14),s()(),n(15,"div",13)(16,"div",14)(17,"span",15),r(18,"Postal Address:"),s(),f(19,"br"),n(20,"span"),r(21),s()(),n(22,"div",16),f(23,"img",17),s(),n(24,"div",14)(25,"span",15),r(26,"Email: "),s(),n(27,"span"),r(28),s(),f(29,"br"),n(30,"span",15),r(31,"Phone: "),s(),n(32,"span"),r(33),s(),f(34,"br"),n(35,"span",15),r(36,"website: "),s(),n(37,"span"),r(38),s()()(),f(39,"div",18),n(40,"div",19)(41,"div")(42,"span",15),r(43,"STUDENTS NAME: "),s(),n(44,"span"),r(45),s(),f(46,"br"),n(47,"span",15),r(48,"CLASS NAME: "),s(),n(49,"span"),r(50),s(),f(51,"br"),n(52,"span",15),r(53,"NO. IN CLASS: "),s(),n(54,"span"),r(55),s(),f(56,"br"),n(57,"span",15),r(58,"AVERAGE SCORE: "),s(),n(59,"span"),r(60),s(),f(61,"br"),n(62,"span",15),r(63,"TOTAL SCORE: "),s(),n(64,"span"),r(65),s(),f(66,"br"),n(67,"span",15),r(68,"POSITION IN CLASS: "),s(),n(69,"span"),r(70),s()(),n(71,"div",14)(72,"span",15),r(73,"TERM: "),s(),n(74,"span"),r(75),s(),f(76,"br"),n(77,"span",15),r(78,"SESSION: "),s(),n(79,"span"),r(80),s(),f(81,"br"),n(82,"span",15),r(83,"ADMISSION NO.: "),s(),n(84,"span"),r(85),s(),f(86,"br"),n(87,"span",15),r(88,"NEXT TERM BEGINS: "),s(),n(89,"span"),r(90),Ie(91,"date"),s(),f(92,"br"),n(93,"span",15),r(94,"HOUSE: "),s(),f(95,"span")(96,"br"),n(97,"span",15),r(98,"NO OF TIMES PRESENT: "),s(),f(99,"span")(100,"br"),s()(),n(101,"div",20)(102,"h1"),r(103,"CONTINUOUS ASSESSMENT DOSSIER FOR JUNIOR AND SENIOR SECONDARY SCHOOL"),s()(),f(104,"div"),s(),n(105,"table",21,22)(107,"thead")(108,"tr")(109,"th"),r(110,"Subject"),s(),n(111,"th"),r(112,"1st Term"),s(),n(113,"th"),r(114,"2nd Term"),s(),n(115,"th"),r(116,"3rd Term"),s(),n(117,"th"),r(118,"Total"),s(),n(119,"th"),r(120,"Annual"),s(),n(121,"th"),r(122,"Grade"),s(),n(123,"th"),r(124,"Remark"),s(),n(125,"th"),r(126,"Position"),s(),n(127,"th"),r(128,"Lowest Score"),s(),n(129,"th"),r(130,"Highest Score"),s(),n(131,"th"),r(132,"Average"),s()()(),n(133,"tbody"),C(134,$r,25,12,"tr",23),s()(),f(135,"br"),n(136,"table",24),f(137,"colgroup",25)(138,"colgroup",25),n(139,"tr",26)(140,"th",27),r(141,"HEIGHT"),s(),n(142,"th",27),r(143,"WEIGHT"),s(),n(144,"th",28),r(145,"SOCIETIES/CLUBS"),s()(),n(146,"tr",29)(147,"th",30),r(148,"Beginning of Term"),s(),n(149,"th",30),r(150,"End of Term"),s(),n(151,"th",30),r(152,"Beginning of Term"),s(),n(153,"th",30),r(154,"End of Term"),s(),n(155,"th",30),r(156,"Academic"),s(),n(157,"th",30),r(158,"Social"),s(),n(159,"th",30),r(160,"Pious"),s(),n(161,"th",30),r(162,"Social Acad"),s()(),n(163,"tr",31)(164,"td",30),r(165,"153M"),s(),n(166,"td",30),r(167,"153M"),s(),n(168,"td",30),r(169,"53"),s(),n(170,"td",30),r(171,"52"),s(),n(172,"td",30),r(173,"4000"),s(),n(174,"td",30),r(175,"1000"),s(),n(176,"td",30),r(177,"St. Vincent de paul"),s(),n(178,"td",30),r(179,"Road Safety"),s()()(),n(180,"div",32)(181,"table",33)(182,"tr",34)(183,"th",35),r(184,"KEY-TO-RATINGS:"),s(),n(185,"td",35),r(186,"1 = Unsatisfactory \xA0\xA0 2 = Below Average \xA0\xA0 3 = Average \xA0\xA0 4 = Good \xA0\xA0 5 = Excellent"),s()()()(),n(187,"div",36)(188,"div",37)(189,"table",38),C(190,Xr,5,2,"tr",39),s(),n(191,"table",40),C(192,qr,5,2,"tr",39),s()(),n(193,"table",41)(194,"thead",15)(195,"tr",42)(196,"th"),r(197,"Color"),s(),n(198,"th"),r(199,"Grade"),s(),n(200,"th"),r(201,"Over 100"),s(),n(202,"th"),r(203,"Over 60"),s(),n(204,"th"),r(205,"Over 40"),s()()(),n(206,"tbody"),C(207,Jr,11,8,"tr",43),s()()()(),n(208,"div",44)(209,"div",45)(210,"span",46),r(211,"Form Teacher's Comment:"),s(),r(212," \xA0\xA0 "),n(213,"span",47),r(214),s()(),n(215,"div")(216,"span",46),r(217,"Principal's Comment:"),s(),r(218," \xA0\xA0 "),n(219,"span",47),r(220),s()()()()()()()()}if(i&2){let d;l(14),p(t.myschool==null?null:t.myschool.schoolName),l(7),p(t.myschool==null?null:t.myschool.address),l(2),h("src",t.setImg(t.myschool==null?null:t.myschool.schoolLogo),oe),l(5),p(t.myschool==null?null:t.myschool.email),l(5),p(t.myschool==null?null:t.myschool.phoneOne),l(5),p(t.myschool==null?null:t.myschool.website),l(7),p((((d=t.studentobj==null?null:t.studentobj.surname)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.middleName)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.firstName)!==null&&d!==void 0?d:"")).trim()),l(5),p(t.className),l(5),p(t.noInClass),l(5),p(t.average),l(5),p(t.studentTotal==null?null:t.studentTotal.toFixed(1)),l(5),p(t.position),l(5),p(t.currentTerm),l(5),p(t.currentSession),l(5),p(t.studentobj==null?null:t.studentobj.admissionNo),l(5),p(Oe(91,22,t.nextResumptionDate)),l(44),h("ngForOf",t.resultlist),l(56),h("ngForOf",t.psycomotorlist),l(2),h("ngForOf",t.psycomotorlist2),l(15),h("ngForOf",t.gradeScalelist),l(7),p(t.resultComment==null?null:t.resultComment.formTeacherComment),l(6),p(t.resultComment==null?null:t.resultComment.principalComment)}},dependencies:[W,Et,Re],styles:["#customers[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px;font-size:9px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}.heitable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(186,187,190);padding:2px 5px}.resprint[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#1e90ff;color:#fff;border-radius:20px;box-shadow:1px 1px 3px #0000004d}.resprintdisabled[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#a0a3a6;color:#000;border-radius:20px;box-shadow:1px 1px 3px #0000004d}#customerslouismidterm[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerslouismidterm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:11px}#customerslouismidterm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;font-size:11px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}#customerstrail[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerstrail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:4px;font-size:10px}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customerstrail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-size:10px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}"]});let o=u;return o})();function Zr(o,u){if(o&1&&(n(0,"option",104),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function Qr(o,u){if(o&1&&(n(0,"option",104),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.sessionName)}}var el=(o,u,a)=>[o,"result",u,a],tl=(o,u,a,e,i,t)=>({term:o,currentSessionId:u,currentSession:a,classId:e,average:i,position:t});function il(o,u){if(o&1&&(n(0,"tr")(1,"td",105),r(2),s(),n(3,"td")(4,"a",106),r(5),s()(),n(6,"td")(7,"a",107),r(8),s()(),n(9,"td",108),r(10),s(),n(11,"td"),r(12),s(),n(13,"td"),r(14),s(),n(15,"td"),r(16),s(),n(17,"td")(18,"button",42),r(19,"View result"),s()()()),o&2){let a=u.$implicit,e=u.index,i=x();l(2),I(" ",e+1," "),l(3),p(a.studentName),l(3),p(a.sex),l(2),p(a.admissionNo),l(2),p(a.classes),l(2),p(a.average),l(2),p(i.formatPosition(i.getposition(a==null?null:a.average)+1)),l(2),h("routerLink",vt(9,el,"/admin",i.getresultUrl,a.studentId))("queryParams",Ht(13,tl,i.currentTerm,i.currentSessionId,i.currentSession,i.currentClass,a.average,a.average?i.formatPosition(e+1):""))}}var nl=(o,u)=>[o,"result",u],sl=(o,u,a,e,i)=>({term:o,currentSessionId:u,currentSession:a,classId:e,className:i}),vi=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.route=i,this.auth=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.resultlist=[],this.genk=c,this.userName=t.currentUserValue.name,this.schoolId=t.currentUserValue.schoolId,this.userImgPath=t.currentUserValue.logo,this.adminStatus=t.currentUserValue.status}ngOnInit(){this.genk.topdata="View Midterm Result",this.getClassNames(),this.getSession(),this.getCurrentSession()}get getresultUrl(){return this.genk.resultTemplate.filter(e=>e.id==this.schoolId)[0].midterm}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.schoolClasses=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getResults(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getResultsAverageBySession(){this.sch.getMidtermResultsAverageBySession(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultlist=e,this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName,this.currentClassName=this.schoolClasses.filter(i=>i.id==Number(this.currentClass))[0].class})}getposition(e){return this.resultlist.findIndex(i=>i.average==e)}formatPosition(e){let i,t;switch(e==11||e==12||e==13?t=e:t=Number(e.toString()[e.toString().length-1]),t){case 1:i=e+"st";break;case 2:i=e+"nd";break;case 3:i=e+"rd";break;default:i=e+"th";break}return i}};u.\u0275fac=function(i){return new(i||u)(_(z),_(G),_(D),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:184,vars:17,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],[1,"card-body","p-12"],["action","","id","kt_invoice_form"],[1,"d-flex","flex-column","align-items-start","flex-xxl-row"],["data-bs-toggle","tooltip","data-bs-trigger","hover","title","Enter invoice number",1,"d-flex","flex-center","flex-equal","fw-row","text-nowrap","order-1","order-xxl-2","me-4"],[1,"fs-2x","fw-bolder","text-gray-800"],[1,"separator","separator-dashed","my-10"],[1,"mb-0"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["name","classy","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fv-row","mb-5"],[1,"fs-6","fw-bold","form-label"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["name","clasis","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],[1,"fv-row","mb-5",2,"margin-top","60px"],[1,"w-100","btn","btn-primary",2,"padding","10px",3,"click"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-customer-table-filter","search","placeholder","Search Students",1,"form-control","form-control-solid","w-250px","ps-15",3,"keyup"],["myInput",""],[1,"card-toolbar"],[1,"text-end"],[1,"btn","btn-sm","btn-light-primary","btn-active-primary","me-3",3,"routerLink","queryParams"],[1,"table-responsive","mb-10"],["id","kt_customers_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"w-10px","pe-2"],[1,"min-w-150px"],[1,"min-w-100px"],[1,"min-w-125px"],[1,"fw-bold","text-gray-600"],["myTbody",""],[4,"ngFor","ngForOf"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"d-flex","flex-column","mb-7","fv-row"],[1,"fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Students Class",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["name","Class","data-control","select2","data-placeholder","Select Class...","data-dropdown-parent","#kt_modal_add_customer",1,"form-select","form-select-solid","fw-bolder"],["value","1"],["value","2"],["name","Section","data-control","select2","data-placeholder","Select Section...","data-dropdown-parent","#kt_modal_add_customer",1,"form-select","form-select-solid","fw-bolder"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport","value","",1,"form-control","form-control-solid"],[1,"fv-row","mt-5","mb-7"],[1,"btn","btn-info","w-100"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit",1,"btn","btn-info"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["id","kt_customers_export_modal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-header"],["id","kt_customers_export_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"modal-body","scroll-y","mx-5","mx-xl-15","my-7"],["id","kt_customers_export_form","action","#",1,"form"],[1,"fs-5","fw-bold","form-label","mb-5"],["data-control","select2","data-placeholder","Select a format","data-hide-search","true","name","format",1,"form-select","form-select-solid"],["value","excell"],["value","pdf"],["value","cvs"],[1,"text-center"],[1,"row"],[1,"col","6"],["type","reset","id","kt_customers_export_cancel",1,"btn","btn-light","w-100","me-3"],["type","submit","id","kt_customers_export_submit",1,"w-100","btn","btn-info"],["id","kt_footer",1,"footer","py-4","d-flex","flex-lg-column"],[1,"container-fluid","d-flex","flex-column","flex-md-row","align-items-center","justify-content-between"],[1,"text-dark","order-2","order-md-1"],[1,"text-muted","fw-bold","me-1"],["href","https://GradexCloud.com","target","_blank",1,"text-gray-800","text-hover-info"],[3,"value"],[1,"text-gray-800","text-bold"],["href","View_user.html",1,"text-gray-800","text-hover-info","mb-1"],["href","#",1,"text-gray-600","text-hover-info","mb-1"],["data-filter","mastercard"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",7)(8,"div",8)(9,"span",9),r(10,"Students Result"),s()()(),f(11,"div",10),n(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"label",15)(17,"span",16),r(18,"Select Class"),s()(),n(19,"div",17)(20,"select",18),M("ngModelChange",function(m){return A(t.currentClass,m)||(t.currentClass=m),m}),n(21,"option",19),r(22,"Select Class..."),s(),C(23,Zr,2,2,"option",20),s()()(),n(24,"div",21)(25,"label",22)(26,"span",16),r(27,"Session"),s()(),n(28,"div",17)(29,"select",23),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(30,"option",19),r(31,"Select Session..."),s(),C(32,Qr,2,2,"option",20),s()()()(),n(33,"div",13)(34,"div",14)(35,"label",15)(36,"span",16),r(37,"Term"),s()(),n(38,"div",17)(39,"select",24),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(40,"option",25),r(41,"Select term"),s(),n(42,"option",26),r(43,"First"),s(),n(44,"option",27),r(45,"Second"),s(),n(46,"option",28),r(47,"Third"),s()()()(),n(48,"div",29)(49,"div",17)(50,"button",30),v("click",function(){return t.getResultsAverageBySession()}),r(51,"Show Results"),s()()()(),n(52,"div",31)(53,"div",32)(54,"div",33)(55,"span",34),F(),n(56,"svg",35),f(57,"rect",36)(58,"path",37),s()(),P(),n(59,"input",38,39),v("keyup",function(){w(d);let m=E(60),S=E(86);return T(t.genk.searchTable(m,S))}),s()()(),n(61,"div",40)(62,"div",41)(63,"button",42),r(64,"Download All Result"),s()()()()(),n(65,"div",43)(66,"table",44)(67,"thead")(68,"tr",45)(69,"th",46),r(70," S/N "),s(),n(71,"th",47),r(72,"Students Name"),s(),n(73,"th",48),r(74,"Gender"),s(),n(75,"th",47),r(76,"Admission No"),s(),n(77,"th",49),r(78,"Class"),s(),n(79,"th",49),r(80,"Average"),s(),n(81,"th",48),r(82,"Position"),s(),n(83,"th",48),r(84,"Actions"),s()()(),n(85,"tbody",50,51),C(87,il,20,20,"tr",52),s()()()()()()(),n(88,"div",53)(89,"div",54)(90,"div",55)(91,"form",56)(92,"div",57)(93,"h2",58),r(94,"Upload Students"),s(),n(95,"div",59)(96,"span",60),F(),n(97,"svg",35),f(98,"rect",61)(99,"rect",62),s()()()(),P(),n(100,"div",63)(101,"div",64)(102,"div",65)(103,"label",66)(104,"span",16),r(105,"Class"),s(),f(106,"i",67),s(),n(107,"select",68)(108,"option",19),r(109,"Select Class..."),s(),n(110,"option",69),r(111,"Primary 1"),s(),n(112,"option",70),r(113,"Primary 2"),s()()(),n(114,"div",65)(115,"label",66)(116,"span",16),r(117,"Section "),s()(),n(118,"select",71)(119,"option",19),r(120,"Select Section..."),s(),n(121,"option",69),r(122,"2022/2023"),s(),n(123,"option",70),r(124,"2023/2024"),s()()(),n(125,"div",72)(126,"label",73),r(127,"Upload Template"),s(),f(128,"i",74)(129,"input",75),s(),n(130,"div",76)(131,"button",77),r(132,"download Template Document"),s()()()(),n(133,"div",78)(134,"button",79),r(135,"Discard"),s(),n(136,"button",80)(137,"span",81),r(138,"Submit"),s(),n(139,"span",82),r(140,"Please wait... "),f(141,"span",83),s()()()()()()(),n(142,"div",84)(143,"div",54)(144,"div",55)(145,"div",85)(146,"h2",58),r(147,"Export Result"),s(),n(148,"div",86)(149,"span",60),F(),n(150,"svg",35),f(151,"rect",61)(152,"rect",62),s()()()(),P(),n(153,"div",87)(154,"form",88)(155,"div",14)(156,"label",89),r(157,"Select Export Format:"),s(),n(158,"select",90)(159,"option",91),r(160,"Excel"),s(),n(161,"option",92),r(162,"PDF"),s(),n(163,"option",93),r(164,"CVS"),s()()(),n(165,"div",94)(166,"div",95)(167,"div",96)(168,"button",97),r(169,"Discard"),s()(),n(170,"div",96)(171,"button",98)(172,"span",81),r(173,"Submit"),s(),n(174,"span",82),r(175,"Please wait... "),f(176,"span",83),s()()()()()()()()()()()()(),n(177,"div",99)(178,"div",100)(179,"div",101)(180,"span",102),r(181,"2022\xA9"),s(),n(182,"a",103),r(183,"gradeX-Cloud"),s()()()()()}i&2&&(l(20),N("ngModel",t.currentClass),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(24),h("routerLink",at(8,nl,"/admin",t.currentTerm=="ANNUAL"?"annual-result-multiple":"result-multiple"))("queryParams",Ut(11,sl,t.currentTerm,t.currentSessionId,t.currentSession,t.currentClass,t.currentClassName)),l(24),h("ngForOf",t.resultlist))},dependencies:[W,q,ne,se,ie,te,$,ge,X,Fe],styles:['@media (max-width:800px){.fixewidth[_ngcontent-%COMP%]{min-width:150px;width:170px}.snfixewidth[_ngcontent-%COMP%]{min-width:10px;width:10px}}@media (min-width: 800px) and (max-width: 3000px){.fixed-column-state[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:100}.fixewidth[_ngcontent-%COMP%]{min-width:250px;width:250px}.snfixewidth[_ngcontent-%COMP%]{min-width:30px;width:30px}.marlin[_ngcontent-%COMP%]{width:90%;margin:20px auto}}.btnact[_ngcontent-%COMP%]{background-color:#10ab23;color:#fff;font-weight:600;padding:10px 20px;border-radius:30px}.nobtnact[_ngcontent-%COMP%]{color:#10ab23;font-weight:600;padding:10px 20px;border-radius:30px}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:inline-block;border-top:4px solid #FFF;border-right:4px solid transparent;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}.loader[_ngcontent-%COMP%]:after{content:"";box-sizing:border-box;position:absolute;left:0;top:0;width:48px;height:48px;border-radius:50%;border-bottom:4px solid #FF3D00;border-left:4px solid transparent}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}']});let o=u;return o})();ke();var pt=K(Pe());function rl(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA1?a.caSetupData.CA1:"CA1")}}function ll(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA2?a.caSetupData.CA2:"CA2")}}function ol(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA3?a.caSetupData.CA3:"CA3")}}function al(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA4?a.caSetupData.CA4:"CA4")}}function dl(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA5?a.caSetupData.CA5:"CA5")}}function cl(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA6?a.caSetupData.CA6:"CA6")}}function ml(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA7?a.caSetupData.CA7:"CA7")}}function ul(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA8?a.caSetupData.CA8:"CA8")}}function pl(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA9?a.caSetupData.CA9:"CA9")}}function hl(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA10?a.caSetupData.CA10:"CA10")}}function gl(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA11?a.caSetupData.CA11:"CA11")}}function Sl(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA12?a.caSetupData.CA12:"CA12")}}function fl(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA13?a.caSetupData.CA13:"CA13")}}function xl(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA14?a.caSetupData.CA14:"CA14")}}function bl(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA15?a.caSetupData.CA15:"CA15")}}function _l(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca1)!==null&&e!==void 0?e:"")}}function Cl(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca2)!==null&&e!==void 0?e:"")}}function vl(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca3)!==null&&e!==void 0?e:"")}}function yl(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca4)!==null&&e!==void 0?e:"")}}function El(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca5)!==null&&e!==void 0?e:"")}}function Il(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca6)!==null&&e!==void 0?e:"")}}function wl(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca7)!==null&&e!==void 0?e:"")}}function Tl(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca8)!==null&&e!==void 0?e:"")}}function kl(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca9)!==null&&e!==void 0?e:"")}}function Nl(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca10)!==null&&e!==void 0?e:"")}}function Al(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca11)!==null&&e!==void 0?e:"")}}function Ml(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca12)!==null&&e!==void 0?e:"")}}function Ol(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca13)!==null&&e!==void 0?e:"")}}function Rl(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca14)!==null&&e!==void 0?e:"")}}function Fl(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.Ca15)!==null&&e!==void 0?e:"")}}function Pl(o,u){if(o&1&&(n(0,"tr",35)(1,"td"),r(2),s(),C(3,_l,2,1,"td",23)(4,Cl,2,1,"td",23)(5,vl,2,1,"td",23)(6,yl,2,1,"td",23)(7,El,2,1,"td",23)(8,Il,2,1,"td",23)(9,wl,2,1,"td",23)(10,Tl,2,1,"td",23)(11,kl,2,1,"td",23)(12,Nl,2,1,"td",23)(13,Al,2,1,"td",23)(14,Ml,2,1,"td",23)(15,Ol,2,1,"td",23)(16,Rl,2,1,"td",23)(17,Fl,2,1,"td",23),n(18,"td"),r(19),s(),n(20,"td"),r(21),s(),n(22,"td"),r(23),s()()),o&2){let a=u.$implicit,e=x(),i,t,d;l(2),p(a.subject),l(),h("ngIf",e.caSetupData.CA1),l(),h("ngIf",e.caSetupData.CA2),l(),h("ngIf",e.caSetupData.CA3),l(),h("ngIf",e.caSetupData.CA4),l(),h("ngIf",e.caSetupData.CA5),l(),h("ngIf",e.caSetupData.CA6),l(),h("ngIf",e.caSetupData.CA7),l(),h("ngIf",e.caSetupData.CA8),l(),h("ngIf",e.caSetupData.CA9),l(),h("ngIf",e.caSetupData.CA10),l(),h("ngIf",e.caSetupData.CA11),l(),h("ngIf",e.caSetupData.CA12),l(),h("ngIf",e.caSetupData.CA13),l(),h("ngIf",e.caSetupData.CA14),l(),h("ngIf",e.caSetupData.CA15),l(2),p((i=e.toNumber(a.totalScore))!==null&&i!==void 0?i:""),l(2),p((t=(t=e.calMinGrade(e.toNumber(a.totalScore)))==null?null:t.grade)!==null&&t!==void 0?t:""),l(2),p((d=(d=e.calMinGrade(e.toNumber(a.totalScore)))==null?null:d.remark)!==null&&d!==void 0?d:"")}}function Dl(o,u){if(o&1&&(n(0,"span")(1,"span"),r(2),s(),r(3," \xA0\xA0 "),s()),o&2){let a=u.$implicit;l(2),p(a)}}var yi=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.activeRoute=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.gradeScalelist=[],this.gradescaletextlist=[],this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Midterms",this.studentId=this.activeRoute.snapshot.params.id,this.activeRoute.queryParams.subscribe(e=>{this.currentTerm=e.term,this.currentSessionId=e.currentSessionId,this.currentSession=e.currentSession,this.currentClassId=e.classId,this.average=e.average,this.position=e.position}),this.getSchool(),this.getMidtermMax(),this.getStudent(),this.getNoInClass(),this.getResultsByStudent(),this.getCaSetupByClass(),this.getGradeScaleByClass(),this.getStudentResultComment()}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getSchool(){this.sch.getSchoolData().subscribe(e=>{this.myschool=e})}getStudent(){this.sch.getStudentById(this.studentId.toString()).subscribe(e=>H(this,null,function*(){this.studentobj=e,yield Promise.all([this.addLogo(),this.addSignature()])}))}getNoInClass(){this.sch.getNoInClass(this.studentId.toString()).subscribe(e=>{this.noInClass=e.count})}getMidtermMax(){this.sch.getMidtermMaxValue(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.midtermMaxValue=e.max})}getResultsByStudent(){this.sch.getMidtermResultsPageSession(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultlist=e})}getStudentResultComment(){this.sch.getStudentResultComment(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e,this.gradescaletextlist.push(this.gradeScalelist[0].classLevel+":");let i;this.gradeScalelist.forEach(t=>{i=t.grade+" = "+t.remarks+" ("+t.begLimit+" - "+t.endLimit+")",this.gradescaletextlist.push(i)})})}overMinNum(e,i){let t=0,c=(e/100*i).toString().split(".");return c.length>1?t=+(c[0]+"."+c[1][0]):t=Number(c[0]),t}calMinGrade(e){let i;return this.gradeScalelist.forEach(t=>{let d=this.overMinNum(t.begLimit,this.midtermMaxValue),c=this.overMinNum(t.endLimit,this.midtermMaxValue);e>=d&&e<=c&&(i={grade:t.grade,remark:t.remarks})}),i||{grade:"i",remark:"Not Aplicable"}}toNumber(e){return Number(e).toFixed(1)}convertToPDF(e){debugger;var i=new ae("p","pt","letter"),t=i.internal.pageSize.height||i.internal.pageSize.getHeight(),d=i.internal.pageSize.width||i.internal.pageSize.getWidth();i.setFont("Trebuchet MS","normal","900"),i.setTextColor("rgb(36, 91, 143)"),i.setFontSize(20),i.text(this.myschool?.schoolName??"",d/2,30,{align:"center"}),i.addImage(this.docimg,"PNG",270,40,55,55),i.addImage(this.signatureimg,"PNG",500,695,70,55),i.setFontSize(10),i.setTextColor("rgb(0, 0, 0)"),i.setFont("","","700"),i.text("Postal Address:",20,60),i.setFont("","","500");let c=i.splitTextToSize(this.myschool?.address??"",220);i.text(c,20,73),i.setFont("","","700"),i.text("Email:",380,60),i.setFont("","","500"),i.text(this.myschool?.email??"",418,60),i.setFont("","","700"),i.text("Phone:",380,74),i.setFont("","","500"),i.text(this.myschool?.phoneOne??"",418,74),i.setFont("","","700"),i.text("website:",380,88),i.setFont("","","500"),i.text(this.myschool?.website??"",424,88),i.setDrawColor(36,91,143),i.setLineWidth(2),i.line(20,100,580,100),i.setFontSize(8),i.setFont("","","700"),i.text("STUDENTS NAME:",20,120),i.setFont("","","500"),i.text(((this.studentobj?.surname??"")+" "+(this.studentobj?.middleName??"")+" "+(this.studentobj?.firstName??"")).trim(),113,120),i.setFont("","","700"),i.text("CLASS:",20,132),i.setFont("","","500"),i.text(this.studentobj?.class??"",113,132),i.setFont("","","700"),i.text("NO. IN CLASS:",20,144),i.setFont("","","500"),i.text(this.noInClass.toString(),113,144),i.setFont("","","700"),i.text("AVERAGE SCORE:",20,156),i.setFont("","","500"),i.text(this.average.toString(),113,156),i.setFont("","","700"),i.text("POSITION IN CLASS:",20,168),i.setFont("","","500"),i.text(this.position.toString(),113,168),i.setFont("","","700"),i.text("TERM:",380,120),i.setFont("","","500"),i.text(this.currentTerm,460,120),i.setFont("","","700"),i.text("SESSION:",380,132),i.setFont("","","500"),i.text(this.currentSession,460,132),i.setFont("","","700"),i.text("ADMISSION NO.:",380,144),i.setFont("","","500"),i.text(this.studentobj?.admissionNo??"",460,144),i.setFont("","","700"),i.text("NEXT TERM BEGINS:",380,156),i.setFont("","","500"),i.text("",460,156),i.setFontSize(12),i.setFont("","","700"),i.text("MID TERM RESULT FOR JUNIOR SECONDARY SCHOOL",d/2,190,{align:"center"}),(0,pt.default)(i,{html:"#customers",styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:200,margin:{top:150,left:20,bottom:70}}),i.setFontSize(10),(0,pt.default)(i,{html:"#mykey",styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:620,margin:{top:150,left:20,bottom:30}}),i.setFontSize(8),i.setFont("","","700");let m=i.splitTextToSize("Form Teacher's Comment:",100);i.text(m,20,700),i.setFont("","","500"),i.setTextColor("rgb(36, 91, 143)");let S=i.splitTextToSize(this.resultComment?.formTeacherComment??"",370);i.text(S,119,700),i.setTextColor("rgb(0, 0, 0)"),i.setFont("","","700");let b=i.splitTextToSize("Principal's Comment:",100);i.text(b,20,730),i.setFont("","","500"),i.setTextColor("rgb(36, 91, 143)");let g=i.splitTextToSize(this.resultComment?.principalComment??"",370);i.text(g,103,730),i.save("My_Results")}convertToPDFLouis(e){debugger;var i=new ae("p","pt","letter"),t=i.internal.pageSize.height||i.internal.pageSize.getHeight(),d=i.internal.pageSize.width||i.internal.pageSize.getWidth();i.setFont("Trebuchet MS","normal","900"),i.setTextColor("rgb(36, 91, 143)"),i.setFontSize(20),i.text(this.myschool?.schoolName??"",d/2,30,{align:"center"}),i.addImage(this.docimg,"PNG",270,40,55,55),i.addImage(this.signatureimg,"PNG",500,695,70,55),i.setFontSize(10),i.setTextColor("rgb(0, 0, 0)"),i.setFont("","","700"),i.text("Postal Address:",20,60),i.setFont("","","500");let c=i.splitTextToSize(this.myschool?.address??"",220);i.text(c,20,73),i.setFont("","","700"),i.text("Email:",380,60),i.setFont("","","500"),i.text(this.myschool?.email??"",418,60),i.setFont("","","700"),i.text("Phone:",380,74),i.setFont("","","500"),i.text(this.myschool?.phoneOne??"",418,74),i.setFont("","","700"),i.text("website:",380,88),i.setFont("","","500"),i.text(this.myschool?.website??"",424,88),i.setDrawColor(36,91,143),i.setLineWidth(2),i.line(20,100,580,100),i.setFontSize(8),i.setFont("","","700"),i.text("STUDENTS NAME:",20,120),i.setFont("","","500"),i.text(((this.studentobj?.surname??"")+" "+(this.studentobj?.middleName??"")+" "+(this.studentobj?.firstName??"")).trim(),113,120),i.setFont("","","700"),i.text("CLASS:",20,132),i.setFont("","","500"),i.text(this.studentobj?.class??"",113,132),i.setFont("","","700"),i.text("NO. IN CLASS:",20,144),i.setFont("","","500"),i.text(this.noInClass.toString(),113,144),i.setFont("","","700"),i.text("AVERAGE SCORE:",20,156),i.setFont("","","500"),i.text(this.average.toString(),113,156),i.setFont("","","700"),i.text("POSITION IN CLASS:",20,168),i.setFont("","","500"),i.text(this.position.toString(),113,168),i.setFont("","","700"),i.text("TERM:",380,120),i.setFont("","","500"),i.text(this.currentTerm,460,120),i.setFont("","","700"),i.text("SESSION:",380,132),i.setFont("","","500"),i.text(this.currentSession,460,132),i.setFont("","","700"),i.text("ADMISSION NO.:",380,144),i.setFont("","","500"),i.text(this.studentobj?.admissionNo??"",460,144),i.setFont("","","700"),i.text("NEXT TERM BEGINS:",380,156),i.setFont("","","500"),i.text("",460,156),i.setFontSize(12),i.setFont("","","700"),i.text("MID TERM RESULT FOR JUNIOR SECONDARY SCHOOL",d/2,190,{align:"center"});let m=this.resultlist,S=[];m.forEach(ee=>{let Z=[];Z.push(ee.subject),Z.push(Number(ee.totalScore?.toFixed(2))),Z.push(this.calMinGrade(Number(ee.totalScore?.toFixed(1)))?.grade),S.push(Z)});let b=["Subject","Score("+this.midtermMaxValue+")","Grade"],g=S;(0,pt.default)(i,{head:[b],body:S,alternateRowStyles:{fillColor:[245,245,245]},styles:{font:"8px",lineColor:[200,200,200],lineWidth:.1,fontSize:8,cellPadding:3},headStyles:{fontSize:7,lineColor:"white",halign:"left",valign:"middle",textColor:"white",fillColor:[45,113,177],cellPadding:[5,1,5,3]},startY:205,tableWidth:562,margin:{left:20}}),(0,pt.default)(i,{html:"#customers",styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:200,margin:{top:150,left:20,bottom:70}}),i.setFontSize(10),(0,pt.default)(i,{html:"#mykey",styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:620,margin:{top:150,left:20,bottom:30}}),i.setFontSize(8),i.setFont("","","700");let y=i.splitTextToSize("Form Teacher's Comment:",100);i.text(y,20,700),i.setFont("","","500"),i.setTextColor("rgb(36, 91, 143)");let U=i.splitTextToSize(this.resultComment?.formTeacherComment??"",370);i.text(U,119,700),i.setTextColor("rgb(0, 0, 0)"),i.setFont("","","700");let O=i.splitTextToSize("Principal's Comment:",100);i.text(O,20,730),i.setFont("","","500"),i.setTextColor("rgb(36, 91, 143)");let Y=i.splitTextToSize(this.resultComment?.principalComment??"",370);i.text(Y,103,730),i.save("My_Results")}addLogo(){this.getBase64ImageFromUrl(this.genk.imgurl+"api/school/getSchoolLogo?"+new URLSearchParams({id:this.myschool.id})).then(e=>this.docimg=e).catch(e=>console.error(e))}addSignature(){this.getBase64ImageFromUrl(this.genk.imgurl+"api/school/getSchoolSig?"+new URLSearchParams({id:this.myschool.id})).then(e=>this.signatureimg=e).catch(e=>console.error(e))}getBase64ImageFromUrl(e){return H(this,null,function*(){var i=yield fetch(e);let t=yield i.text();var c=this.base64ToBlob(t,"image/png");return new Promise((m,S)=>{var b=new FileReader;b.addEventListener("load",function(){debugger;m(b.result)},!1),b.onerror=()=>S(this),b.readAsDataURL(c)})})}base64ToBlob(e,i=""){let t=atob(e),d=[];for(let m=0;m<t.length;m+=512){let S=t.slice(m,m+512),b=new Array(S.length);for(let y=0;y<S.length;y++)b[y]=S.charCodeAt(y);let g=new Uint8Array(b);d.push(g)}return new Blob(d,{type:i})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(G),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:142,vars:33,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[2,"text-align","end","margin","10px 30px"],[2,"padding","10px 50px","border","none","outline","none","background-color","dodgerblue","color","white","border-radius","20px","box-shadow","1px 1px 3px rgb(0, 0, 0, 0.3)",3,"click"],[1,"fonticon-printer",2,"margin-right","6px","color","white","font-size","16px"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],["prin",""],[1,"card-body","p-12"],[2,"font-family","'Poppins-Medium'"],[2,"text-align","center","margin-bottom","20px"],[2,"font-size","39px","color","rgb(36, 91, 143)","font-weight","900"],[2,"display","flex","justify-content","space-between","font-size","16px"],[1,"col-4"],[2,"font-weight","600"],[1,"col-4","text-center"],[2,"object-fit","cover","height","100px","width","100px","border-radius","100%",3,"src"],[2,"height","6px","background-color","rgb(36, 91, 143)","margin-top","30px"],[2,"display","flex","justify-content","space-between","font-size","17px"],[2,"text-align","center","margin-top","10px"],["id","customers"],["tabl",""],[4,"ngIf"],["class","border-bottom border-bottom-dashed",4,"ngFor","ngForOf"],[2,"margin","50px 0 30px 0"],["id","mykey",2,"width","100%","border","1px solid black","border-collapse","collapse"],[2,"border","1px solid black","border-collapse","collapse","width","200px","text-align","center","padding","10px 0"],[2,"border","1px solid black","border-collapse","collapse","padding","10px 10px"],[4,"ngFor","ngForOf"],[2,"border","1px solid black","border-collapse","collapse","width","200px","text-align","center","padding","5px 0"],[2,"border","1px solid black","border-collapse","collapse","padding","5px 10px"],[2,"margin-bottom","40px"],[2,"font-size","15px","font-weight","600","color","rgb(75, 73, 73)"],[2,"font-size","15px","color","rgb(9, 95, 182)","font-style","italic"],[1,"border-bottom","border-bottom-dashed"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),v("click",function(){w(d);let m=E(9);return T(t.convertToPDFLouis(m))}),f(4,"i",4),r(5," Print"),s()(),n(6,"div",5)(7,"div",6)(8,"div",7,8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"span",12),r(14),s()(),n(15,"div",13)(16,"div",14)(17,"span",15),r(18,"Postal Address:"),s(),f(19,"br"),n(20,"span"),r(21),s()(),n(22,"div",16),f(23,"img",17),s(),n(24,"div",14)(25,"span",15),r(26,"Email: "),s(),n(27,"span"),r(28),s(),f(29,"br"),n(30,"span",15),r(31,"Phone: "),s(),n(32,"span"),r(33),s(),f(34,"br"),n(35,"span",15),r(36,"website: "),s(),n(37,"span"),r(38),s()()(),f(39,"div",18),n(40,"div",19)(41,"div")(42,"span",15),r(43,"STUDENTS NAME: "),s(),n(44,"span"),r(45),s(),f(46,"br"),n(47,"span",15),r(48,"CLASS NAME: "),s(),n(49,"span"),r(50),s(),f(51,"br"),n(52,"span",15),r(53,"NO. IN CLASS: "),s(),n(54,"span"),r(55),s(),f(56,"br"),n(57,"span",15),r(58,"AVERAGE SCORE: "),s(),n(59,"span"),r(60),s(),f(61,"br"),n(62,"span",15),r(63,"POSITION IN CLASS: "),s(),n(64,"span"),r(65),s()(),n(66,"div",14)(67,"span",15),r(68,"TERM: "),s(),n(69,"span"),r(70),s(),f(71,"br"),n(72,"span",15),r(73,"SESSION: "),s(),n(74,"span"),r(75),s(),f(76,"br"),n(77,"span",15),r(78,"ADMISSION NO.: "),s(),n(79,"span"),r(80),s(),f(81,"br"),n(82,"span",15),r(83,"NEXT TERM BEGINS:"),s()()(),n(84,"div",20)(85,"h1"),r(86,"MID TERM RESULT FOR JUNIOR SECONDARY SCHOOL"),s()(),f(87,"div"),s(),n(88,"table",21,22)(90,"thead")(91,"tr")(92,"th"),r(93,"Subject"),s(),C(94,rl,2,1,"th",23)(95,ll,2,1,"th",23)(96,ol,2,1,"th",23)(97,al,2,1,"th",23)(98,dl,2,1,"th",23)(99,cl,2,1,"th",23)(100,ml,2,1,"th",23)(101,ul,2,1,"th",23)(102,pl,2,1,"th",23)(103,hl,2,1,"th",23)(104,gl,2,1,"th",23)(105,Sl,2,1,"th",23)(106,fl,2,1,"th",23)(107,xl,2,1,"th",23)(108,bl,2,1,"th",23),n(109,"th"),r(110,"Total Score"),s(),n(111,"th"),r(112,"Grade"),s(),n(113,"th"),r(114,"Remark"),s()()(),n(115,"tbody"),C(116,Pl,24,19,"tr",24),s()(),n(117,"div",25)(118,"table",26)(119,"tr")(120,"th",27),r(121,"KEY TO GRADE:"),s(),n(122,"td",28),C(123,Dl,4,1,"span",29),s()(),n(124,"tr")(125,"th",30),r(126,"KEY TO RATINGS:"),s(),n(127,"td",31),r(128,"1 = Very Poor \xA0\xA0 2 = Poor \xA0\xA0 3 = Fair \xA0\xA0 4 = Good \xA0\xA0 5 = Excellent"),s()()()(),n(129,"div")(130,"div",32)(131,"span",33),r(132,"Form Teacher's Comment:"),s(),r(133," \xA0\xA0 "),n(134,"span",34),r(135),s()(),n(136,"div")(137,"span",33),r(138,"Principal's Comment:"),s(),r(139," \xA0\xA0 "),n(140,"span",34),r(141),s()()()()()()()()()}if(i&2){let d;l(14),p(t.myschool==null?null:t.myschool.schoolName),l(7),p(t.myschool==null?null:t.myschool.address),l(2),h("src",t.setImg(t.myschool==null?null:t.myschool.schoolLogo),oe),l(5),p(t.myschool==null?null:t.myschool.email),l(5),p(t.myschool==null?null:t.myschool.phoneOne),l(5),p(t.myschool==null?null:t.myschool.website),l(7),p((((d=t.studentobj==null?null:t.studentobj.surname)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.middleName)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.firstName)!==null&&d!==void 0?d:"")).trim()),l(5),p(t.studentobj==null?null:t.studentobj.class),l(5),p(t.noInClass),l(5),p(t.average),l(5),p(t.position),l(5),p(t.currentTerm),l(5),p(t.currentSession),l(5),p(t.studentobj==null?null:t.studentobj.admissionNo),l(14),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA1),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA2),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA3),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA4),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA5),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA6),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA7),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA8),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA9),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA10),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA11),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA12),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA13),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA14),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA15),l(8),h("ngForOf",t.resultlist),l(7),h("ngForOf",t.gradescaletextlist),l(12),p(t.resultComment==null?null:t.resultComment.formTeacherComment),l(6),p(t.resultComment==null?null:t.resultComment.principalComment)}},dependencies:[W,he],styles:["#customers[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px;font-size:9px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}.heitable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(186,187,190);padding:2px 5px}.resprint[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#1e90ff;color:#fff;border-radius:20px;box-shadow:1px 1px 3px #0000004d}.resprintdisabled[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#a0a3a6;color:#000;border-radius:20px;box-shadow:1px 1px 3px #0000004d}#customerslouismidterm[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerslouismidterm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:11px}#customerslouismidterm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;font-size:11px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}#customerstrail[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerstrail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:4px;font-size:10px}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customerstrail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-size:10px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}"]});let o=u;return o})();ke();var Ve=K(Pe());var Ei=(()=>{let u=class u{constructor(e,i,t,d,c,m){this.router=e,this.auth=i,this.activeRoute=t,this.sch=d,this.gen=c,this.resultService=m,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.gradeScalelist=[],this.psycomotorlist=[],this.psycomotorlist2=[],this.grademinimumlist=[],this.grademinimumlistOver60=[],this.grademinimumlistOver40=[],this.mySchoolClasses=[],this.gradescaletextlist=[],this.logoLoaded=!1,this.subjectOffered=0,this.markObtainable=0,this.displayValue="hidden",this.chartAverageScore=[],this.chartLowestScore=[],this.chartHighestScore=[],this.chartTotalScore=[],this.chartSubjects=[],this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Dashboard",this.studentId=this.activeRoute.snapshot.params.id,this.activeRoute.queryParams.subscribe(e=>{this.currentTerm=e.term,this.currentSessionId=e.currentSessionId,this.currentSession=e.currentSession,this.currentClassId=e.classId,this.average=e.average,this.position=e.position,this.classAverage=e.classAverage}),this.getSchool(),this.getStudent(),this.getStudentTotal(),this.getClassNames(),this.getResultsByStudent(),this.getCaSetupByClass(),this.getGradeScaleByClass(),this.getPsycomotorByStudent(),this.getStudentResultComment(),this.getStudentBMI(),this.getStudentEstimatedAttendance(),this.getStudentHouse(),this.getNextTerm()}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getSchool(){this.sch.getSchoolData().subscribe(e=>{this.myschool=e})}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.mySchoolClasses=e,this.getNoInClass()})}getStudent(){this.sch.getStudentById(this.studentId.toString()).subscribe(e=>H(this,null,function*(){this.studentobj=e,this.addLogo(),this.addSignature(),this.logoLoaded=!0}))}getStudentTotal(){this.sch.getStudentTermTotal(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.studentTotal=e.total})}getNoInClass(){this.sch.getNoInClassBySession(this.currentClassId.toString(),this.currentSessionId,this.currentTerm).subscribe(e=>{this.noInClass=e.count,this.className=this.mySchoolClasses.filter(i=>i.id==Number(this.currentClassId))[0].class})}getNextTerm(){this.sch.getNextTerm(this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{e&&(this.nextResumptionDate=e.date)})}getResultsByStudent(){this.sch.getResultsByStudent(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultlist=e,this.subjectOffered=this.resultlist.length,this.markObtainable=this.resultlist.length*100;let t=this.resultlist.map(d=>d.average).reduce((d,c)=>d+c,0)})}getStudentResultComment(){this.sch.getStudentResultComment(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClassId,this.currentSessionId,this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname,this.caSetupScoreData=e.score})}getStudentBMI(){this.sch.getStudentBMI(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.bmi=e,console.log(this.bmi)})}getStudentEstimatedAttendance(){this.sch.getStudentEstimatedAttendance(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.estAttendance=e,console.log(this.bmi)})}getStudentHouse(){this.sch.getUnitStudentHouse(this.studentId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{debugger;this.house=e.house,console.log(this.house)})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e,this.gradeScalelist.forEach(i=>{i.color=this.gradeColor(i.grade)}),this.grademinimumlist.push({color:"Black",remark:this.gradeScalelist.filter(i=>i.color=="Black")[this.gradeScalelist.filter(i=>i.color=="Black").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Black")[this.gradeScalelist.filter(i=>i.color=="Black").length-1].begLimit}),this.grademinimumlist.push({color:"Green",remark:this.gradeScalelist.filter(i=>i.color=="Green")[this.gradeScalelist.filter(i=>i.color=="Green").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Green")[this.gradeScalelist.filter(i=>i.color=="Green").length-1].begLimit}),this.grademinimumlist.push({color:"Blue",remark:this.gradeScalelist.filter(i=>i.color=="Blue")[this.gradeScalelist.filter(i=>i.color=="Blue").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Blue")[this.gradeScalelist.filter(i=>i.color=="Blue").length-1].begLimit}),this.grademinimumlist.push({color:"Red",remark:this.gradeScalelist.filter(i=>i.color=="Red")[this.gradeScalelist.filter(i=>i.color=="Red").length-1].remarks,minscore:this.gradeScalelist.filter(i=>i.color=="Red")[this.gradeScalelist.filter(i=>i.color=="Red").length-1].begLimit}),this.grademinimumlistOver60.push({color:"Green",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Green")[this.gradeScalelist.filter(i=>i.color=="Green").length-1].begLimit)}),this.grademinimumlistOver60.push({color:"Black",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Black")[this.gradeScalelist.filter(i=>i.color=="Black").length-1].begLimit)}),this.grademinimumlistOver60.push({color:"Blue",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Blue")[this.gradeScalelist.filter(i=>i.color=="Blue").length-1].begLimit)}),this.grademinimumlistOver60.push({color:"Red",minscore:this.over60Num(this.gradeScalelist.filter(i=>i.color=="Red")[this.gradeScalelist.filter(i=>i.color=="Red").length-1].begLimit)}),console.log(this.grademinimumlist)})}gradeColor(e){return e.includes("A")||e.includes("B2")?"Black":e.includes("B3")||e.includes("C4")?"Green":e.includes("C5")||e.includes("C6")?"Blue":e.includes("D")||e.includes("E")||e.includes("F")?"Red":"Black"}getPsycomotorByStudent(){this.sch.getPsycomotorByStudent(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{e.length>0?(this.psycomotorlist=e.slice(0,Math.round(e.length/2)),this.psycomotorlist2=e.slice(Math.round(e.length/2),e.length)):this.sch.getSkillList().subscribe(i=>{this.psycomotorlist=i.slice(0,Math.round(i.length/2)),this.psycomotorlist2=i.slice(Math.round(i.length/2),i.length)})})}convertToPDF(e){0 .toPrecision(1);var t=new ae("p","pt","letter"),d=t.internal.pageSize.height||t.internal.pageSize.getHeight(),c=t.internal.pageSize.width||t.internal.pageSize.getWidth();t.setFont("Ariel","normal","900"),t.setTextColor("rgb(36, 91, 143)"),t.setFontSize(34),t.text("Notre Dame Girls' Academy",20,30),this.genk.logoString&&t.addImage(this.genk.logoString,"PNG",500,8,50,40),t.setFontSize(18),t.setTextColor("rgb(255, 0, 0)"),t.setFont("","","600"),t.text(" P.O.Box 46 Kuje-Abuja",60,60),t.setFontSize(10),t.setTextColor("rgb(0, 0, 0)"),t.setFont("","","500"),t.text("(After SS Simon and Jude Minor Seminary, Kuchiyako, Kuje-Abuja)",40,75),t.setDrawColor(36,91,143),t.setLineWidth(1),t.line(350,50,350,80),t.setFontSize(8),t.setFont("","","700"),t.text("Email:",380,60),t.setFont("","","500"),t.text(this.myschool?.email??"",418,60),t.setFont("","","700"),t.text("Phone:",380,70),t.setFont("","","500"),t.text(this.myschool?.phoneOne??"",418,70),t.setFont("","","700"),t.text("website:",380,80),t.setFont("","","500"),t.text(this.myschool?.website??"",418,80),t.setDrawColor(36,91,143),t.setLineWidth(2),t.line(20,87,580,87),t.setFontSize(8),t.setFont("","","700"),t.text("STUDENTS NAME:",20,100),t.setFont("","","500"),t.text(((this.studentobj?.surname??"")+" "+(this.studentobj?.middleName??"")+" "+(this.studentobj?.firstName??"")).trim(),113,100),t.setFont("","","700"),t.text("CLASS:",20,112),t.setFont("","","500"),t.text(this.className??"",113,112),t.setFont("","","700"),t.text("NO. IN CLASS:",20,124),t.setFont("","","500"),t.text(this.noInClass.toString(),113,124),t.setFont("","","700"),t.text("TERM:",380,100),t.setFont("","","500"),t.text(this.currentTerm,460,100),t.setFont("","","700"),t.text("SESSION:",380,112),t.setFont("","","500"),t.text(this.currentSession,460,112),t.setFont("","","700"),t.text("ADMISSION NO.:",380,124),t.setFont("","","500"),t.text(this.studentobj?.admissionNo??"",460,124),t.setFontSize(12),t.setFont("","","700"),t.text("TERMLY EVALUATION REPORT",c/2,150,{align:"center"});let m=this.resultlist,S=[];m.forEach(me=>{let Be=[];Be.push(me.subject),Object.keys(this.caSetupData).forEach(zi=>{Be.push(me[zi.toLowerCase()])}),Be.push(me.totalScore),Be.push(me.grade),Be.push(me.remark),Be.push(me.position),Be.push(me.lowestScore),Be.push(me.highestScore),Be.push(me.average),S.push(Be)});let b=this.caSetupData,g=Object.keys(b),y=Object.values(b),U=Object.values(this.caSetupScoreData);for(let me=0;me<y.length;me++)y[me]=y[me];let O=["Subject",...y,"Total Score","Grade","Remark","Position","Lowest Score","Highest Score","Average"],Y=S;(0,Ve.default)(t,{head:[O],body:S,alternateRowStyles:{fillColor:[250,250,250]},styles:{font:"8px",lineColor:"#808080",lineWidth:.1,fontSize:8,cellPadding:3},headStyles:{fontSize:7,lineColor:"white",halign:"left",valign:"middle",textColor:"white",fillColor:[45,113,177],cellPadding:[5,1,5,3]},startY:155,tableWidth:562,margin:{left:20}});let ee=t.previousAutoTable.finalY;t.setFontSize(10),(0,Ve.default)(t,{body:[[{content:"Analysis",rowSpan:2,styles:{valign:"middle",halign:"center",fontSize:10,fontStyle:"bold"}},{content:`Subject Offered: ${this.subjectOffered}`,styles:{font:"600"}},{content:`Total Mark Obtainable: ${this.markObtainable}`,styles:{font:"600"}},{content:`Total Mark Obtained: ${this.studentTotal}`,styles:{font:"600"}}],[{content:`Student Average: ${this.average}`,styles:{font:"600"}},{content:`Position: ${this.position}`,styles:{font:"600"}},{content:`Class Average: ${this.classAverage}`,styles:{font:"600"}}]],theme:"grid",styles:{font:"6px",fontSize:8,cellPadding:3,textColor:"#000000",halign:"center",lineColor:"#808080",lineWidth:.1},startY:ee,margin:{left:20},tableWidth:552});let Z=t.previousAutoTable.finalY;t.setFontSize(9),t.setFont("","","600"),t.text("PSYCOMOTOR DOMAIN",85,Z+16),t.setFont("","","600"),t.text("COGNITIVE DOMAIN RATING",382,Z+16),(0,Ve.default)(t,{head:[["Color","Grade","Score Range","Remark"]],body:this.gradeScalelist.map(me=>[{content:me.color,styles:{fontStyle:"bold",textColor:me.color.toLowerCase()}},me.grade,`${me.begLimit} - ${Math.floor(me.endLimit)}`,me.remarks]),styles:{fontSize:6,cellPadding:3,lineColor:"#808080",lineWidth:.1},headStyles:{fontStyle:"bold",fontSize:6,fillColor:[230,230,230],textColor:[0,0,0]},alternateRowStyles:{fillColor:[255,255,255]},tableWidth:280,startY:Z+20,margin:{top:150,left:300,bottom:30}});let Se=t.previousAutoTable.finalY;(0,Ve.default)(t,{head:[["Skill","Score"]],body:this.psycomotorlist2.map(me=>[me.skill,me.score]),styles:{fontSize:7,cellPadding:3,lineColor:"#808080",lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[250,250,250],textColor:[0,0,0],fontSize:7},alternateRowStyles:{fillColor:[255,255,255]},columnStyles:{0:{halign:"left"},1:{halign:"center"}},startY:Z+20,margin:{top:150,left:20,bottom:30},tableWidth:130}),(0,Ve.default)(t,{head:[["Skill","Score"]],body:this.psycomotorlist2.map(me=>[me.skill,me.score]),styles:{fontSize:7,cellPadding:3,lineColor:"#808080",lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[250,250,250],textColor:[0,0,0],fontSize:7},alternateRowStyles:{fillColor:[255,255,255]},columnStyles:{0:{halign:"left"},1:{halign:"center"}},startY:Z+20,margin:{top:150,left:150,bottom:30},tableWidth:130});let ve=t.previousAutoTable.finalY;(0,Ve.default)(t,{body:[["No. of Times School Open",this.estAttendance?.noOfOpenDays],["Time(s) Present",this.estAttendance?.noPresentDays],["Time(s) Absent",this.estAttendance?.noAbsentDays]],styles:{fontSize:7,cellPadding:3,lineColor:"#808080",lineWidth:.1},alternateRowStyles:{fillColor:[255,255,255]},columnStyles:{0:{halign:"left"},1:{halign:"center"}},startY:ve+5,tableWidth:260,margin:{top:150,left:20,bottom:30}}),(0,Ve.default)(t,{body:[[{content:"5 = Distinction  4 = Very Good  3 = Good  2 = Poor  1 = Needs Attention",styles:{halign:"left",cellPadding:5}}]],styles:{fontSize:7,cellPadding:2,lineColor:"#808080",lineWidth:.1},startY:Se+5,tableWidth:280,margin:{top:150,left:300,bottom:30},theme:"plain"});let ye=t.previousAutoTable.finalY,V=[[{content:"HEIGHT",colSpan:2,styles:{halign:"center",fontStyle:"bold",fontSize:7}},{content:"WEIGHT",colSpan:2,styles:{halign:"center",fontStyle:"bold",fontSize:7}},{content:"Illness Stats",colSpan:2,styles:{halign:"center",fontStyle:"bold",fontSize:7}}],[{content:"Beginning of Term",styles:{fontStyle:"bold",fontSize:6}},{content:"End of Term",styles:{fontStyle:"bold",fontSize:6}},{content:"Beginning of Term",styles:{fontStyle:"bold",fontSize:6}},{content:"End of Term",styles:{fontStyle:"bold",fontSize:6}},{content:"Number of days absent due to Illness",styles:{fontStyle:"bold",fontSize:6}},{content:"Nature of Illness",styles:{fontStyle:"bold",fontSize:6}}]],R=[[{content:`${this.bmi?.heightBOT||""}cm`,styles:{fontSize:7}},{content:`${this.bmi?.heightEOT||""}cm`,styles:{fontSize:7}},{content:`${this.bmi?.weightBOT||""}cm`,styles:{fontSize:7}},{content:`${this.bmi?.weightEOT||""}cm`,styles:{fontSize:7}},{content:"0",styles:{fontSize:7}},{content:"",styles:{fontSize:7}}]];t.setFontSize(9),t.setFont("","","700"),t.text("PHYSICAL DEVELOPMENT & HEALTH",c/2,ye+30,{align:"center"}),(0,Ve.default)(t,{head:V,body:R,startY:ye+35,styles:{fontSize:6,cellPadding:2,lineColor:"#808080",lineWidth:.1},tableWidth:565,margin:{top:150,left:20,bottom:30},headStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:7},alternateRowStyles:{fillColor:[255,255,255]}});let le=t.previousAutoTable.finalY;(0,Ve.default)(t,{head:[[{content:"CLUB",styles:{halign:"center",fontSize:5}},{content:"OFFICE HELD",styles:{halign:"center",fontSize:5}},{content:"SIGNIFICANT CONTRIBUTION",styles:{halign:"center",fontSize:5}}]],body:[["","",""],["","",""]],theme:"grid",styles:{fontSize:6,cellPadding:2,lineColor:"#808080",lineWidth:.1},startY:le+20,tableWidth:170,margin:{top:150,left:400,bottom:30},headStyles:{fillColor:[255,255,255],fontSize:6,textColor:[0,0,0]},bodyStyles:{textColor:[0,0,0]},columnStyles:{0:{halign:"center"},1:{halign:"center"},2:{halign:"center"}}}),t.setTextColor("rgb(0, 0, 0)"),t.setFontSize(8),t.setFont("","","600");let Bi=t.splitTextToSize("Doctor's Remark",80);t.text(Bi,20,le+20+15),t.setDrawColor(200,200,200),t.setLineWidth(1),t.line(80,le+20,390,le+20),t.line(80,le+20,80,le+20+30),t.line(80,le+20+30,390,le+20+30),t.line(390,le+20+30,390,le+20),t.save("My_Results")}addLogo(){return new Promise((e,i)=>{this.sch.getSchoolLogoArray(this.myschool.id).subscribe(t=>{t?.photo?this.genk.logoString=`data:image/jpeg;base64,${t.photo}`:this.genk.logoString="",e()},t=>i(t))})}addSignature(){return new Promise((e,i)=>{this.sch.obtainSignatureArray(this.currentSessionId,this.currentTerm).subscribe(t=>{debugger;t?.photo?this.genk.signatureString=`data:image/jpeg;base64,${t.photo}`:this.genk.signatureString="",e()},t=>i(t))})}floorNum(e){return Math.floor(e)}over60Num(e){let i=0,d=(e/100*60).toString().split(".");return d.length>1?i=+(d[0]+"."+d[1][0]):i=Number(d[0]),i}over40Num(e){let i=0,d=(e/100*40).toString().split(".");return d.length>1?i=+(d[0]+"."+d[1][0]):i=Number(d[0]),i}getScoreColor(e,i){if(i==100){if(e>=this.grademinimumlist[0].minscore)return this.grademinimumlist[0].color;if(e>=this.grademinimumlist[1].minscore&&e<this.grademinimumlist[0].minscore)return this.grademinimumlist[1].color;if(e>=this.grademinimumlist[2].minscore&&e<this.grademinimumlist[1].minscore)return this.grademinimumlist[2].color;if(e>=this.grademinimumlist[3].minscore&&e<this.grademinimumlist[2].minscore)return this.grademinimumlist[3].color}else if(i==60){if(e>=this.grademinimumlistOver60[0].minscore)return this.grademinimumlistOver60[0].color;if(e>=this.grademinimumlistOver60[1].minscore&&e<this.grademinimumlistOver60[0].minscore)return this.grademinimumlistOver60[1].color;if(e>=this.grademinimumlistOver60[2].minscore&&e<this.grademinimumlistOver60[1].minscore)return this.grademinimumlistOver60[2].color;if(e>=this.grademinimumlistOver60[3].minscore&&e<this.grademinimumlistOver60[2].minscore)return this.grademinimumlistOver60[3].color}}getRemarkColor(e){return this.grademinimumlist.filter(i=>i.remark?.toLowerCase()==e?.toLowerCase())[0]?.color}renderPdfChart(){let e=document.getElementById("myChart"),i=e.getContext("2d");this.chartAverageScore=this.resultlist.map(d=>d.average),this.chartLowestScore=this.resultlist.map(d=>d.lowestScore),this.chartHighestScore=this.resultlist.map(d=>d.highestScore),this.chartTotalScore=this.resultlist.map(d=>d.totalScore),this.chartSubjects=this.resultlist.map(d=>d.subject),console.log(this.chartSubjects);let t=new At(i,{type:"line",data:{labels:this.chartSubjects,datasets:[{label:"My Score",backgroundColor:"rgb(19, 78, 227)",borderColor:"rgb(19, 78, 227)",pointBackgroundColor:"rgb(19, 78, 227)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(255,99,132,0.8)",pointStyle:"circle",pointRadius:8,pointHoverRadius:15,data:this.chartTotalScore},{label:"Highest Score",backgroundColor:"rgba(255,99,132,1)",borderColor:"rgba(255,99,132,1)",pointBackgroundColor:"rgba(255,99,132,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(255,99,132,0.8)",pointStyle:"circle",pointRadius:8,pointHoverRadius:15,data:this.chartHighestScore},{label:"Lowest Score",backgroundColor:"rgb(67, 193, 25)",borderColor:"rgb(67, 193, 25)",pointBackgroundColor:"rgb(67, 193, 25)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(255,99,132,0.8)",pointStyle:"circle",pointRadius:8,pointHoverRadius:15,data:this.chartLowestScore},{label:"Average Score",backgroundColor:"rgb(227, 168, 19)",borderColor:"rgb(227, 168, 19)",pointBackgroundColor:"rgb(227, 168, 19)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(255,99,132,0.8)",pointStyle:"circle",pointRadius:8,pointHoverRadius:15,data:this.chartAverageScore}]},options:{responsive:!0,scales:{x:{ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!1}},plugins:{legend:{position:"top"}},animation:{onComplete:d=>{console.log("Animation completed");var c=new ae("p","pt","letter"),m=c.internal.pageSize.height||c.internal.pageSize.getHeight(),S=c.internal.pageSize.width||c.internal.pageSize.getWidth();c.setFont("Ariel","normal","900"),c.setTextColor("rgb(36, 91, 143)"),c.setFontSize(34),c.text("Notre Dame Girls' Academy",S/2,40,{align:"center"}),this.genk.logoString&&c.addImage(this.genk.logoString,"PNG",20,8,70,60),this.genk.signatureString&&c.addImage(this.genk.signatureString,"PNG",495,705,70,55),c.setFontSize(18),c.setTextColor("rgb(255, 0, 0)"),c.setFont("","","600"),c.text(" P.O.Box 46 Kuje-Abuja",S/2,62,{align:"center"}),c.setFontSize(13),c.setTextColor("rgb(0, 0, 0)"),c.setFont("","","700"),c.text("TERMLY EVALUATION ANALYSIS FOR AJALA , ANUOLUWAPO ASHLEY ",S/2,85,{align:"center"}),c.setFontSize(12),c.setFont("","","600");let b=c.splitTextToSize("Form Teacher's Comment:",200);c.text(b,30,500),c.setFont("","","500"),c.setTextColor("rgb(36, 91, 143)"),c.setFontSize(10);let g=c.splitTextToSize(this.resultComment?.formTeacherComment??"",500);c.text(g,30,515),c.setTextColor("rgb(0, 0, 0)"),c.setFont("","","600"),c.setFontSize(12);let y=c.splitTextToSize("Principal's Comment:",200);c.text(y,30,560),c.setFont("","","500"),c.setTextColor("rgb(36, 91, 143)"),c.setFontSize(10);let U=c.splitTextToSize(this.resultComment?.principalComment??"",500);c.text(U,30,575),c.setTextColor("rgb(36, 91, 143)"),c.setFontSize(9),c.setFont("","","600");let O=c.splitTextToSize("Principal's Signature Date & Stamp:",80);c.text(O,415,730);let Y=e.toDataURL("image/png");console.log(Y),c.addImage(Y,"PNG",20,150,560,280,void 0,"SLOW"),c.save("chart.pdf");let ee=document.getElementById("myChart"),Z=document.getElementById("chartdiv");Z.removeChild(ee);let Se=document.createElement("canvas");Se.id="myChart",Se.width=3600,Se.height=1800,Se.style.display="none",Z.appendChild(Se)},duration:1e3}}})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(G),_(L),_(j),_($e))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:197,vars:30,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[2,"display","flex","justify-content","space-evenly","padding","20px 0"],[3,"ngClass","click"],[2,"background-color","chocolate",3,"disabled","ngClass","click"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],["prin",""],[1,"card-body","p-12"],[2,"font-family","'Poppins-Medium'"],[2,"text-align","center","margin-bottom","20px"],[2,"font-size","39px","color","rgb(36, 91, 143)","font-weight","900"],[2,"display","flex","justify-content","space-between","font-size","16px"],[1,"col-4"],[2,"font-weight","600"],[1,"col-4","text-center"],[2,"object-fit","cover","height","100px","width","100px","border-radius","100%",3,"src"],[2,"height","6px","background-color","rgb(36, 91, 143)","margin-top","30px"],[2,"display","flex","justify-content","space-between","font-size","17px"],[2,"text-align","center","margin-top","10px"],["id","ireg",1,"heitable",2,"width","100%"],["span","2"],[2,"text-align","center","font-size","10px","font-weight","600"],["colspan","2","scope","colgroup"],[2,"font-size","10px","font-weight","600"],["scope","col"],[2,"font-size","10px"],[2,"margin","50px 0 30px 0"],["id","attend",2,"width","40%"],["id","mykey",2,"border","1px solid rgb(52, 54, 55)","width","50%"],[2,"font-size","9px"],[2,"padding","2px 5px"],["id","club"],[2,"font-size","7px"],[2,"padding","0 0 50px 50px"],[2,"margin-bottom","15px"],[2,"font-size","15px","font-weight","600","color","rgb(75, 73, 73)"],[2,"font-size","15px","color","rgb(9, 95, 182)","font-style","italic"],["id","chartdiv"],["id","myChart","width","3600","height","1800",2,"display","none"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div")(2,"div")(3,"div")(4,"div")(5,"div",1)(6,"div",2)(7,"button",3),v("click",function(){w(d);let m=E(14);return T(t.convertToPDF(m))}),r(8," Print Result"),s(),n(9,"button",4),v("click",function(){return t.renderPdfChart()}),r(10,"Print Performance Analysis"),s()(),n(11,"div",5)(12,"div",6)(13,"div",7,8)(15,"div",9)(16,"div",10)(17,"div",11)(18,"span",12),r(19),s()(),n(20,"div",13)(21,"div",14)(22,"span",15),r(23,"Postal Address:"),s(),f(24,"br"),n(25,"span"),r(26),s()(),n(27,"div",16),f(28,"img",17),s(),n(29,"div",14)(30,"span",15),r(31,"Email: "),s(),n(32,"span"),r(33),s(),f(34,"br"),n(35,"span",15),r(36,"Phone: "),s(),n(37,"span"),r(38),s(),f(39,"br"),n(40,"span",15),r(41,"website: "),s(),n(42,"span"),r(43),s()()(),f(44,"div",18),n(45,"div",19)(46,"div")(47,"span",15),r(48,"STUDENTS NAME: "),s(),n(49,"span"),r(50),s(),f(51,"br"),n(52,"span",15),r(53,"CLASS NAME: "),s(),n(54,"span"),r(55),s(),f(56,"br"),n(57,"span",15),r(58,"NO. IN CLASS: "),s(),n(59,"span"),r(60),s(),f(61,"br"),n(62,"span",15),r(63,"AVERAGE SCORE: "),s(),n(64,"span"),r(65),s(),f(66,"br"),n(67,"span",15),r(68,"TOTAL SCORE: "),s(),n(69,"span"),r(70),s(),f(71,"br"),n(72,"span",15),r(73,"POSITION IN CLASS: "),s(),n(74,"span"),r(75),s()(),n(76,"div",14)(77,"span",15),r(78,"TERM: "),s(),n(79,"span"),r(80),s(),f(81,"br"),n(82,"span",15),r(83,"SESSION: "),s(),n(84,"span"),r(85),s(),f(86,"br"),n(87,"span",15),r(88,"ADMISSION NO.: "),s(),n(89,"span"),r(90),s(),f(91,"br"),n(92,"span",15),r(93,"NEXT TERM BEGINS: "),s(),n(94,"span"),r(95),Ie(96,"date"),s(),f(97,"br"),n(98,"span",15),r(99,"HOUSE: "),s(),f(100,"span")(101,"br"),n(102,"span",15),r(103,"NO OF TIMES PRESENT: "),s(),f(104,"span")(105,"br"),s()(),n(106,"div",20)(107,"h1"),r(108,"CONTINUOUS ASSESSMENT DOSSIER FOR JUNIOR AND SENIOR SECONDARY SCHOOL"),s()(),f(109,"div"),s(),n(110,"table",21),f(111,"colgroup",22)(112,"colgroup",22),n(113,"tr",23)(114,"th",24),r(115,"HEIGHT"),s(),n(116,"th",24),r(117,"WEIGHT"),s(),n(118,"th",24),r(119,"Illness Stats"),s()(),n(120,"tr",25)(121,"th",26),r(122,"Beginning of Term"),s(),n(123,"th",26),r(124,"End of Term"),s(),n(125,"th",26),r(126,"Beginning of Term"),s(),n(127,"th",26),r(128,"End of Term"),s(),n(129,"th",26),r(130,"Number of days absent due to Illness"),s(),n(131,"th",26),r(132,"Nature of Illness"),s()(),n(133,"tr",27)(134,"td",26),r(135),s(),n(136,"td",26),r(137),s(),n(138,"td",26),r(139),s(),n(140,"td",26),r(141),s(),n(142,"td",26),r(143,"0"),s(),f(144,"td",26),s()(),n(145,"div",28)(146,"table",29)(147,"tr",27)(148,"td"),r(149,"No. of Times School Open"),s(),n(150,"td"),r(151),s()(),n(152,"tr",27)(153,"td"),r(154,"Time(s) Present"),s(),n(155,"td"),r(156),s()(),n(157,"tr",27)(158,"td"),r(159,"Time(s) Absent"),s(),n(160,"td"),r(161),s()()(),n(162,"table",30)(163,"tr",31)(164,"td",32),r(165,"5 = Distinction\xA0\xA0 4 = Very Good \xA0\xA0 3 = Good \xA0\xA0 2 = Poor \xA0\xA0 1 = Needs Attention "),s()()()()(),n(166,"table",33)(167,"tr",34)(168,"td"),r(169,"CLUB"),s(),n(170,"td"),r(171,"OFFICE HELD"),s(),n(172,"td"),r(173,"SIGNIFICANT CONTRIBUTION"),s()(),n(174,"tr",34),f(175,"td")(176,"td")(177,"td"),s(),n(178,"tr",34),f(179,"td")(180,"td")(181,"td"),s()(),n(182,"div",35)(183,"div",36)(184,"span",37),r(185,"Form Teacher's Comment:"),s(),r(186," \xA0\xA0 "),n(187,"span",38),r(188),s()(),n(189,"div")(190,"span",37),r(191,"Principal's Comment:"),s(),r(192," \xA0\xA0 "),n(193,"span",38),r(194),s()()()()()()()()()(),n(195,"div",39),f(196,"canvas",40),s()()()}if(i&2){let d;l(7),h("ngClass","resprint"),l(2),h("disabled",!t.logoLoaded)("ngClass",t.logoLoaded?"resprint":"resprintdisabled"),l(10),p(t.myschool==null?null:t.myschool.schoolName),l(7),p(t.myschool==null?null:t.myschool.address),l(2),h("src",t.myschool==null?null:t.myschool.schoolLogo,oe),l(5),p(t.myschool==null?null:t.myschool.email),l(5),p(t.myschool==null?null:t.myschool.phoneOne),l(5),p(t.myschool==null?null:t.myschool.website),l(7),p((((d=t.studentobj==null?null:t.studentobj.surname)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.middleName)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.firstName)!==null&&d!==void 0?d:"")).trim()),l(5),p(t.className),l(5),p(t.noInClass),l(5),p(t.average),l(5),p(t.studentTotal==null?null:t.studentTotal.toFixed(1)),l(5),p(t.position),l(5),p(t.currentTerm),l(5),p(t.currentSession),l(5),p(t.studentobj==null?null:t.studentobj.admissionNo),l(5),p(Oe(96,28,t.nextResumptionDate)),l(40),I("",t.bmi==null?null:t.bmi.heightBOT,"cm"),l(2),I("",t.bmi==null?null:t.bmi.heightEOT,"cm"),l(2),I("",t.bmi==null?null:t.bmi.weightBOT,"cm"),l(2),I("",t.bmi==null?null:t.bmi.weightEOT,"cm"),l(10),p(t.estAttendance==null?null:t.estAttendance.noOfOpenDays),l(5),p(t.estAttendance==null?null:t.estAttendance.noPresentDays),l(5),p(t.estAttendance==null?null:t.estAttendance.noAbsentDays),l(27),p(t.resultComment==null?null:t.resultComment.formTeacherComment),l(6),p(t.resultComment==null?null:t.resultComment.principalComment)}},dependencies:[yt,Re],styles:["#customers[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px;font-size:9px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}.heitable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(186,187,190);padding:2px 5px}.resprint[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#1e90ff;color:#fff;border-radius:20px;box-shadow:1px 1px 3px #0000004d}.resprintdisabled[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#a0a3a6;color:#000;border-radius:20px;box-shadow:1px 1px 3px #0000004d}#customerslouismidterm[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerslouismidterm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:11px}#customerslouismidterm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;font-size:11px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}#customerstrail[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerstrail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:4px;font-size:10px}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customerstrail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-size:10px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}"]});let o=u;return o})();ke();var Tt=K(Pe());function jl(o,u){if(o&1&&(n(0,"tr",24)(1,"td"),r(2),s(),n(3,"td"),r(4),s(),n(5,"td"),r(6),s()()),o&2){let a=u.$implicit,e=x(),i,t;l(2),p(a.subject),l(2),p((i=e.toNumber(a.totalScore))!==null&&i!==void 0?i:""),l(2),p((t=(t=e.calMinGrade(e.toNumber(a.totalScore)))==null?null:t.grade)!==null&&t!==void 0?t:"")}}var Ii=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.activeRoute=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.gradeScalelist=[],this.gradescaletextlist=[],this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Dashboard",this.studentId=this.activeRoute.snapshot.params.id,this.activeRoute.queryParams.subscribe(e=>{this.currentTerm=e.term,this.currentSessionId=e.currentSessionId,this.currentSession=e.currentSession,this.currentClassId=e.classId,this.average=e.average,this.position=e.position}),this.getSchool(),this.getMidtermMax(),this.getStudent(),this.getNoInClass(),this.getResultsByStudent(),this.getCaSetupByClass(),this.getGradeScaleByClass(),this.getStudentResultComment()}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getSchool(){this.sch.getSchoolData().subscribe(e=>H(this,null,function*(){this.myschool=e,this.addLogo(),this.addSignature()}))}getStudent(){this.sch.getStudentById(this.studentId.toString()).subscribe(e=>{this.studentobj=e})}getNoInClass(){this.sch.getNoInClass(this.studentId.toString()).subscribe(e=>{this.noInClass=e.count})}getMidtermMax(){this.sch.getMidtermMaxValue(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.midtermMaxValue=e.max})}getResultsByStudent(){this.sch.getMidtermResultsPageSession(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultlist=e})}getStudentResultComment(){this.sch.getStudentResultComment(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e,this.gradescaletextlist.push(this.gradeScalelist[0].classLevel+":");let i;this.gradeScalelist.forEach(t=>{i=t.grade+" = "+t.remarks+" ("+t.begLimit+" - "+t.endLimit+")",this.gradescaletextlist.push(i)})})}overMinNum(e,i){let t=0,c=(e/100*i).toString().split(".");return c.length>1?t=+(c[0]+"."+c[1][0]):t=Number(c[0]),t}calMinGrade(e){let i;return this.gradeScalelist.forEach(t=>{let d=this.overMinNum(t.begLimit,this.midtermMaxValue),c=this.overMinNum(t.endLimit,this.midtermMaxValue);e>=d&&e<=c&&(i={grade:t.grade,remark:t.remarks})}),i||{grade:"i",remark:"Not Aplicable"}}toNumber(e){return Number(e).toFixed(1)}convertToPDF(e){debugger;var i=new ae("p","pt","letter"),t=i.internal.pageSize.height||i.internal.pageSize.getHeight(),d=i.internal.pageSize.width||i.internal.pageSize.getWidth();i.setFont("Trebuchet MS","normal","900"),i.setTextColor("rgb(36, 91, 143)"),i.setFontSize(20),i.text(this.myschool?.schoolName??"",d/2,30,{align:"center"}),this.genk.logoString&&i.addImage(this.genk.logoString,"PNG",270,40,55,55),this.genk.signatureString&&i.addImage(this.genk.signatureString,"PNG",495,705,90,55),i.setFontSize(10),i.setTextColor("rgb(0, 0, 0)"),i.setFont("","","700"),i.text("Postal Address:",20,60),i.setFont("","","500");let c=i.splitTextToSize(this.myschool?.address??"",220);i.text(c,20,73),i.setFont("","","700"),i.text("Email:",380,60),i.setFont("","","500"),i.text(this.myschool?.email??"",418,60),i.setFont("","","700"),i.text("Phone:",380,74),i.setFont("","","500"),i.text(this.myschool?.phoneOne??"",418,74),i.setFont("","","700"),i.text("website:",380,88),i.setFont("","","500"),i.text(this.myschool?.website??"",424,88),i.setDrawColor(36,91,143),i.setLineWidth(2),i.line(20,100,580,100),i.setFontSize(8),i.setFont("","","700"),i.text("STUDENTS NAME:",20,120),i.setFont("","","500"),i.text(((this.studentobj?.surname??"")+" "+(this.studentobj?.middleName??"")+" "+(this.studentobj?.firstName??"")).trim(),113,120),i.setFont("","","700"),i.text("CLASS:",20,132),i.setFont("","","500"),i.text(this.studentobj?.class??"",113,132),i.setFont("","","700"),i.text("NO. IN CLASS:",20,144),i.setFont("","","500"),i.text(this.noInClass.toString(),113,144),i.setFont("","","700"),i.text("AVERAGE SCORE:",20,156),i.setFont("","","500"),i.text(this.average.toString(),113,156),i.setFont("","","700"),i.text("POSITION IN CLASS:",20,168),i.setFont("","","500"),i.text(this.position.toString(),113,168),i.setFont("","","700"),i.text("TERM:",380,120),i.setFont("","","500"),i.text(this.currentTerm,460,120),i.setFont("","","700"),i.text("SESSION:",380,132),i.setFont("","","500"),i.text(this.currentSession,460,132),i.setFont("","","700"),i.text("ADMISSION NO.:",380,144),i.setFont("","","500"),i.text(this.studentobj?.admissionNo??"",460,144),i.setFont("","","700"),i.text("NEXT TERM BEGINS:",380,156),i.setFont("","","500"),i.text("",460,156),i.setFontSize(12),i.setFont("","","700"),i.text("MID TERM RESULT FOR JUNIOR SECONDARY SCHOOL",d/2,190,{align:"center"}),(0,Tt.default)(i,{html:"#customerslouismidterm",styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:200,margin:{top:150,left:20,bottom:70}}),i.setFontSize(10),(0,Tt.default)(i,{html:"#mykey",styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},headStyles:{lineColor:"white"},startY:620,margin:{top:150,left:20,bottom:30}}),i.setTextColor("rgb(36, 91, 143)"),i.setFontSize(9),i.setFont("","","600");let m=i.splitTextToSize("Principal's Signature:",80);i.text(m,415,730),i.setFontSize(9),i.setFont("","","600"),i.setTextColor("rgb(36, 91, 143)");let S=i.splitTextToSize("Form Teacher's Signature:",100);i.text(S,20,540),i.setDrawColor(150,150,150),i.setLineWidth(1),i.line(170,543,580,543),i.setFontSize(9),i.setFont("","","600"),i.setTextColor("rgb(36, 91, 143)");let b=i.splitTextToSize("Date & Stamp:",100);i.text(b,20,575),i.setDrawColor(150,150,150),i.setLineWidth(1),i.line(170,578,580,578),i.save("My_Results")}convertToPDFLouis(){debugger;var e=new ae("p","pt","letter"),i=e.internal.pageSize.height||e.internal.pageSize.getHeight(),t=e.internal.pageSize.width||e.internal.pageSize.getWidth();e.setFont("Trebuchet MS","normal","900"),e.setTextColor("rgb(36, 91, 143)"),e.setFontSize(20),e.text(this.myschool?.schoolName??"",t/2,30,{align:"center"}),this.genk.logoString&&e.addImage(this.genk.logoString,"PNG",270,40,55,55),this.genk.signatureString&&e.addImage(this.genk.signatureString,"PNG",495,705,90,55),e.setFontSize(10),e.setTextColor("rgb(0, 0, 0)"),e.setFont("","","700"),e.text("Postal Address:",20,60),e.setFont("","","500");let d=e.splitTextToSize(this.myschool?.address??"",220);e.text(d,20,73),e.setFont("","","700"),e.text("Email:",380,60),e.setFont("","","500"),e.text(this.myschool?.email??"",418,60),e.setFont("","","700"),e.text("Phone:",380,74),e.setFont("","","500"),e.text(this.myschool?.phoneOne??"",418,74),e.setFont("","","700"),e.text("website:",380,88),e.setFont("","","500"),e.text(this.myschool?.website??"",424,88),e.setDrawColor(36,91,143),e.setLineWidth(2),e.line(20,100,580,100),e.setFontSize(8),e.setFont("","","700"),e.text("STUDENTS NAME:",20,120),e.setFont("","","500"),e.text(((this.studentobj?.surname??"")+" "+(this.studentobj?.middleName??"")+" "+(this.studentobj?.firstName??"")).trim(),113,120),e.setFont("","","700"),e.text("CLASS:",20,132),e.setFont("","","500"),e.text(this.studentobj?.class??"",113,132),e.setFont("","","700"),e.text("NO. IN CLASS:",20,144),e.setFont("","","500"),e.text(this.noInClass.toString(),113,144),e.setFont("","","700"),e.text("AVERAGE SCORE:",20,156),e.setFont("","","500"),e.text(this.average.toString(),113,156),e.setFont("","","700"),e.text("POSITION IN CLASS:",20,168),e.setFont("","","500"),e.text(this.position.toString(),113,168),e.setFont("","","700"),e.text("TERM:",380,120),e.setFont("","","500"),e.text(this.currentTerm,460,120),e.setFont("","","700"),e.text("SESSION:",380,132),e.setFont("","","500"),e.text(this.currentSession,460,132),e.setFont("","","700"),e.text("ADMISSION NO.:",380,144),e.setFont("","","500"),e.text(this.studentobj?.admissionNo??"",460,144),e.setFont("","","700"),e.text("NEXT TERM BEGINS:",380,156),e.setFont("","","500"),e.text("",460,156),e.setFontSize(12),e.setFont("","","700"),e.text("MID TERM RESULT FOR JUNIOR SECONDARY SCHOOL",t/2,190,{align:"center"});let c=this.resultlist,m=[];c.forEach(O=>{let Y=[];Y.push(O.subject),Y.push(Number(Number(O.totalScore).toFixed(2))),Y.push(this.calMinGrade(Number(this.toNumber(O.totalScore)))?.grade??""),m.push(Y)});let S=["Subject","Score("+this.midtermMaxValue+"%)","Grade"],b=m;(0,Tt.default)(e,{head:[S],body:m,alternateRowStyles:{fillColor:[245,245,245]},styles:{font:"8px",lineColor:[200,200,200],lineWidth:.1,fontSize:9,cellPadding:5},headStyles:{fontSize:9,lineColor:"white",halign:"left",valign:"middle",textColor:"white",fillColor:[45,113,177],cellPadding:[5,5,5,3]},startY:205,tableWidth:562,margin:{left:20}}),e.setTextColor("rgb(36, 91, 143)"),e.setFontSize(9),e.setFont("","","600");let g=e.splitTextToSize("Principal's Signature:",80);e.text(g,415,730),e.setFontSize(9),e.setFont("","","600"),e.setTextColor("rgb(36, 91, 143)");let y=e.splitTextToSize("Form Teacher's Signature:",100);e.text(y,20,540),e.setDrawColor(150,150,150),e.setLineWidth(1),e.line(170,543,580,543),e.setFontSize(9),e.setFont("","","600"),e.setTextColor("rgb(36, 91, 143)");let U=e.splitTextToSize("Date & Stamp:",100);e.text(U,20,575),e.setDrawColor(150,150,150),e.setLineWidth(1),e.line(170,578,580,578),e.save("My_Results")}addLogo(){this.sch.getSchoolLogo(this.myschool.id).subscribe(e=>{let i=this.genk.getLogoMediaBase64(e,e.type)})}addSignature(){this.sch.obtainSignature(this.currentSessionId,this.currentTerm).subscribe(e=>{let i=this.genk.getMediaBase64(e,e.type)})}getBase64ImageFromUrl(e){return H(this,null,function*(){var i=yield fetch(e);let t=yield i.text();var c=this.base64ToBlob(t,"image/png");return new Promise((m,S)=>{var b=new FileReader;b.addEventListener("load",function(){debugger;m(b.result)},!1),b.onerror=()=>S(this),b.readAsDataURL(c)})})}base64ToBlob(e,i=""){let t=atob(e),d=[];for(let m=0;m<t.length;m+=512){let S=t.slice(m,m+512),b=new Array(S.length);for(let y=0;y<S.length;y++)b[y]=S.charCodeAt(y);let g=new Uint8Array(b);d.push(g)}return new Blob(d,{type:i})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(G),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:100,vars:16,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[2,"text-align","end","margin","10px 30px"],[2,"padding","10px 50px","border","none","outline","none","background-color","dodgerblue","color","white","border-radius","20px","box-shadow","1px 1px 3px rgb(0, 0, 0, 0.3)",3,"click"],[1,"fonticon-printer",2,"margin-right","6px","color","white","font-size","16px"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],["prin",""],[1,"card-body","p-12"],[2,"font-family","'Poppins-Medium'"],[2,"text-align","center","margin-bottom","20px"],[2,"font-size","39px","color","rgb(36, 91, 143)","font-weight","900"],[2,"display","flex","justify-content","space-between","font-size","16px"],[1,"col-4"],[2,"font-weight","600"],[1,"col-4","text-center"],[2,"object-fit","cover","height","100px","width","100px","border-radius","100%",3,"src"],[2,"height","6px","background-color","rgb(36, 91, 143)","margin-top","30px"],[2,"display","flex","justify-content","space-between","font-size","17px"],[2,"text-align","center","margin-top","10px"],["id","customerslouismidterm"],["tabl",""],["class","border-bottom border-bottom-dashed",4,"ngFor","ngForOf"],[1,"border-bottom","border-bottom-dashed"]],template:function(i,t){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),v("click",function(){return t.convertToPDFLouis()}),f(4,"i",4),r(5," Print"),s()(),n(6,"div",5)(7,"div",6)(8,"div",7,8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"span",12),r(14),s()(),n(15,"div",13)(16,"div",14)(17,"span",15),r(18,"Postal Address:"),s(),f(19,"br"),n(20,"span"),r(21),s()(),n(22,"div",16),f(23,"img",17),s(),n(24,"div",14)(25,"span",15),r(26,"Email: "),s(),n(27,"span"),r(28),s(),f(29,"br"),n(30,"span",15),r(31,"Phone: "),s(),n(32,"span"),r(33),s(),f(34,"br"),n(35,"span",15),r(36,"website: "),s(),n(37,"span"),r(38),s()()(),f(39,"div",18),n(40,"div",19)(41,"div")(42,"span",15),r(43,"STUDENTS NAME: "),s(),n(44,"span"),r(45),s(),f(46,"br"),n(47,"span",15),r(48,"CLASS NAME: "),s(),n(49,"span"),r(50),s(),f(51,"br"),n(52,"span",15),r(53,"NO. IN CLASS: "),s(),n(54,"span"),r(55),s(),f(56,"br"),n(57,"span",15),r(58,"AVERAGE SCORE: "),s(),n(59,"span"),r(60),s(),f(61,"br"),n(62,"span",15),r(63,"POSITION IN CLASS: "),s(),n(64,"span"),r(65),s()(),n(66,"div",14)(67,"span",15),r(68,"TERM: "),s(),n(69,"span"),r(70),s(),f(71,"br"),n(72,"span",15),r(73,"SESSION: "),s(),n(74,"span"),r(75),s(),f(76,"br"),n(77,"span",15),r(78,"ADMISSION NO.: "),s(),n(79,"span"),r(80),s(),f(81,"br"),n(82,"span",15),r(83,"NEXT TERM BEGINS:"),s()()(),n(84,"div",20)(85,"h1"),r(86,"MID TERM RESULT FOR JUNIOR SECONDARY SCHOOL"),s()(),f(87,"div"),s(),n(88,"table",21,22)(90,"thead")(91,"tr")(92,"th"),r(93,"Subject"),s(),n(94,"th"),r(95),s(),n(96,"th"),r(97,"Grade"),s()()(),n(98,"tbody"),C(99,jl,7,3,"tr",23),s()()()()()()()()),i&2){let d;l(14),p(t.myschool==null?null:t.myschool.schoolName),l(7),p(t.myschool==null?null:t.myschool.address),l(2),h("src",t.setImg(t.myschool==null?null:t.myschool.schoolLogo),oe),l(5),p(t.myschool==null?null:t.myschool.email),l(5),p(t.myschool==null?null:t.myschool.phoneOne),l(5),p(t.myschool==null?null:t.myschool.website),l(7),p((((d=t.studentobj==null?null:t.studentobj.surname)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.middleName)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.firstName)!==null&&d!==void 0?d:"")).trim()),l(5),p(t.studentobj==null?null:t.studentobj.class),l(5),p(t.noInClass),l(5),p(t.average),l(5),p(t.position),l(5),p(t.currentTerm),l(5),p(t.currentSession),l(5),p(t.studentobj==null?null:t.studentobj.admissionNo),l(15),p("Score("+t.midtermMaxValue+"%)"),l(4),h("ngForOf",t.resultlist)}},dependencies:[W],styles:["#customers[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px;font-size:9px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}.heitable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(186,187,190);padding:2px 5px}.resprint[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#1e90ff;color:#fff;border-radius:20px;box-shadow:1px 1px 3px #0000004d}.resprintdisabled[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#a0a3a6;color:#000;border-radius:20px;box-shadow:1px 1px 3px #0000004d}#customerslouismidterm[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerslouismidterm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:11px}#customerslouismidterm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;font-size:11px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}#customerstrail[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerstrail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:4px;font-size:10px}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customerstrail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-size:10px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}"]});let o=u;return o})();var Ke=K(Te());var Je=K(mt());function Ll(o,u){if(o&1&&(n(0,"option",115),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),I(" ",a.class,"")}}function Bl(o,u){o&1&&(n(0,"div",116)(1,"div"),r(2,"No class is selected"),s()())}function zl(o,u){o&1&&(n(0,"div",116)(1,"div"),r(2,"No term is selected"),s()())}function Vl(o,u){if(o&1&&(n(0,"option",115),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),I(" ",a.subjects,"")}}function Wl(o,u){o&1&&(n(0,"div",116)(1,"div"),r(2,"No subject is selected"),s()())}function Gl(o,u){if(o&1&&(n(0,"option",115),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),I(" ",a.sessionName,"")}}function Ul(o,u){o&1&&(n(0,"div",116)(1,"div"),r(2,"No session is selected"),s()())}function Hl(o,u){o&1&&(n(0,"div",116)(1,"div"),r(2,"No Week is selected"),s()())}function Yl(o,u){if(o&1){let a=k();n(0,"tr",117)(1,"td"),r(2),s(),n(3,"td",118),f(4,"input",119),s(),n(5,"td",120),f(6,"input",121),s(),n(7,"td")(8,"input",122,123),v("keyup",function(){let t=w(a).$implicit,d=E(9),c=x();return T(c.setCa(t.studentId,d,"Exam"))}),s()()()}if(o&2){let a=u.$implicit,e=u.index,i,t,d;l(2),p(e+1),l(2),je("value",(i=a.studentName)!==null&&i!==void 0?i:""),l(2),je("value",(t=a.admissionNo)!==null&&t!==void 0?t:""),l(2),h("value",(d=a.exam)!==null&&d!==void 0?d:"")}}var wi=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.sch=t,this.gen=d,this.cd=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.psycomotorlist=[],this.studentlist=[],this.bigboss=[],this.smallboss=[],this.psycoObjList=[],this.psylist=[],this.motorlist=[],this.classSubjects=[],this.classSubjectsBackup=[],this.resultlist=[],this.gradeScaleList=[],this.destroy=new Ee,this.submitted=!1,this.genk=d,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status,this.schoolId=i.currentUserValue.schoolId}ngOnInit(){this.genk.topdata="Weekly Result Entry",this.resultForm=new dt({term:new be(this.currentTerm,[xe.required]),sessionId:new be(this.currentSessionId,[xe.required]),subjectId:new be(this.currentSubjectId,[xe.required]),classId:new be(this.currentClass,[xe.required]),week:new be(this.selectedWeek,[xe.required])},{}),this.getClassNames(),this.getSession(),this.getCurrentSession(),this.cd.markForCheck()}get f(){return this.resultForm.controls}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.schoolClasses=e,this.cd.markForCheck()})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e,this.cd.markForCheck()})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm),this.cd.markForCheck()})}getClassSubjects(){this.sch.getSubjectByClass(this.currentClass.toString()).subscribe(e=>{console.log(e),this.classSubjects=e,this.classSubjectsBackup=e,this.cd.markForCheck()})}getStudents(){if(this.submitted=!0,this.resultForm.invalid){this.cd.markForCheck();return}this.sch.getStudents(this.currentClass.toString()).subscribe(e=>{this.studentlist=e,this.getResultsByClass(),this.getCaSetupByClass(),this.submitted=!0,this.cd.markForCheck()})}getResultsByClass(){this.sch.getWeeklyResultsByClass(this.currentClass.toString(),this.currentSessionId.toString(),this.currentTerm,this.selectedWeek.toString(),this.currentSubjectId.toString()).subscribe(e=>{this.resultlist=e,this.bigboss=[]})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClass.toString(),this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname,this.caScoreData=e.score})}getGradeScale(e){this.currentClass=Number(e),this.getClassSubjects();let t=this.schoolClasses.filter(d=>d.id==this.currentClass)[0].classLevelId;this.sch.getGradeScaleByCategory(t).subscribe(d=>{this.gradeScaleList=d,this.cd.markForCheck()})}setCa(e,i,t){debugger;let d,c;if(!/^\d+\.(0)?$/.test(i.value))if(this.bigboss.filter(m=>m.studentId==Number(e)).length>0){d=this.bigboss.filter(b=>b.studentId==Number(e))[0],c=this.resultlist.filter(b=>b.studentId==Number(e))[0];let m=this.clearInput(Number(i.value),this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))][t.toUpperCase()]);i.value=m.toString(),d[t]=m,d.totalScore=Number(d.Exam??this.checkCA(c.exam));let S=this.calGrade(d.totalScore);d.grade=S.grade,d.remark=S.remark,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].totalScore=d.totalScore,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].grade=d.grade,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].remark=d.remark,this.bigboss[this.bigboss.findIndex(b=>b.studentId==Number(e))]=d}else{d=new Ge,c=this.resultlist.filter(b=>b.studentId==Number(e))[0],d.studentId=e;let m=this.clearInput(Number(i.value),this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))][t.toUpperCase()]);i.value=m.toString(),d[t]=m,d.totalScore=Number(d.Exam??this.checkCA(c.exam));let S=this.calGrade(d.totalScore);d.grade=S.grade,d.remark=S.remark,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].totalScore=d.totalScore,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].grade=d.grade,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].remark=d.remark,this.bigboss.push(d)}console.log(this.bigboss)}checkCA(e){return e||0}calGrade(e){let i;return this.gradeScaleList.forEach(t=>{e>=t.begLimit&&e<=t.endLimit&&(i={grade:t.grade,remark:t.remarks})}),i||{grade:"i",remark:"Not Aplicable"}}validateSaveEntry(){let e=this.classSubjects.filter(t=>t.id==this.currentSubjectId)[0]?.subjects,i=this.schoolClasses.filter(t=>t.id==this.currentClass)[0]?.class;Ke.default.fire({title:"Do you want permanently save student exam records for this class?",html:`<p style="font-size: 20px"><b>Subject: </b> ${e}</p> <p style="font-size: 20px"><b>Class: </b> ${i}</p>`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Save"}).then(t=>{t.isConfirmed&&this.saveResultEntry()})}saveResultEntry(){if(this.submitted=!0,this.resultForm.invalid){this.cd.markForCheck();return}if(this.resultlist.length<1){this.cd.markForCheck();return}let e=this.schoolClasses.filter(i=>i.id==this.currentClass)[0].class;Ke.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{Ke.default.showLoading(),this.sch.saveWeekResultEntry(this.bigboss,this.currentSessionId.toString(),this.selectedWeek.toString(),this.currentTerm,this.currentSubjectId.toString(),this.currentClass.toString(),e).pipe(pe(this.destroy)).subscribe(i=>{Ke.default.close(),this.schoolId==520?this.sch.updateWeeklyTestLouisville(this.bigboss,this.currentSessionId.toString(),this.selectedWeek.toString(),this.currentTerm,this.currentSubjectId.toString(),this.currentClass.toString(),e).pipe(pe(this.destroy)).subscribe(t=>{Ke.default.close()}):Ke.default.close()})}}).then(i=>{Ke.default.fire({icon:"success",title:"Result Entry updated successfully!.",showConfirmButton:!1,timer:2e3})})}clearInput(e,i){return e>100?(alert("Value entered is greater than CA Maximum Score of 100"),i?Number(i):0):Number(e)}upInputToMax(e,i){return e&&i>e?e:Number(i)}downloadTemplate(){let e=[];for(let b=0;b<this.resultlist.length;b++){let g=new Object;g.sn=b+1,g.studentId=this.resultlist[b].studentId,g.admissionNo=this.resultlist[b].admissionNo,g.studentName=this.resultlist[b].studentName;for(let[y,U]of Object.entries(this.caSetupData))g[y+" ["+U+"]"]="";e.push(g)}console.log(e);let i=Je.utils.json_to_sheet(e),t=["A1","B1","C1","D1","E1","F1","G1","H1","I1","J1","K1","L1","M1","N1","O1","P1","Q1","R1","S1","T1"];for(let b of t)i[b]&&(i[b].s={font:{color:{rgb:"000000"},bold:!0}});var d=[{wch:4},{wch:10},{wch:20},{wch:35},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10}];i["!cols"]=d;let c=this.classSubjects.filter(b=>b.id==this.currentSubjectId)[0]?.subjects,m=this.schoolClasses.filter(b=>b.id==this.currentClass)[0]?.class,S=Je.utils.book_new();Je.utils.book_append_sheet(S,i,c+"__"+m+"__Entry"),Je.writeFile(S,this.auth.currentUserValue.schoolName+"__Result Entry.xlsx",{compression:!0})}loadExcel(e){return H(this,null,function*(){var i=e.target.files[0];if(i){console.log("hi");var t=new FileReader;t.onload=c=>{let m=t.result;var S=c.target.result,b=Je.read(m,{type:"binary"});b.SheetNames.forEach(g=>{let y=Le.sheet_to_row_object_array(b.Sheets[g]);this.excelObj=y,console.log(y)})},t.readAsBinaryString(i);let d=t}})}populateFromFile(){for(let e=0;e<this.excelObj.length;e++){let i=0,t=0,d=new Ge;d.studentId=this.excelObj[e].studentId;for(let[c,m]of Object.entries(this.excelObj[e]))c.substring(0,3)=="CA1"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA1,Number(m)),d.ca1=this.upInputToMax(this.caScoreData.CA1,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca1=this.upInputToMax(this.caScoreData.CA1,Number(m))),c.substring(0,3)=="CA2"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA2,Number(m)),d.ca2=this.upInputToMax(this.caScoreData.CA2,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca2=this.upInputToMax(this.caScoreData.CA2,Number(m))),c.substring(0,3)=="CA3"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA3,Number(m)),d.ca3=this.upInputToMax(this.caScoreData.CA3,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca3=this.upInputToMax(this.caScoreData.CA3,Number(m))),c.substring(0,3)=="CA4"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA4,Number(m)),d.ca4=this.upInputToMax(this.caScoreData.CA4,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca4=this.upInputToMax(this.caScoreData.CA4,Number(m))),c.substring(0,3)=="CA5"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA5,Number(m)),d.ca5=this.upInputToMax(this.caScoreData.CA5,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca5=this.upInputToMax(this.caScoreData.CA5,Number(m))),c.substring(0,3)=="CA6"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA6,Number(m)),d.ca6=this.upInputToMax(this.caScoreData.CA6,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca6=this.upInputToMax(this.caScoreData.CA6,Number(m))),c.substring(0,3)=="CA7"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA7,Number(m)),d.ca7=this.upInputToMax(this.caScoreData.CA7,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca7=this.upInputToMax(this.caScoreData.CA7,Number(m))),c.substring(0,3)=="CA8"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA8,Number(m)),d.ca8=this.upInputToMax(this.caScoreData.CA8,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca8=this.upInputToMax(this.caScoreData.CA8,Number(m))),c.substring(0,3)=="CA9"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA9,Number(m)),d.ca9=this.upInputToMax(this.caScoreData.CA9,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca9=this.upInputToMax(this.caScoreData.CA9,Number(m))),c.substring(0,4)=="CA10"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA10,Number(m)),d.ca10=this.upInputToMax(this.caScoreData.CA10,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca10=this.upInputToMax(this.caScoreData.CA10,Number(m))),c.substring(0,4)=="CA11"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA11,Number(m)),d.ca11=this.upInputToMax(this.caScoreData.CA11,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca11=this.upInputToMax(this.caScoreData.CA11,Number(m))),c.substring(0,4)=="CA12"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA12,Number(m)),d.ca12=this.upInputToMax(this.caScoreData.CA12,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca12=this.upInputToMax(this.caScoreData.CA12,Number(m))),c.substring(0,4)=="CA13"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA13,Number(m)),d.ca13=this.upInputToMax(this.caScoreData.CA13,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca13=this.upInputToMax(this.caScoreData.CA13,Number(m))),c.substring(0,4)=="CA14"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA14,Number(m)),d.ca14=this.upInputToMax(this.caScoreData.CA14,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca14=this.upInputToMax(this.caScoreData.CA14,Number(m))),c.substring(0,4)=="CA15"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA15,Number(m)),d.ca15=this.upInputToMax(this.caScoreData.CA15,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca15=this.upInputToMax(this.caScoreData.CA15,Number(m))),c.substring(0,4)=="Exam"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.Exam,Number(m)),d.exam=this.upInputToMax(this.caScoreData.Exam,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].exam=this.upInputToMax(this.caScoreData.Exam,Number(m)));t==1&&(this.resultlist[this.resultlist.findIndex(c=>c.studentId==this.excelObj[e].studentId)].totalScore=i,this.resultlist[this.resultlist.findIndex(c=>c.studentId==this.excelObj[e].studentId)].grade=this.calGrade(i).grade,this.resultlist[this.resultlist.findIndex(c=>c.studentId==this.excelObj[e].studentId)].remark=this.calGrade(i).remark,d.totalScore=i,d.grade=this.calGrade(i).grade,d.remark=this.calGrade(i).remark,this.bigboss.push(d))}}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(L),_(j),_(lt))},u.\u0275cmp=B({type:u,selectors:[["app-dashboard"]],inputs:{header:"header"},decls:199,vars:17,consts:[["id","kt_wrapper",1,"marlin"],["id","kt_content"],["id","kt_post"],["id","kt_content_container"],[1,"card","mb-10"],[1,"card-body"],["id","kt_invoice_form",3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","align-items-start","flex-xxl-row"],["data-bs-toggle","tooltip","data-bs-trigger","hover",1,"d-flex","flex-center","flex-equal","fw-row","text-nowrap","order-1","order-xxl-2","me-4"],[1,"fs-2x","fw-bolder","text-gray-800"],[1,"separator","separator-dashed","my-10"],[1,"mb-0"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["formControlName","classId","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"value","change"],["cuclass",""],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["class","eroce",4,"ngIf"],[1,"fv-row","mb-5"],[1,"fs-6","fw-bold","form-label"],["name","class","formControlName","term","aria-label","Select Term","data-control","select2","data-placeholder","Select Term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["ter",""],["value",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],["formControlName","subjectId","aria-label","Select subject","data-control","select2","data-placeholder","Select subject..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["subj",""],["formControlName","sessionId","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["ses",""],[1,"col-lg-12","row",2,"margin-left","1px"],[1,"fv-row","mb-10","col-lg-6"],["formControlName","week","aria-label","Select class","data-control","select02","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["wek",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],["value","13"],["value","14"],["value","15"],["value","16"],["value","17"],["value","18"],[1,"fv-row","mb-10","col-lg-6",2,"text-align","end"],[1,"btn","btn-primary",2,"padding","10px 20%",3,"click"],[1,"d-flex",2,"width","100%","justify-content","end","margin-top","60px"],["type","button",1,"btn","btn-info","px-12",2,"margin-right","10px",3,"disabled","click"],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","btn","btn-light-info",2,"height","48px","outline","none","border","solid 0.5px #7239ea","padding","6px 15px",3,"disabled"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu",2,"padding","10px"],[2,"margin-bottom","15px","margin-top","10px","font-size","16px"],["type","button","data-bs-toggle","modal","data-bs-target","#kt_modal_add_customer",1,"dropdown-item",3,"click"],[2,"margin-bottom","10px","font-size","16px"],[1,"dropdown-item",3,"click"],[1,"table-responsive","mb-10"],["data-kt-element","items",1,"table","g-5","gs-0","mb-0","fw-bolder","text-gray-700"],[1,"border-bottom","fs-7","fw-bolder","text-gray-700","text-uppercase"],[1,"min-w-350px","w-350px",2,"background-color","white"],[1,"min-w-250px","w-250px"],["class","border-bottom border-bottom-dashed","data-kt-element","Name",4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],["id","kt_customers_table_length",1,"dataTables_length"],["name","kt_customers_table_length","aria-controls","kt_customers_table",1,"form-select","form-select-sm","form-select-solid"],["value","25"],["value","50"],["value","100"],[1,"col-sm-12","col-md-7","d-flex","align-items-center","justify-content-center","justify-content-md-end"],["id","kt_customers_table_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","kt_customers_table_previous",1,"paginate_button","page-item","previous","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","0","tabindex","0",1,"page-link"],[1,"previous"],[1,"paginate_button","page-item","active"],["href","#","aria-controls","kt_customers_table","data-dt-idx","1","tabindex","0",1,"page-link"],["id","kt_customers_table_next",1,"paginate_button","page-item","next","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","2","tabindex","0",1,"page-link"],[1,"next"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport",1,"form-control","form-control-solid",3,"change"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit","data-bs-dismiss","modal",1,"btn","btn-info",3,"click"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"],[1,"eroce"],["data-kt-element","Name",1,"border-bottom","border-bottom-dashed"],[1,"pe-7","fixed-column-state"],["type","text","name","name[]","placeholder","Acholo Nora",1,"form-control","form-control-solid","mb-2",3,"value"],[1,"ps-0"],["type","text","name","name[]","disabled","",1,"form-control","form-control-solid","text-center",3,"value"],["type","text",1,"form-control","form-control-solid","text-center",3,"value","keyup"],["exam",""]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),v("ngSubmit",function(){return t.getStudents()}),n(7,"div",7)(8,"div",8)(9,"span",9),r(10,"Enter Students Result"),s()()(),f(11,"div",10),n(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"label",15)(17,"span",16),r(18,"Select Class"),s()(),n(19,"div",17)(20,"select",18,19),v("change",function(){w(d);let m=E(21);return T(t.getGradeScale(m.value))}),n(22,"option",20),r(23,"Select Class..."),s(),C(24,Ll,2,2,"option",21),s(),C(25,Bl,3,0,"div",22),s()(),n(26,"div",23)(27,"label",24)(28,"span",16),r(29,"Term"),s()(),n(30,"div",17)(31,"select",25,26),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(33,"option",27),r(34,"Select Term..."),s(),n(35,"option",28),r(36,"First "),s(),n(37,"option",29),r(38,"Second"),s(),n(39,"option",30),r(40,"Third"),s()(),C(41,zl,3,0,"div",22),s()()(),n(42,"div",13)(43,"div",14)(44,"label",15)(45,"span",16),r(46,"Subject"),s()(),n(47,"div",17)(48,"select",31,32),M("ngModelChange",function(m){return A(t.currentSubjectId,m)||(t.currentSubjectId=m),m}),n(50,"option",27),r(51,"Select Subject..."),s(),C(52,Vl,2,2,"option",21),s(),C(53,Wl,3,0,"div",22),s()(),n(54,"div",14)(55,"label",24)(56,"span",16),r(57,"Session"),s()(),n(58,"div",17)(59,"select",33,34),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(61,"option",20),r(62,"Select Session..."),s(),C(63,Gl,2,2,"option",21),s(),C(64,Ul,3,0,"div",22),s()()(),n(65,"div",35)(66,"div",36)(67,"label",24)(68,"span",16),r(69,"Week"),s()(),n(70,"div",17)(71,"select",37,38),M("ngModelChange",function(m){return A(t.selectedWeek,m)||(t.selectedWeek=m),m}),n(73,"option",20),r(74,"Select Week"),s(),n(75,"option",39),r(76,"Week 1"),s(),n(77,"option",40),r(78,"Week 2"),s(),n(79,"option",41),r(80,"Week 3"),s(),n(81,"option",42),r(82,"Week 4"),s(),n(83,"option",43),r(84,"Week 5"),s(),n(85,"option",44),r(86,"Week 6"),s(),n(87,"option",45),r(88,"Week 7"),s(),n(89,"option",46),r(90,"Week 8"),s(),n(91,"option",47),r(92,"Week 9"),s(),n(93,"option",48),r(94,"Week 10"),s(),n(95,"option",49),r(96,"Week 11"),s(),n(97,"option",50),r(98,"Week 12"),s(),n(99,"option",51),r(100,"Week 13"),s(),n(101,"option",52),r(102,"Week 14"),s(),n(103,"option",53),r(104,"Week 15"),s(),n(105,"option",54),r(106,"Week 16"),s(),n(107,"option",55),r(108,"Week 17"),s(),n(109,"option",56),r(110,"Week 18"),s()(),C(111,Hl,3,0,"div",22),s()(),n(112,"div",57)(113,"label",24),r(114," \xA0 "),s(),n(115,"div",17)(116,"button",58),v("click",function(){return t.getStudents()}),r(117,"Show Students"),s()()()(),n(118,"div",59)(119,"button",60),v("click",function(){return t.validateSaveEntry()}),r(120,"Save"),s(),r(121," \xA0 "),n(122,"div",61)(123,"button",62),r(124," Actions "),s(),n(125,"ul",63)(126,"li",64)(127,"a",65),v("click",function(){return t.populateFromFile()}),r(128,"Populate from file"),s()(),n(129,"li",66)(130,"a",67),v("click",function(){return t.downloadTemplate()}),r(131,"Download Template"),s()()()()()(),n(132,"div",68)(133,"table",69)(134,"thead")(135,"tr",70)(136,"th"),r(137,"S/N"),s(),n(138,"th",71),r(139,"Student Name"),s(),n(140,"th",72),r(141,"Admission No"),s(),n(142,"th",72),r(143,"Score"),s()()(),n(144,"tbody"),C(145,Yl,10,4,"tr",73),s()()(),n(146,"div",74)(147,"div",75)(148,"div",76)(149,"label")(150,"select",77)(151,"option",48),r(152,"10"),s(),n(153,"option",78),r(154,"25"),s(),n(155,"option",79),r(156,"50"),s(),n(157,"option",80),r(158,"100"),s()()()()(),n(159,"div",81)(160,"div",82)(161,"ul",83)(162,"li",84)(163,"a",85),f(164,"i",86),s()(),n(165,"li",87)(166,"a",88),r(167,"1"),s()(),n(168,"li",89)(169,"a",90),f(170,"i",91),s()()()()()()()()()(),n(171,"div",92)(172,"div",93)(173,"div",94)(174,"form",95)(175,"div",96)(176,"h2",97),r(177,"Upload Result"),s(),n(178,"div",98)(179,"span",99),F(),n(180,"svg",100),f(181,"rect",101)(182,"rect",102),s()()()(),P(),n(183,"div",103)(184,"div",104)(185,"div",105)(186,"label",106),r(187,"Upload Template"),s(),f(188,"i",107),n(189,"input",108),v("change",function(m){return t.loadExcel(m)}),s()()()(),n(190,"div",109)(191,"button",110),r(192,"Discard"),s(),n(193,"button",111),v("click",function(){return t.populateFromFile()}),n(194,"span",112),r(195,"Populate"),s(),n(196,"span",113),r(197,"Please wait... "),f(198,"span",114),s()()()()()()()()()()()}if(i&2){let d=E(21),c=E(32),m=E(49),S=E(60),b=E(72);l(6),h("formGroup",t.resultForm),l(14),h("value",t.currentClass),l(4),h("ngForOf",t.schoolClasses),l(),h("ngIf",!d.value&&t.submitted),l(6),N("ngModel",t.currentTerm),l(10),h("ngIf",!c.value&&t.submitted),l(7),N("ngModel",t.currentSubjectId),l(4),h("ngForOf",t.classSubjects),l(),h("ngIf",!m.value&&t.submitted),l(6),N("ngModel",t.currentSessionId),l(4),h("ngForOf",t.sessionlist),l(),h("ngIf",!S.value&&t.submitted),l(7),N("ngModel",t.selectedWeek),l(40),h("ngIf",!b.value&&t.submitted),l(8),h("disabled",t.resultlist.length<1),l(4),h("disabled",t.resultlist.length<1),l(22),h("ngForOf",t.resultlist)}},dependencies:[W,he,q,ne,se,ie,te,$,X,ct,Xe],styles:['@media (max-width:800px){.fixewidth[_ngcontent-%COMP%]{min-width:150px;width:170px}.snfixewidth[_ngcontent-%COMP%]{min-width:10px;width:10px}}@media (min-width: 800px) and (max-width: 3000px){.fixed-column-state[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:100}.fixewidth[_ngcontent-%COMP%]{min-width:250px;width:250px}.snfixewidth[_ngcontent-%COMP%]{min-width:30px;width:30px}.marlin[_ngcontent-%COMP%]{width:90%;margin:20px auto}}.btnact[_ngcontent-%COMP%]{background-color:#10ab23;color:#fff;font-weight:600;padding:10px 20px;border-radius:30px}.nobtnact[_ngcontent-%COMP%]{color:#10ab23;font-weight:600;padding:10px 20px;border-radius:30px}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:inline-block;border-top:4px solid #FFF;border-right:4px solid transparent;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}.loader[_ngcontent-%COMP%]:after{content:"";box-sizing:border-box;position:absolute;left:0;top:0;width:48px;height:48px;border-radius:50%;border-bottom:4px solid #FF3D00;border-left:4px solid transparent}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}',`.table[_ngcontent-%COMP%] {
                                                width: auto;
                                            }

                                            .table-responsive[_ngcontent-%COMP%] {
                                                overflow-x: auto;
                                                max-width: 100%;
                                            }

                                            .fixed-column[_ngcontent-%COMP%] {
                                                position: sticky;
                                                left: 0;
                                                background-color: #fff;
                                                

                                                z-index: 1;
                                            }`]});let o=u;return o})();var He=K(mt());function $l(o,u){if(o&1&&(n(0,"option",108),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),I(" ",a.class,"")}}function Xl(o,u){if(o&1&&(n(0,"option",108),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.sessionName)}}function ql(o,u){if(o&1&&(n(0,"th",62),r(1),s()),o&2){let a=u.$implicit;l(),p(a.subject)}}function Kl(o,u){if(o&1&&(n(0,"td")(1,"span",111),r(2),s()()),o&2){let a=u.$implicit,e=x().$implicit,i=x();l(2),p(i.showSubjectTotal(e.subjects,a.subject))}}function Jl(o,u){if(o&1&&(n(0,"tr",109)(1,"td",110)(2,"span",111),r(3),s()(),C(4,Kl,3,1,"td",112),n(5,"td")(6,"span",111),r(7),s()(),n(8,"td")(9,"span",111),r(10),s()(),n(11,"td")(12,"span",111),r(13),s()()()),o&2){let a=u.$implicit,e=x();l(3),p(a.studentName),l(),h("ngForOf",e.subjectlist),l(3),p(e.toNumber(a.total)),l(3),p(a.average),l(3),p(e.genk.formatPosition(e.getposition(a.average)+1))}}var Ti=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.route=i,this.auth=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.resultlist=[],this.subjectlist=[],this.classSubjects=[],this.classSubjectsBackup=[],this.genk=c,this.userName=t.currentUserValue.name,this.userImgPath=t.currentUserValue.logo,this.adminStatus=t.currentUserValue.status,this.mySchoolName=t.currentUserValue.schoolName}ngOnInit(){this.genk.topdata="Weekly Mastersheet";debugger;this.getClassNames(),this.getSession(),this.getCurrentSession(),this.getClassSubjects()}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.schoolClasses=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getResults(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getClassSubjects(){this.sch.getSubjectByClass(this.currentClass.toString()).subscribe(e=>{console.log(e),this.classSubjects=e,this.classSubjectsBackup=e})}getGradeScale(e){this.currentClass=Number(e),this.getClassSubjects();let t=this.schoolClasses.filter(d=>d.id==this.currentClass)[0].classLevelId}getMastersheetByClass(){this.selectedWeek=="ALLWEEKS"?this.sch.getWeeklyAnnualMastersheetByClassAllWeek(this.currentClass.toString(),this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultlist=e;let i=this.resultlist.sort((t,d)=>d.count-t.count);this.subjectlist=i[0].subjects,this.resultlist=this.resultlist.sort((t,d)=>d.average-t.average),this.currentSession=this.sessionlist.filter(t=>t.id==this.currentSessionId)[0].sessionName,this.currentClassName=this.schoolClasses.filter(t=>t.id==this.currentClass)[0].class}):this.sch.getWeeklyMastersheetByClassOneSubject(this.currentClass.toString(),this.currentSessionId.toString(),this.currentTerm,this.selectedWeek.toString()).subscribe(e=>{this.resultlist=e;let i=this.resultlist.sort((t,d)=>d.count-t.count);this.subjectlist=i[0].subjects,this.resultlist=this.resultlist.sort((t,d)=>d.average-t.average),this.currentSession=this.sessionlist.filter(t=>t.id==this.currentSessionId)[0].sessionName,this.currentClassName=this.schoolClasses.filter(t=>t.id==this.currentClass)[0].class})}changeWeek(e){debugger;this.selectedWeek=e?e.toString():null}changeTerm(e){debugger;this.currentTerm=e||null}showSubjectTotal(e,i){if(e[e.findIndex(d=>d.subject==i)]){let d=e[e.findIndex(c=>c.subject==i)].totalScore;return Number(d.toFixed(2))}else return"i"}toNumber(e){return Number(e.toFixed(2))}toExcel(){let e=[];this.resultlist=this.resultlist.sort((S,b)=>b.average-S.average);for(let S=0;S<this.resultlist.length;S++){let b=new Object;if(b.SN=S+1,b.StudentName=this.resultlist[S].studentName.toUpperCase(),this.resultlist[S]?.subjects.length>0)for(let g=0;g<this.resultlist[S].subjects.length;g++)b[this.resultlist[S].subjects[g].subject]=this.resultlist[S].subjects[g].totalScore;b.Total=this.resultlist[S].total,b.Average=this.resultlist[S].average,b.Position=this.genk.formatPosition(this.getposition(this.resultlist[S].average)+1),e.push(b)}let i=He.utils.aoa_to_sheet([[this.mySchoolName]]);i.A1.s={font:{color:{rgb:"000000"},bold:!0,sz:25}};let t=this.currentClassName+" MASTER SHEET[ "+this.currentTerm+" TERM of "+this.currentSession+" ]";He.utils.sheet_add_aoa(i,[[t]],{origin:"A2"}),i.A2.s={font:{color:{rgb:"000000"},bold:!0,sz:18}},He.utils.sheet_add_json(i,e,{origin:"A3"}),i.A3.s={font:{color:{rgb:"000000"},bold:!0}},i.B3.s={font:{color:{rgb:"000000"},bold:!0}};let d=["C3","D3","E3","F3","G3","H3","I3","J3","K3","L3","M3","N3","O3","P3","Q3","R3","S3","T3","U3","V3"];debugger;for(let S of d)i[S]&&(i[S].s={font:{color:{rgb:"000000"},bold:!0},alignment:{textRotation:90}});var c=[{wch:4},{wch:35},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5}];i["!cols"]=c;let m=He.utils.book_new();He.utils.book_append_sheet(m,i,"Students"),He.writeFile(m,"Mastersheet.xlsx",{compression:!0})}fitToColumn(e){debugger;return e[0].map((i,t)=>({wch:Math.max(...e.map(d=>d[t]?d[t].toString().length:0))}))}customizeExcel(e){debugger;for(let i in e){if(typeof e[i]!="object")continue;let t=He.utils.decode_cell(i);e[i].s={font:{name:"arial"},alignment:{vertical:"center",horizontal:"center",wrapText:"1"},border:{right:{style:"thin",color:"000000"},left:{style:"thin",color:"000000"}}},t.r==0&&(e[i].s.border.bottom={style:"thin",color:"000000"}),t.r%2&&(e[i].s.fill={patternType:"solid",fgColor:{rgb:"b2b2b2"},bgColor:{rgb:"b2b2b2"}})}}getposition(e){return this.resultlist.findIndex(i=>i.average==e)}};u.\u0275fac=function(i){return new(i||u)(_(z),_(G),_(D),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:176,vars:8,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],[1,"card-body","p-12"],["action","","id","kt_invoice_form"],[1,"d-flex","flex-column","align-items-start","flex-xxl-row"],["data-bs-toggle","tooltip","data-bs-trigger","hover",1,"d-flex","flex-center","flex-equal","fw-row","text-nowrap","order-1","order-xxl-2","me-4"],[1,"fs-2x","fw-bolder","text-gray-800"],[1,"separator","separator-dashed","my-10"],[1,"mb-0"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["formControlName","classId","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"value","change"],["cuclass",""],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fv-row","mb-5"],[1,"fs-6","fw-bold","form-label"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value",""],["name","clasisyo","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"value","change"],["termo",""],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],["name","weekmast","aria-label","Select class","data-control","select02","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"value","change"],["weko",""],["value","ALLWEEKS"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],["value","13"],["value","14"],["value","15"],["value","16"],["value","17"],["value","18"],[1,"text-center"],["type","button",1,"btn","btn-primary",3,"click"],[1,"text-end"],["type","button",1,"btn","btn-info",3,"click"],[1,"table-responsive","mb-10"],["data-kt-element","items",1,"table","g-3","gs-0","mb-0","fw-bolder","text-gray-700"],["tabl",""],[1,"border-bottom","fs-7","fw-bolder","text-gray-700","text-uppercase"],[1,"min-w-250px","w-250px","fixed-column",2,"background-color","white"],["class","min-w-100px w-100px",4,"ngFor","ngForOf"],[1,"min-w-100px","w-100px"],[1,"min-w-100px","w-100px","text-start"],["class","border-bottom border-bottom-dashed","data-kt-element","Name",4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],["id","kt_customers_table_length",1,"dataTables_length"],["name","kt_customers_table_length","aria-controls","kt_customers_table",1,"form-select","form-select-sm","form-select-solid"],["value","25"],["value","50"],["value","100"],[1,"col-sm-12","col-md-7","d-flex","align-items-center","justify-content-center","justify-content-md-end"],["id","kt_customers_table_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","kt_customers_table_previous",1,"paginate_button","page-item","previous","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","0","tabindex","0",1,"page-link"],[1,"previous"],[1,"paginate_button","page-item","active"],["href","#","aria-controls","kt_customers_table","data-dt-idx","1","tabindex","0",1,"page-link"],["id","kt_customers_table_next",1,"paginate_button","page-item","next","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","2","tabindex","0",1,"page-link"],[1,"next"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport","value","",1,"form-control","form-control-solid"],[1,"fv-row","mt-5","mb-7"],[1,"btn","btn-info","w-100"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit",1,"btn","btn-info"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"],["data-kt-element","Name",1,"border-bottom","border-bottom-dashed"],[1,"pe-7","fixed-column"],["type","text",1,"form-control","form-control-solid"],[4,"ngFor","ngForOf"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"div",6)(7,"div",7)(8,"span",8),r(9,"Mastersheet"),s()()(),f(10,"div",9),n(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"label",14)(16,"span",15),r(17,"Select Class"),s()(),n(18,"div",16)(19,"select",17,18),v("change",function(){w(d);let m=E(20);return T(t.getGradeScale(m.value))}),n(21,"option",19),r(22,"Select Class..."),s(),C(23,$l,2,2,"option",20),s()()(),n(24,"div",21)(25,"label",22)(26,"span",15),r(27,"Session"),s()(),n(28,"div",16)(29,"select",23),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(30,"option",24),r(31,"Select Session..."),s(),C(32,Xl,2,2,"option",20),s()()()(),n(33,"div",12)(34,"div",13)(35,"label",14)(36,"span",15),r(37,"Term"),s()(),n(38,"div",16)(39,"select",25,26),v("change",function(){w(d);let m=E(40);return T(t.changeTerm(m.value))}),n(41,"option",27),r(42,"Select term"),s(),n(43,"option",28),r(44,"First"),s(),n(45,"option",29),r(46,"Second"),s(),n(47,"option",30),r(48,"Third"),s()()()(),n(49,"div",13)(50,"label",14)(51,"span",15),r(52,"Week"),s()(),n(53,"div",16)(54,"select",31,32),v("change",function(){w(d);let m=E(55);return T(t.changeWeek(m.value))}),n(56,"option",19),r(57,"Select Week"),s(),n(58,"option",33),r(59,"All Weeks"),s(),n(60,"option",34),r(61,"Week 1"),s(),n(62,"option",35),r(63,"Week 2"),s(),n(64,"option",36),r(65,"Week 3"),s(),n(66,"option",37),r(67,"Week 4"),s(),n(68,"option",38),r(69,"Week 5"),s(),n(70,"option",39),r(71,"Week 6"),s(),n(72,"option",40),r(73,"Week 7"),s(),n(74,"option",41),r(75,"Week 8"),s(),n(76,"option",42),r(77,"Week 9"),s(),n(78,"option",43),r(79,"Week 10"),s(),n(80,"option",44),r(81,"Week 11"),s(),n(82,"option",45),r(83,"Week 12"),s(),n(84,"option",46),r(85,"Week 13"),s(),n(86,"option",47),r(87,"Week 14"),s(),n(88,"option",48),r(89,"Week 15"),s(),n(90,"option",49),r(91,"Week 16"),s(),n(92,"option",50),r(93,"Week 17"),s(),n(94,"option",51),r(95,"Week 18"),s()()()()(),n(96,"div",52)(97,"button",53),v("click",function(){return t.getMastersheetByClass()}),r(98,"Load Mastersheet "),s()(),f(99,"br")(100,"br"),s(),n(101,"div",54)(102,"button",55),v("click",function(){return t.toExcel()}),r(103,"Download Mastersheet"),s()(),n(104,"div",56)(105,"table",57,58)(107,"thead")(108,"tr",59)(109,"th",60),r(110,"Student Name"),s(),C(111,ql,2,1,"th",61),n(112,"th",62),r(113,"Total"),s(),n(114,"th",62),r(115,"Average"),s(),n(116,"th",63),r(117,"Position"),s()()(),n(118,"tbody"),C(119,Jl,14,5,"tr",64),s()()(),n(120,"div",65)(121,"div",66)(122,"div",67)(123,"label")(124,"select",68)(125,"option",43),r(126,"10"),s(),n(127,"option",69),r(128,"25"),s(),n(129,"option",70),r(130,"50"),s(),n(131,"option",71),r(132,"100"),s()()()()(),n(133,"div",72)(134,"div",73)(135,"ul",74)(136,"li",75)(137,"a",76),f(138,"i",77),s()(),n(139,"li",78)(140,"a",79),r(141,"1"),s()(),n(142,"li",80)(143,"a",81),f(144,"i",82),s()()()()()()()()()(),n(145,"div",83)(146,"div",84)(147,"div",85)(148,"form",86)(149,"div",87)(150,"h2",88),r(151,"Upload Result"),s(),n(152,"div",89)(153,"span",90),F(),n(154,"svg",91),f(155,"rect",92)(156,"rect",93),s()()()(),P(),n(157,"div",94)(158,"div",95)(159,"div",96)(160,"label",97),r(161,"Upload Template"),s(),f(162,"i",98)(163,"input",99),s(),n(164,"div",100)(165,"button",101),r(166,"download Template Document"),s()()()(),n(167,"div",102)(168,"button",103),r(169,"Discard"),s(),n(170,"button",104)(171,"span",105),r(172,"Submit"),s(),n(173,"span",106),r(174,"Please wait... "),f(175,"span",107),s()()()()()()()()()()}i&2&&(l(19),h("value",t.currentClass),l(4),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),h("value",t.currentTerm),l(15),h("value",t.selectedWeek),l(57),h("ngForOf",t.subjectlist),l(8),h("ngForOf",t.resultlist))},dependencies:[W,q,ne,se,ie,te,$,ge,X,Xe],styles:[`.table[_ngcontent-%COMP%] {
                                            width: auto;
                                        }

                                        .table-responsive[_ngcontent-%COMP%] {
                                            overflow-x: auto;
                                            max-width: 100%;
                                        }

                                        .fixed-column[_ngcontent-%COMP%] {
                                            position: sticky;
                                            left: 0;
                                            background-color: #fff;
                                            

                                            z-index: 1;
                                        }`]});let o=u;return o})();ke();var Ze=K(Pe());function Zl(o,u){if(o&1&&(n(0,"tr")(1,"td"),r(2),s(),n(3,"td"),r(4),s(),n(5,"td"),r(6),s(),n(7,"td"),r(8),s()()),o&2){let a=u.$implicit;l(2),p(a.remarks==null?null:a.remarks.toUpperCase()),l(2),p(a.grade),l(2),p(a.begLimit),l(2),p(a.endLimit)}}var ki=(()=>{let u=class u{constructor(e,i,t,d,c,m){this.router=e,this.auth=i,this.activeRoute=t,this.sch=d,this.gen=c,this.resultService=m,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.gradeScalelist=[],this.psycomotorlist=[],this.psycomotorlist2=[],this.grademinimumlist=[],this.grademinimumlistOver60=[],this.grademinimumlistOver40=[],this.mySchoolClasses=[],this.gradescaletextlist=[],this.logoLoaded=!1,this.subjectOffered=0,this.markObtainable=0,this.displayValue="hidden",this.chartAverageScore=[],this.chartLowestScore=[],this.chartHighestScore=[],this.chartTotalScore=[],this.chartSubjects=[],this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Dashboard",this.studentId=this.activeRoute.snapshot.params.id,this.activeRoute.queryParams.subscribe(e=>{this.currentTerm=e.term,this.currentSessionId=e.currentSessionId,this.currentSession=e.currentSession,this.currentClassId=e.classId,this.average=e.average,this.position=e.position,this.classAverage=e.classAverage}),this.getSchool(),this.getStudent(),this.getStudentTotal(),this.getClassNames(),this.getResultsByStudent(),this.getCaSetupByClass(),this.getGradeScaleByClass(),this.getPsycomotorByStudent(),this.getStudentResultComment(),this.getStudentBMI(),this.getStudentEstimatedAttendance(),this.getStudentHouse(),this.getFormTeacher(),this.getNextTerm()}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getSchool(){this.sch.getSchoolData().subscribe(e=>{this.myschool=e})}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.mySchoolClasses=e,this.getNoInClass()})}getStudent(){this.sch.getStudentAndCatById(this.studentId.toString()).subscribe(e=>H(this,null,function*(){this.studentobj=e.student;let i=e.category;i=="SENIOR"||i=="JUNIOR"?this.studentCat="STUDENT":this.studentCat="PUPIL",this.addLogo(),this.addSignature(),this.logoLoaded=!0}))}getStudentTotal(){this.sch.getStudentTermTotal(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.studentTotal=e.total})}getNoInClass(){this.sch.getNoInClassBySession(this.currentClassId.toString(),this.currentSessionId,this.currentTerm).subscribe(e=>{this.noInClass=e.count,this.className=this.mySchoolClasses.filter(i=>i.id==Number(this.currentClassId))[0].class})}getNextTerm(){this.sch.getNextTerm(this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{e&&(this.nextResumptionDate=e.date)})}getResultsByStudent(){this.sch.getResultsByStudent(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultlist=e,this.subjectOffered=this.resultlist.length,this.markObtainable=this.resultlist.length*100;let t=this.resultlist.map(d=>d.average).reduce((d,c)=>d+c,0)})}getStudentResultComment(){this.sch.getStudentResultComment(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClassId,this.currentSessionId,this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname,this.caSetupScoreData=e.score})}getStudentBMI(){this.sch.getStudentBMI(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.bmi=e,console.log(this.bmi)})}getStudentEstimatedAttendance(){this.sch.getStudentEstimatedAttendance(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.estAttendance=e,console.log(this.bmi)})}getStudentHouse(){this.sch.getUnitStudentHouse(this.studentId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.house=e.house,console.log(this.house)})}getFormTeacher(){this.sch.getFormTeacher(this.currentClassId).subscribe(e=>{e?.name?this.formTeach=e?.name:this.formTeach=""})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e,this.gradeScalelist.forEach(i=>{i.color=this.gradeColor(i.grade)}),console.log(this.grademinimumlist)})}gradeColor(e){return e.includes("A")||e.includes("B2")?"Black":e.includes("B3")||e.includes("C4")?"Green":e.includes("C5")||e.includes("C6")?"Blue":e.includes("D")||e.includes("E")||e.includes("F")?"Red":"Black"}getPsycomotorByStudent(){this.sch.getPsycomotorByStudent(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.psycomotorlist=e,e.length<1&&this.sch.getSkillList().subscribe(i=>{this.psycomotorlist=i})})}convertToPDF(e){var i=new ae("p","pt","letter"),t=i.internal.pageSize.height||i.internal.pageSize.getHeight(),d=i.internal.pageSize.width||i.internal.pageSize.getWidth();i.setFont("Ariel","normal","900"),i.setTextColor("rgb(36, 91, 143)"),i.setFontSize(28),i.text(this.myschool?.schoolName??"",d/2,40,{align:"center"}),this.genk.logoString&&i.addImage(this.genk.logoString,"PNG",80,15,50,50),this.genk.signatureString&&i.addImage(this.genk.signatureString,"PNG",495,708,70,55),i.setFontSize(8),i.setTextColor("rgb(0, 0, 0)"),i.setFont("Ariel","italic"),i.text("Motto: Home of the Leadership Titans",d/2,55,{align:"center"}),i.setFontSize(8),i.setTextColor("rgb(0, 0, 0)"),i.setFont("","","500"),i.text(this.myschool?.address,d/2,65,{align:"center"}),i.setFont("","","600"),i.text("Tel: "+this.myschool?.phoneOne,d/2,75,{align:"center"}),i.setFontSize(13),i.setFont("","","800"),i.text("REPORT SHEET",d/2,94,{align:"center"}),i.setFontSize(8),i.setFont("","","600"),i.setFontSize(9),i.text("ACADEMIC RECORD",20,172);debugger;(0,Ze.default)(i,{body:[[`TERM: ${this.currentTerm}`,`SESSION: ${this.currentSession}`,`ADMISSION NO: ${this.studentobj?.admissionNo||""}`],[`NAME OF ${this.studentCat}: ${[this.studentobj?.surname||"",this.studentobj?.middleName||"",this.studentobj?.firstName||""].join(" ").trim()}`,`CLASS: ${this.className}`,`NO. ON ROLL: ${this.noInClass}`],[`TEACHER'S NAME: ${this.formTeach}`,`HOUSE: ${this.house}`,`SEX: ${this.studentobj?.sex||""}`],[`NO. OF TIMES SCHOOL OPENED: ${this.estAttendance?.noOfOpenDays||""}`,`NO. OF TIMES PRESENT: ${this.estAttendance?.noPresentDays||""}`,`NEXT TERM BEGINS: ${this.nextResumptionDate}`]],styles:{font:"6px",cellPadding:3,lineColor:"#808080",lineWidth:.2,fontSize:7},headStyles:{lineColor:"white",fontSize:8,fontStyle:"bold"},startY:97,margin:{top:97,left:20,bottom:30},theme:"plain",tableWidth:565}),i.setFontSize(10);let c=this.resultlist,m=[];c.forEach(R=>{let le=[];le.push(R.subject),Object.keys(this.caSetupData).forEach(De=>{le.push(R[De.toLowerCase()])}),le.push(R.totalScore),le.push(R.grade),le.push(R.remark),le.push(R.lowestScore),le.push(R.highestScore),le.push(R.average),m.push(le)});let S=this.caSetupData,b=Object.keys(S),g=Object.values(S),y=Object.values(this.caSetupScoreData);for(let R=0;R<g.length;R++)g[R]=g[R]+"("+y[R]+"%)";g.forEach(R=>{R=R+"("+this.caSetupScoreData.CA1+"%)"});let U=["Subject",...g,"Total Score","Grade","Remark","Lowest Score","Highest Score","Average"],O=m;(0,Ze.default)(i,{head:[U],useCss:!0,body:m,styles:{font:"8px",lineColor:"#808080",lineWidth:.1,fontSize:8,cellPadding:3},headStyles:{fontSize:6,lineColor:"white",textColor:"white",fillColor:[45,113,177]},startY:175,tableWidth:565,margin:{left:20}});let Y=i.previousAutoTable.finalY;(0,Ze.default)(i,{body:[[{content:`Total Mark Obtainable: ${this.markObtainable}`,colSpan:2,styles:{font:"600"}},{content:`Total Mark Obtained: ${this.studentTotal?.toFixed(1).toString()}`,colSpan:2,styles:{font:"600"}}],[{content:`Pupil Average: ${this.average.toString()}`,styles:{font:"600"}},{content:`Subjects: ${this.subjectOffered}`,colSpan:2,styles:{font:"600"}},{content:`Class Average: ${this.classAverage}`,styles:{font:"600"}}]],theme:"grid",styles:{font:"6px",fontSize:8,cellPadding:3,textColor:"#000000",halign:"center",lineColor:"#808080",lineWidth:.1},startY:Y,margin:{left:20},tableWidth:565});let ee=i.previousAutoTable.finalY;(0,Ze.default)(i,{head:[[{content:"SKILL KEY",colSpan:2,styles:{halign:"center",fillColor:"whitesmoke",fontSize:8,textColor:[0,0,0]}}],["SPECIFIC SKILLS","RATING"]],body:this.psycomotorlist.map(R=>[R.skill,R.score]),styles:{font:"9px",fontSize:8,cellPadding:2,lineWidth:.3},startY:ee+20,tableWidth:188,margin:{left:20},headStyles:{fillColor:[255,255,255],fontSize:8,textColor:[0,0,0]},theme:"grid",tableLineWidth:.5});let Z=i.previousAutoTable.finalY;(0,Ze.default)(i,{head:[[{content:"RATING KEY",colSpan:2,styles:{halign:"center",fillColor:"whitesmoke",fontSize:7}}],["KEY NAME","KEY VALUE"]],body:[{keyName:"POOR",keyValue:"1"},{keyName:"FAIR",keyValue:"2"},{keyName:"GOOD",keyValue:"3"},{keyName:"VERY GOOD",keyValue:"4"},{keyName:"EXCELLENT",keyValue:"5"},{keyName:"",keyValue:""},{keyName:"",keyValue:""}].map(R=>[R.keyName,R.keyValue]),styles:{font:"8px",fontSize:7,cellPadding:3,lineWidth:.3},startY:ee+20,tableWidth:122,margin:{left:213},headStyles:{fillColor:[255,255,255],fontSize:7,textColor:[0,0,0]},theme:"grid",tableLineWidth:.5}),(0,Ze.default)(i,{head:[[{content:"GRADING KEY",colSpan:4,styles:{halign:"center",fillColor:"whitesmoke",fontSize:7}}],["REMARK","GRADE","MARK FROM","MARK UPTO"]],body:this.gradeScalelist.map(R=>[R.remarks.toUpperCase(),R.grade,R.begLimit,R.endLimit]),styles:{font:"8px",fontSize:7,cellPadding:3,lineWidth:.2},headStyles:{fillColor:[255,255,255],fontSize:7,textColor:[0,0,0]},startY:ee+20,margin:{left:339},tableWidth:245,theme:"grid",tableLineWidth:.1}),i.setFont("","","700"),i.setFontSize(9);let ve=i.previousAutoTable.finalY,we=Z>ve?Z:ve,ye=[["CLASS TEACHER'S REMARK:",this.resultComment.formTeacherComment],["SECTION'S HEAD REMARK:",this.resultComment.principalComment]];(0,Ze.default)(i,{body:ye,styles:{fontSize:7,cellPadding:5,lineColor:"#808080",lineWidth:.1},theme:"grid",tableWidth:565,margin:{left:20},startY:we+10}),i.setTextColor("rgb(36, 91, 143)"),i.setFontSize(9),i.setFont("","","600");let V=i.splitTextToSize("Principal's Signature Date & Stamp:",80);i.text(V,415,730),i.save("My_Results")}addLogo(){this.sch.getSchoolLogo(this.myschool.id).subscribe(e=>{let i=this.genk.getLogoMediaBase64(e,e.type)})}addSignature(){this.sch.obtainSignature(this.currentSessionId,this.currentTerm).subscribe(e=>{let i=this.genk.getMediaBase64(e,e.type)})}floorNum(e){return Math.floor(e)}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(G),_(L),_(j),_($e))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:104,vars:23,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[2,"display","flex","justify-content","space-evenly","padding","20px 0"],[3,"ngClass","click"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],["prin",""],[1,"card-body","p-12"],[2,"font-family","'Ariel'"],[2,"text-align","center","margin-bottom","0px"],[2,"font-size","39px","color","rgb(36, 91, 143)","font-weight","900"],[2,"font-size","16px"],[1,"text-center"],[2,"font-style","italic"],[2,"object-fit","cover","height","100px","width","100px","border-radius","100%",3,"src"],[2,"font-size","20px"],["id","toper",2,"width","100%","text-align","left"],[2,"font-size","11px"],[2,"text-align","center","margin-top","10px"],[2,"display","flex","justify-content","space-between"],["id","grade",2,"font-size","10px","width","40%"],[2,"font-weight","600"],[2,"text-align","center","background-color","whitesmoke"],["colspan","4"],[2,"border","solid 1px grey"],[4,"ngFor","ngForOf"],[2,"padding","0 0 50px 50px"],[2,"margin-bottom","15px"],[2,"font-size","15px","font-weight","600","color","rgb(75, 73, 73)"],[2,"font-size","15px","color","rgb(9, 95, 182)","font-style","italic"],["id","chartdiv"],["id","myChart","width","3600","height","1800",2,"display","none"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div")(2,"div")(3,"div")(4,"div")(5,"div",1)(6,"div",2)(7,"button",3),v("click",function(){w(d);let m=E(12);return T(t.convertToPDF(m))}),r(8," Print Result"),s()(),n(9,"div",4)(10,"div",5)(11,"div",6,7)(13,"div",8)(14,"div",9)(15,"div",10)(16,"span",11),r(17),s()(),n(18,"div",12)(19,"div",13)(20,"span",14),r(21,"Motto: Home of the Leadership Titans"),s(),f(22,"br"),n(23,"span"),r(24),s()(),n(25,"div",13)(26,"span"),r(27),s(),f(28,"br"),s(),n(29,"div",13),f(30,"img",15),s(),f(31,"br"),n(32,"div",13)(33,"span",16),r(34,"REPORT SHEET"),s(),f(35,"br"),s()(),n(36,"table",17)(37,"tr",18)(38,"td"),r(39),s(),n(40,"td"),r(41),s(),n(42,"td"),r(43),s()(),n(44,"tr",18)(45,"td"),r(46),s(),n(47,"td"),r(48),s(),n(49,"td"),r(50),s()(),n(51,"tr",18)(52,"td"),r(53),s(),n(54,"td"),r(55),s(),n(56,"td"),r(57),s()(),n(58,"tr",18)(59,"td"),r(60),s(),n(61,"td"),r(62),s(),n(63,"td"),r(64),Ie(65,"date"),s()()(),f(66,"br")(67,"br"),n(68,"div",19)(69,"h4"),r(70,"ACADEMIC RECORD"),s()(),f(71,"div"),s(),n(72,"div",20)(73,"table",21)(74,"thead",22)(75,"tr",23)(76,"th",24),r(77,"GRADING KEY"),s()(),n(78,"tr",25)(79,"th"),r(80,"REMARK"),s(),n(81,"th"),r(82,"GRADE"),s(),n(83,"th"),r(84,"MARK FROM"),s(),n(85,"th"),r(86,"MARK UPTO"),s()()(),n(87,"tbody"),C(88,Zl,9,4,"tr",26),s()()()(),n(89,"div",27)(90,"div",28)(91,"span",29),r(92,"Form Teacher's Comment:"),s(),r(93," \xA0\xA0 "),n(94,"span",30),r(95),s()(),n(96,"div")(97,"span",29),r(98,"Principal's Comment:"),s(),r(99," \xA0\xA0 "),n(100,"span",30),r(101),s()()()()()()()()()(),n(102,"div",31),f(103,"canvas",32),s()()()}if(i&2){let d;l(7),h("ngClass",t.logoLoaded?"resprint":"resprintdisabled"),l(10),p(t.myschool==null?null:t.myschool.schoolName),l(7),p(t.myschool==null?null:t.myschool.address),l(3),I("Tel: ",t.myschool==null?null:t.myschool.phoneOne,""),l(3),h("src",t.myschool==null?null:t.myschool.schoolLogo,oe),l(9),I("TERM: ",t.currentTerm,""),l(2),I("SESSION: ",t.currentSession,""),l(2),I("ADMISSION NO: ",t.studentobj==null?null:t.studentobj.admissionNo,""),l(3),tt("NAME OF ",t.studentCat,": ",(((d=t.studentobj==null?null:t.studentobj.surname)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.middleName)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.firstName)!==null&&d!==void 0?d:"")).trim(),""),l(2),I("CLASS: ",t.className,""),l(2),I("NO. ON ROLL: ",t.noInClass,""),l(3),I("TEACHER'S NAME: ",t.formTeach,""),l(2),I("HOUSE: ",t.house,""),l(2),I("SEX: ",t.studentobj==null?null:t.studentobj.sex,""),l(3),I("NO. OF TIMES SCHOOL OPENED: ",t.estAttendance==null?null:t.estAttendance.noOfOpenDays,""),l(2),I("NO. OF TIMES PRESENT: ",t.estAttendance==null?null:t.estAttendance.noPresentDays,""),l(2),I("NEXT TERM BEGINS: ",Oe(65,21,t.nextResumptionDate),""),l(24),h("ngForOf",t.gradeScalelist),l(7),p(t.resultComment==null?null:t.resultComment.formTeacherComment),l(6),p(t.resultComment==null?null:t.resultComment.principalComment)}},dependencies:[yt,W,Re],styles:["#customers[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px;font-size:9px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}.heitable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(186,187,190);padding:2px 5px}.resprint[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#1e90ff;color:#fff;border-radius:20px;box-shadow:1px 1px 3px #0000004d}.resprintdisabled[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#a0a3a6;color:#000;border-radius:20px;box-shadow:1px 1px 3px #0000004d}#customerslouismidterm[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerslouismidterm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:11px}#customerslouismidterm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;font-size:11px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}#customerstrail[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerstrail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:4px;font-size:10px}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customerstrail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-size:10px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}"]});let o=u;return o})();ke();var Qe=K(Pe()),Ni=K(Nt()),We=K(Te());function Ql(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),tt("",a.caSetupData.CA1?a.caSetupData.CA1:"CA1"," ","("+a.caSetupScoreData.CA1+"%)","")}}function eo(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),tt("",a.caSetupData.CA2?a.caSetupData.CA2:"CA2"," ","("+a.caSetupScoreData.CA2+"%)","")}}function to(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),tt("",a.caSetupData.CA3?a.caSetupData.CA3:"CA3"," ","("+a.caSetupScoreData.CA3+"%)","")}}function io(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),tt("",a.caSetupData.CA4?a.caSetupData.CA4:"CA4"," ","("+a.caSetupScoreData.CA4+"%)","")}}function no(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA5?a.caSetupData.CA5:"CA5")}}function so(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA6?a.caSetupData.CA6:"CA6")}}function ro(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA7?a.caSetupData.CA7:"CA7")}}function lo(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA8?a.caSetupData.CA8:"CA8")}}function oo(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA9?a.caSetupData.CA9:"CA9")}}function ao(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA10?a.caSetupData.CA10:"CA10")}}function co(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA11?a.caSetupData.CA11:"CA11")}}function mo(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA12?a.caSetupData.CA12:"CA12")}}function uo(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA13?a.caSetupData.CA13:"CA13")}}function po(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA14?a.caSetupData.CA14:"CA14")}}function ho(o,u){if(o&1&&(n(0,"th"),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA15?a.caSetupData.CA15:"CA15")}}function go(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca1)!==null&&e!==void 0?e:"")}}function So(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca2)!==null&&e!==void 0?e:"")}}function fo(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca3)!==null&&e!==void 0?e:"")}}function xo(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca4)!==null&&e!==void 0?e:"")}}function bo(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca5)!==null&&e!==void 0?e:"")}}function _o(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca6)!==null&&e!==void 0?e:"")}}function Co(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca7)!==null&&e!==void 0?e:"")}}function vo(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca8)!==null&&e!==void 0?e:"")}}function yo(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca9)!==null&&e!==void 0?e:"")}}function Eo(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca10)!==null&&e!==void 0?e:"")}}function Io(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca11)!==null&&e!==void 0?e:"")}}function wo(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca12)!==null&&e!==void 0?e:"")}}function To(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca13)!==null&&e!==void 0?e:"")}}function ko(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca14)!==null&&e!==void 0?e:"")}}function No(o,u){if(o&1&&(n(0,"td"),r(1),s()),o&2){let a=x().$implicit,e;l(),p((e=a.ca15)!==null&&e!==void 0?e:"")}}function Ao(o,u){if(o&1&&(n(0,"tr",54)(1,"td"),r(2),s(),C(3,go,2,1,"td",21)(4,So,2,1,"td",21)(5,fo,2,1,"td",21)(6,xo,2,1,"td",21)(7,bo,2,1,"td",21)(8,_o,2,1,"td",21)(9,Co,2,1,"td",21)(10,vo,2,1,"td",21)(11,yo,2,1,"td",21)(12,Eo,2,1,"td",21)(13,Io,2,1,"td",21)(14,wo,2,1,"td",21)(15,To,2,1,"td",21)(16,ko,2,1,"td",21)(17,No,2,1,"td",21),n(18,"td"),r(19),s(),n(20,"td"),r(21),s(),n(22,"td"),r(23),s(),n(24,"td"),r(25),s(),n(26,"td"),r(27),s(),n(28,"td"),r(29),s(),n(30,"td"),r(31),s(),n(32,"td"),r(33),s()()),o&2){let a=u.$implicit,e=x(),i,t,d,c,m,S,b,g;l(2),p(a.subject),l(),h("ngIf",e.caSetupData.CA1),l(),h("ngIf",e.caSetupData.CA2),l(),h("ngIf",e.caSetupData.CA3),l(),h("ngIf",e.caSetupData.CA4),l(),h("ngIf",e.caSetupData.CA5),l(),h("ngIf",e.caSetupData.CA6),l(),h("ngIf",e.caSetupData.CA7),l(),h("ngIf",e.caSetupData.CA8),l(),h("ngIf",e.caSetupData.CA9),l(),h("ngIf",e.caSetupData.CA10),l(),h("ngIf",e.caSetupData.CA11),l(),h("ngIf",e.caSetupData.CA12),l(),h("ngIf",e.caSetupData.CA13),l(),h("ngIf",e.caSetupData.CA14),l(),h("ngIf",e.caSetupData.CA15),l(2),p((i=a.exam==null?null:a.exam.toFixed(1))!==null&&i!==void 0?i:""),l(2),p((t=a.totalScore==null?null:a.totalScore.toFixed(1))!==null&&t!==void 0?t:""),l(2),p((d=a.grade)!==null&&d!==void 0?d:""),l(2),I("",(c=a.remark)!==null&&c!==void 0?c:""," "),l(2),p((m=a.position)!==null&&m!==void 0?m:""),l(2),p((S=a.lowestScore==null?null:a.lowestScore.toFixed(1))!==null&&S!==void 0?S:""),l(2),p((b=a.highestScore==null?null:a.highestScore.toFixed(1))!==null&&b!==void 0?b:""),l(2),p((g=a.average==null?null:a.average.toFixed(1))!==null&&g!==void 0?g:"")}}function Mo(o,u){if(o&1&&(n(0,"tr",24)(1,"td"),r(2),s(),n(3,"td"),r(4),s()()),o&2){let a=u.$implicit;l(2),p(a.skill),l(2),p(a.score)}}function Oo(o,u){if(o&1&&(n(0,"tr")(1,"td"),r(2),s(),n(3,"td"),r(4),s(),n(5,"td"),r(6),s(),n(7,"td"),r(8),s()()),o&2){let a=u.$implicit;l(2),p(a.remarks==null?null:a.remarks.toUpperCase()),l(2),p(a.grade),l(2),p(a.begLimit),l(2),p(a.endLimit)}}var Ai=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.activeRoute=t,this.sch=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.resultviewlist=[],this.resu=[],this.gradeScalelist=[],this.resArray=[],this.goo=0,this.gradescaletextlist=[],this.downloadCount=0,this.logoLoaded=!1,this.subjectOffered=0,this.markObtainable=0,this.displayValue="hidden",this.psycomotorlist=[],this.psycomotorlistBulk=[],this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.startProcessingModal(),this.genk.topdata="Trailblazer Result";debugger;let i=this.router.getCurrentNavigation()?.extras.state;i&&i.data&&(this.averageObj=i.data),this.activeRoute.queryParams.subscribe(t=>{this.currentTerm=t.term,this.currentSessionId=t.currentSessionId,this.currentSession=t.currentSession,this.currentClassId=t.classId,this.currentClassName=t.className,this.averageObj=JSON.parse(t.averageObj),this.average=t.average,this.position=t.position,this.classAverage=t.classAverage,this.zip=new Ni.default,this.pdfFolders=this.zip.folder(this.currentClassName+"_Results")}),this.getSchool(),this.getNoInClass(),this.getCaSetupByClass(),this.getGradeScaleByClass(),this.getStudentResultComment(),this.getPsycomotorByStudent()}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getSchool(){this.sch.getSchoolData().subscribe(e=>H(this,null,function*(){this.myschool=e}))}getNoInClass(){this.sch.getNoInClassId(this.currentClassId.toString()).subscribe(e=>{this.noInClass=e.count})}getResultsByStudent(){this.sch.getResultsByStudentAll(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>H(this,null,function*(){this.resultlist=e,yield this.addLogo(),this.addSignature();let i=setInterval(()=>{this.genk.logoString&&(clearInterval(i),this.getResultsAverageByClass())},500)}))}getStudentResultComment(){this.sch.getStudentResultCommentByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getCaSetupByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.caSetupData=e.systemname,this.caSetupScoreData=e.score,this.getResultsByStudent()})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e})}getPsycomotorByStudent(){this.sch.getPsycomotorByClass(this.currentSessionId.toString(),this.currentTerm,this.currentClassId).subscribe(e=>{this.psycomotorlistBulk=e,e.length<1&&this.sch.getSkillList().subscribe(i=>{this.psycomotorlist=i})})}convertToPDF(e,i,t,d,c,m,S,b,g){var y=new ae("p","pt","letter"),U=y.internal.pageSize.height||y.internal.pageSize.getHeight(),O=y.internal.pageSize.width||y.internal.pageSize.getWidth();y.setFont("Trebuchet MS","normal","900"),y.setTextColor("rgb(36, 91, 143)"),y.setFontSize(20),y.text(this.myschool?.schoolName??"",O/2,30,{align:"center"}),this.genk.logoString&&y.addImage(this.genk.logoString,"PNG",80,15,50,50),this.genk.signatureString&&y.addImage(this.genk.signatureString,"PNG",495,730,70,55),y.setFontSize(8),y.setTextColor("rgb(0, 0, 0)"),y.setFont("Ariel","italic"),y.text("Motto: Home of the Leadership Titans",O/2,55,{align:"center"}),y.setFontSize(8),y.setTextColor("rgb(0, 0, 0)"),y.setFont("","","500"),y.text(this.myschool?.address,O/2,65,{align:"center"}),y.setFont("","","600"),y.text("Tel: "+this.myschool?.phoneOne,O/2,75,{align:"center"}),y.setFontSize(13),y.setFont("","","800"),y.text("REPORT SHEET",O/2,94,{align:"center"}),y.setFontSize(8),(0,Qe.default)(y,{html:"#toper",useCss:!0,styles:{font:"6px",lineColor:"#808080",lineWidth:.2,fontSize:7,halign:"center"},headStyles:{lineColor:"white",fontSize:8,fontStyle:"bold"},startY:97,margin:{top:97,left:20,bottom:30}}),y.setFont("","","600"),y.setFontSize(9),y.text("ACADEMIC RECORD",20,172);let Y=this.caSetupData,ee=Object.keys(Y),Z=Object.values(Y),Se=Object.values(this.caSetupScoreData);for(let De=0;De<Z.length;De++)Z[De]=Z[De]+"("+Se[De]+"%)";Z.forEach(De=>{De=De+"("+this.caSetupScoreData.CA1+"%)"});let ve=["Subject",...Z,"Total Score","Grade","Remark","Position","Lowest Score","Highest Score","Average"],we=t;(0,Qe.default)(y,{head:[ve],useCss:!0,body:t,styles:{font:"8px",lineColor:"#808080",lineWidth:.1,fontSize:8,cellPadding:3},headStyles:{fontSize:6,lineColor:"white",textColor:"white",fillColor:[45,113,177]},startY:175,margin:{left:20}});let ye=y.previousAutoTable.finalY;(0,Qe.default)(y,{body:[[{content:`Total Mark Obtainable: ${g.markObtainable}`,colSpan:2,styles:{font:"600"}},{content:`Total Mark Obtained: ${g.stutotal}`,colSpan:2,styles:{font:"600"}}],[{content:`Pupil Average: ${g.average}`,styles:{font:"600"}},{content:`Subjects: ${g.subjectOffered}`,colSpan:2,styles:{font:"600"}},{content:`Class Average: ${this.classAverage}`,styles:{font:"600"}}]],theme:"grid",styles:{font:"6px",fontSize:8,cellPadding:3,textColor:"#000000",halign:"center",lineColor:"#808080",lineWidth:.1},startY:ye,margin:{left:20},tableWidth:552});let V=y.previousAutoTable.finalY;(0,Qe.default)(y,{html:"#psyco",useCss:!0,styles:{font:"8px",lineWidth:.2,fontSize:6},startY:V+20,tableWidth:150,margin:{left:20}}),(0,Qe.default)(y,{html:"#mykey",useCss:!0,styles:{font:"8px",lineWidth:.2,fontSize:6},startY:V+20,tableWidth:126,margin:{left:172}}),(0,Qe.default)(y,{html:"#grade",useCss:!0,styles:{font:"8px",lineWidth:.2,fontSize:6},startY:V+20,margin:{left:300}}),y.setFont("","","700"),y.setFontSize(9);let R=y.previousAutoTable.finalY;(0,Qe.default)(y,{html:"#mycomment",useCss:!0,startY:R+20,margin:{left:20}}),this.goo=this.goo+1,this.downloadCount=this.downloadCount+1;let le=y.output("blob");this.pdfFolders.file(d.split(" ").join("_")+"_"+this.goo+".pdf",le)}addLogo(){return new Promise(e=>{this.sch.getSchoolLogo(this.myschool.id).subscribe(i=>{let t=this.genk.getLogoMediaBase64(i,i.type);e()})})}addSignature(){this.sch.obtainSignature(this.currentSessionId,this.currentTerm).subscribe(e=>{let i=this.genk.getMediaBase64(e,e.type)})}getResultsAverageByClass(){return H(this,null,function*(){this.sch.getResultsAverageByClass(this.currentClassId,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>H(this,null,function*(){this.resultviewlist=e,this.startDownloadModal();for(let d=0;d<this.resultviewlist.length;d++){let c=this.resultComment.filter(O=>O.studentId==this.resultviewlist[d].studentId)[0];this.psycomotorlist=this.psycomotorlistBulk.filter(O=>O.studentId==this.resultviewlist[d].studentId),this.resu=this.resultlist.filter(O=>O.studentId==this.resultviewlist[d].studentId)[0].result,this.subjectOffered=this.resu.length,this.markObtainable=this.resu.length*100;let S=this.resu.map(O=>O.totalScore).reduce((O,Y)=>O+Y,0),b=this.averageObj.filter(O=>O.studentId==this.resultviewlist[d].studentId)[0]?.average,g={subjectOffered:this.subjectOffered,markObtainable:this.markObtainable,average:b,stutotal:S},y=this.resultlist.map(O=>O.average),U=[];this.resu.forEach(O=>{let Y=[];Y.push(O.subject),Object.keys(this.caSetupData).forEach(ee=>{Y.push(O[ee.toLowerCase()])}),Y.push(O.totalScore),Y.push(O.grade),Y.push(O.remark),Y.push(O.position),Y.push(O.lowestScore),Y.push(O.highestScore),Y.push(O.average),U.push(Y)}),this.convertToPDF(this.resultviewlist[d].average,this.genk.formatPosition(d+1),U,this.resultviewlist[d].studentName,this.resultviewlist[d].classes,this.resultviewlist[d].admissionNo,c?.formTeacherComment,c?.principalComment,g)}let i=yield this.zip.generateAsync({type:"blob"}),t=document.createElement("a");t.href=URL.createObjectURL(i),t.download=this.myschool.schoolName+"_Results.zip",t.click()}))})}startDownloadModal(){let e;We.default.fire({title:"Student Results Downloading!",html:"<b></b> Results downloaded....",didOpen:()=>{We.default.showLoading();let i=We.default.getPopup().querySelector("b");i.textContent=`${this.downloadCount}`,this.downloadCount==this.resultviewlist.length&&(We.default.close(),window.history.back())}}).then(i=>{i.dismiss===We.default.DismissReason.timer&&console.log("I was closed by the timer")})}startProcessingModal(){let e;We.default.fire({title:"Processing Result Data...",didOpen:()=>{We.default.showLoading(),e=setInterval(()=>{this.resultviewlist.length>0&&We.default.close()},100)},willClose:()=>{clearInterval(e)}}).then(i=>{i.dismiss===We.default.DismissReason.timer&&console.log("I was closed by the timer")})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(G),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:236,vars:45,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[2,"display","flex","justify-content","space-evenly","padding","20px 0"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],["prin",""],[1,"card-body","p-12"],[2,"font-family","'Ariel'"],[2,"text-align","center","margin-bottom","0px"],[2,"font-size","39px","color","rgb(36, 91, 143)","font-weight","900"],[2,"font-size","16px"],[1,"text-center"],[2,"font-style","italic"],[2,"object-fit","cover","height","100px","width","100px","border-radius","100%",3,"src"],[2,"font-size","20px"],["id","toper",2,"width","100%","text-align","left"],[2,"font-size","11px"],[2,"text-align","center","margin-top","10px"],["id","customerstrail"],["tabl",""],[4,"ngIf"],["class","border-bottom border-bottom-dashed",4,"ngFor","ngForOf"],["id","analy",2,"width","100%"],[2,"font-size","10px"],["colspan","2",2,"font-weight","600","padding","6px 0"],[2,"font-size","10px","padding","10px"],["scope","col",2,"font-weight","600","padding","6px 0"],[2,"display","flex","justify-content","space-between"],["id","psyco",2,"width","30%","border","solid 1px grey"],[2,"text-align","center","font-size","10px","background-color","whitesmoke"],["colspan","2"],[2,"font-size","10px","border","solid 1px grey"],["style","font-size: 10px;",4,"ngFor","ngForOf"],["id","mykey",2,"width","30%"],[2,"font-size","10px","border","solid 1px black"],[2,"border","solid 2px black"],["id","grade",2,"font-size","10px","width","40%"],[2,"font-weight","600"],[2,"text-align","center","background-color","whitesmoke"],["colspan","4"],[2,"border","solid 1px grey"],[4,"ngFor","ngForOf"],["id","mycomment",2,"width","100%"],[2,"font-size","9px"],[2,"width","60%","padding","10px 5px 10px 5px"],[2,"padding","15px 5px 5px 5px"],[2,"font-size","8px"],[2,"padding","0 0 50px 50px"],[2,"margin-bottom","15px"],[2,"font-size","15px","font-weight","600","color","rgb(75, 73, 73)"],[2,"font-size","15px","color","rgb(9, 95, 182)","font-style","italic"],["id","chartdiv"],["id","myChart","width","3600","height","1800",2,"display","none"],[1,"border-bottom","border-bottom-dashed"]],template:function(i,t){if(i&1&&(n(0,"div",0)(1,"div")(2,"div")(3,"div")(4,"div")(5,"div",1),f(6,"div",2),n(7,"div",3)(8,"div",4)(9,"div",5,6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"span",10),r(15),s()(),n(16,"div",11)(17,"div",12)(18,"span",13),r(19,"Motto: Home of the Leadership Titans"),s(),f(20,"br"),n(21,"span"),r(22),s()(),n(23,"div",12)(24,"span"),r(25),s(),f(26,"br"),s(),n(27,"div",12),f(28,"img",14),s(),f(29,"br"),n(30,"div",12)(31,"span",15),r(32,"REPORT SHEET"),s(),f(33,"br"),s()(),n(34,"table",16)(35,"tr",17)(36,"td"),r(37),s(),n(38,"td"),r(39),s(),n(40,"td"),r(41),s()(),n(42,"tr",17)(43,"td"),r(44),s(),n(45,"td"),r(46),s(),n(47,"td"),r(48),s()(),n(49,"tr",17)(50,"td"),r(51,"TEACHER'S NAME: MR. OJILE JOHN"),s(),n(52,"td"),r(53),s(),n(54,"td"),r(55),s()(),n(56,"tr",17)(57,"td"),r(58),s(),n(59,"td"),r(60),s(),n(61,"td"),r(62),Ie(63,"date"),s()()(),f(64,"br")(65,"br"),n(66,"div",18)(67,"h4"),r(68,"ACADEMIC RECORD"),s()(),f(69,"div"),s(),n(70,"table",19,20)(72,"thead")(73,"tr")(74,"th"),r(75,"Subject"),s(),C(76,Ql,2,2,"th",21)(77,eo,2,2,"th",21)(78,to,2,2,"th",21)(79,io,2,2,"th",21)(80,no,2,1,"th",21)(81,so,2,1,"th",21)(82,ro,2,1,"th",21)(83,lo,2,1,"th",21)(84,oo,2,1,"th",21)(85,ao,2,1,"th",21)(86,co,2,1,"th",21)(87,mo,2,1,"th",21)(88,uo,2,1,"th",21)(89,po,2,1,"th",21)(90,ho,2,1,"th",21),n(91,"th"),r(92),s(),n(93,"th"),r(94,"Total Score"),s(),n(95,"th"),r(96,"Grade"),s(),n(97,"th"),r(98,"Remark"),s(),n(99,"th"),r(100,"Position"),s(),n(101,"th"),r(102,"Lowest Score"),s(),n(103,"th"),r(104,"Highest Score"),s(),n(105,"th"),r(106,"Average"),s()()(),n(107,"tbody"),C(108,Ao,34,24,"tr",22),s()(),f(109,"br"),n(110,"table",23)(111,"tr",24)(112,"td",25),r(113),s(),n(114,"td",25),r(115),s()(),n(116,"tr",26)(117,"td",27),r(118),s(),n(119,"td",25),r(120),s(),n(121,"td",27),r(122),s()()(),f(123,"br"),n(124,"div",28)(125,"table",29)(126,"thead")(127,"tr",30)(128,"th",31),r(129,"SKILL KEY"),s()(),n(130,"tr",32)(131,"th"),r(132,"SPECIFIC SKILLS"),s(),n(133,"th"),r(134,"RATING"),s()()(),n(135,"tbody"),C(136,Mo,5,2,"tr",33),s()(),n(137,"table",34)(138,"thead")(139,"tr",30)(140,"th",31),r(141,"RATING KEY"),s()(),n(142,"tr",35)(143,"th"),r(144,"KEY NAME"),s(),n(145,"th"),r(146,"KEY VALUE"),s()()(),n(147,"tbody",36)(148,"tr",24)(149,"td"),r(150,"POOR"),s(),n(151,"td"),r(152,"1"),s()(),n(153,"tr",24)(154,"td"),r(155,"FAIR"),s(),n(156,"td"),r(157,"2"),s()(),n(158,"tr",24)(159,"td"),r(160,"GOOD"),s(),n(161,"td"),r(162,"3"),s()(),n(163,"tr",24)(164,"td"),r(165,"VERY GOOD"),s(),n(166,"td"),r(167,"4"),s()(),n(168,"tr",24)(169,"td"),r(170,"EXCELLENT"),s(),n(171,"td"),r(172,"5"),s()(),n(173,"tr",24)(174,"td"),r(175,"\xA0"),s(),n(176,"td"),r(177,"\xA0"),s()(),n(178,"tr",24)(179,"td"),r(180,"\xA0"),s(),n(181,"td"),r(182,"\xA0"),s()(),n(183,"tr",24)(184,"td"),r(185,"\xA0"),s(),n(186,"td"),r(187,"\xA0"),s()(),n(188,"tr",24)(189,"td"),r(190,"\xA0"),s(),n(191,"td"),r(192,"\xA0"),s()()()(),n(193,"table",37)(194,"thead",38)(195,"tr",39)(196,"th",40),r(197,"GRADING KEY"),s()(),n(198,"tr",41)(199,"th"),r(200,"REMARK"),s(),n(201,"th"),r(202,"GRADE"),s(),n(203,"th"),r(204,"MARK FROM"),s(),n(205,"th"),r(206,"MARK UPTO"),s()()(),n(207,"tbody"),C(208,Oo,9,4,"tr",42),s()()(),n(209,"table",43)(210,"tbody",36)(211,"tr",44)(212,"td",45),r(213),s(),n(214,"td",46),r(215,"SIGNATURE: ___________________________________________"),s()(),n(216,"tr",47)(217,"td",45),r(218),s(),n(219,"td",46),r(220,"SIGNATURE: ________________________________________________"),s()()()()(),n(221,"div",48)(222,"div",49)(223,"span",50),r(224,"Form Teacher's Comment:"),s(),r(225," \xA0\xA0 "),n(226,"span",51),r(227),s()(),n(228,"div")(229,"span",50),r(230,"Principal's Comment:"),s(),r(231," \xA0\xA0 "),n(232,"span",51),r(233),s()()()()()()()()()(),n(234,"div",52),f(235,"canvas",53),s()()()),i&2){let d;l(15),p(t.myschool==null?null:t.myschool.schoolName),l(7),p(t.myschool==null?null:t.myschool.address),l(3),I("Tel: ",t.myschool==null?null:t.myschool.phoneOne,""),l(3),h("src",t.myschool==null?null:t.myschool.schoolLogo,oe),l(9),I("TERM: ",t.currentTerm,""),l(2),I("SESSION: ",t.currentSession,""),l(2),I("ADMISSION NO: ",t.studentobj==null?null:t.studentobj.admissionNo,""),l(3),I("NAME OF PUPIL: ",(((d=t.studentobj==null?null:t.studentobj.surname)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.middleName)!==null&&d!==void 0?d:"")+" "+((d=t.studentobj==null?null:t.studentobj.firstName)!==null&&d!==void 0?d:"")).trim(),""),l(2),I("CLASS: ",t.className,""),l(2),I("NO. ON ROLL: ",t.noInClass,""),l(5),I("HOUSE: ",t.house,""),l(2),I("SEX: ",t.studentobj==null?null:t.studentobj.sex,""),l(3),I("NO. OF TIMES SCHOOL OPENED: ",t.estAttendance==null?null:t.estAttendance.noOfOpenDays,""),l(2),I("NO. OF TIMES PRESENT: ",t.estAttendance==null?null:t.estAttendance.noPresentDays,""),l(2),I("NEXT TERM BEGINS: ",Oe(63,43,t.nextResumptionDate),""),l(14),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA1),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA2),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA3),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA4),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA5),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA6),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA7),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA8),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA9),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA10),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA11),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA12),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA13),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA14),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA15),l(2),I("Exam ","("+(t.caSetupScoreData==null?null:t.caSetupScoreData.Exam)+"%)",""),l(16),h("ngForOf",t.resu),l(5),I("Total Mark Obtainable: ",t.markObtainable,""),l(2),I("Total Mark Obtained: ",t.studentTotal==null?null:t.studentTotal.toFixed(1).toString(),""),l(3),I("Pupil Average: ",t.average==null?null:t.average.toString(),""),l(2),I("Subjects: ",t.subjectOffered,""),l(2),I("Class Average: ",t.classAverage,""),l(14),h("ngForOf",t.psycomotorlist),l(72),h("ngForOf",t.gradeScalelist),l(5),I("CLASS TEACHER'S REMARK: ",t.resultComment==null?null:t.resultComment.formTeacherComment,""),l(5),I("SECTION'S HEAD REMARK: ",t.resultComment==null?null:t.resultComment.principalComment,""),l(9),p(t.resultComment==null?null:t.resultComment.formTeacherComment),l(6),p(t.resultComment==null?null:t.resultComment.principalComment)}},dependencies:[W,he,Re],styles:["#customers[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px;font-size:9px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}.heitable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid rgb(186,187,190);padding:2px 5px}.resprint[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#1e90ff;color:#fff;border-radius:20px;box-shadow:1px 1px 3px #0000004d}.resprintdisabled[_ngcontent-%COMP%]{padding:10px 50px;border:none;outline:none;background-color:#a0a3a6;color:#000;border-radius:20px;box-shadow:1px 1px 3px #0000004d}#customerslouismidterm[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerslouismidterm[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:3px 4px;font-size:11px}#customerslouismidterm[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:6px;font-size:11px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}#customerstrail[_ngcontent-%COMP%]{font-family:Poppins;border-collapse:collapse;width:100%}#customerstrail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgb(199,202,203);padding:4px;font-size:10px}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#customerstrail[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customerstrail[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:5px;font-size:10px;font-weight:700;text-align:left;background-color:#245b8f;color:#fff;border:1px solid rgb(188,182,182)}"]});let o=u;return o})();var ht=K(Te());var et=K(mt());function Ro(o,u){if(o&1&&(n(0,"option",103),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function Fo(o,u){o&1&&(n(0,"div",104)(1,"div"),r(2,"No class is selected"),s()())}function Po(o,u){o&1&&(n(0,"div",104)(1,"div"),r(2,"No term is selected"),s()())}function Do(o,u){if(o&1&&(n(0,"option",103),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.subjects)}}function jo(o,u){o&1&&(n(0,"div",104)(1,"div"),r(2,"No subject is selected"),s()())}function Lo(o,u){if(o&1&&(n(0,"option",103),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.sessionName)}}function Bo(o,u){o&1&&(n(0,"div",104)(1,"div"),r(2,"No session is selected"),s()())}function zo(o,u){if(o&1&&(n(0,"th",58),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA1?a.caSetupData.CA1:"CA1")}}function Vo(o,u){if(o&1&&(n(0,"th",58),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA2?a.caSetupData.CA2:"CA2")}}function Wo(o,u){if(o&1&&(n(0,"th",58),r(1),s()),o&2){let a=x();l(),p(a.caSetupData.CA3?a.caSetupData.CA3:"CA3")}}function Go(o,u){if(o&1){let a=k();n(0,"td")(1,"input",115,116),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca1"))}),s()()}if(o&2){let a=x().$implicit,e;l(),h("value",(e=a.ca1)!==null&&e!==void 0?e:"")}}function Uo(o,u){if(o&1){let a=k();n(0,"td")(1,"input",117,118),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca2"))}),s()()}if(o&2){let a=x().$implicit,e;l(),h("value",(e=a.ca2)!==null&&e!==void 0?e:"")}}function Ho(o,u){if(o&1){let a=k();n(0,"td")(1,"input",117,119),v("keyup",function(){w(a);let i=E(2),t=x().$implicit,d=x();return T(d.setCa(t.studentId,i,"ca3"))}),s()()}if(o&2){let a=x().$implicit,e;l(),h("value",(e=a.ca3)!==null&&e!==void 0?e:"")}}function Yo(o,u){if(o&1){let a=k();n(0,"tr",105)(1,"td"),r(2),s(),n(3,"td",106),f(4,"input",107),s(),n(5,"td",108),f(6,"input",109),s(),C(7,Go,3,1,"td",110)(8,Uo,3,1,"td",110)(9,Ho,3,1,"td",110),n(10,"td")(11,"input",111,112),v("keydown",function(){w(a);let i=E(12),t=x();return T(t.initvalue=i.value)})("keyup",function(){let t=w(a).$implicit,d=E(12),c=x();return T(c.setCa(t.studentId,d,"exam"))}),s()(),n(13,"td")(14,"span",113),r(15),s()(),n(16,"td",114)(17,"span",113),r(18),s()(),n(19,"td")(20,"span",113),r(21),s()()()}if(o&2){let a=u.$implicit,e=u.index,i=x(),t,d,c,m,S,b;l(2),p(e+1),l(2),je("value",(t=a.studentName)!==null&&t!==void 0?t:""),l(2),je("value",(d=a.admissionNo)!==null&&d!==void 0?d:""),l(),h("ngIf",i.caSetupData.CA1),l(),h("ngIf",i.caSetupData.CA2),l(),h("ngIf",i.caSetupData.CA3),l(2),h("value",(c=a.exam)!==null&&c!==void 0?c:""),l(4),p((m=a.totalScore)!==null&&m!==void 0?m:""),l(3),p((S=a.grade)!==null&&S!==void 0?S:""),l(3),p((b=a.remark)!==null&&b!==void 0?b:"")}}var Mi=(()=>{let u=class u{constructor(e,i,t,d,c,m){this.router=e,this.auth=i,this.sch=t,this.gen=d,this.activeRoute=c,this.cd=m,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.psycomotorlist=[],this.studentlist=[],this.bigboss=[],this.smallboss=[],this.psycoObjList=[],this.psylist=[],this.motorlist=[],this.classSubjects=[],this.classSubjectsBackup=[],this.resultlist=[],this.gradeScaleList=[],this.destroy=new Ee,this.submitted=!1,this.initvalue=0,this.genk=d,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Other Result Entry",this.resultForm=new dt({term:new be(this.currentTerm,[xe.required]),examtype:new be(this.examType,[xe.required]),sessionId:new be(this.currentSessionId,[xe.required]),subjectId:new be(this.currentSubjectId,[xe.required]),classId:new be(this.currentClass,[xe.required])},{}),this.activeRoute.queryParams.subscribe(e=>{this.examType=e.examType,this.genk.topdata=this.examType+" Result Entry"}),this.getClassNames(),this.getSession(),this.getCurrentSession(),this.cd.markForCheck()}get f(){return this.resultForm.controls}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.schoolClasses=e,this.cd.markForCheck()})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e,this.cd.markForCheck()})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm),this.cd.markForCheck()})}getClassSubjects(){this.sch.getSubjectByClass(this.currentClass.toString()).subscribe(e=>{console.log(e),this.classSubjects=e,this.classSubjectsBackup=e,this.cd.markForCheck()})}getStudents(){debugger;if(this.resultForm.invalid){this.cd.markForCheck();return}this.sch.getStudents(this.currentClass.toString()).subscribe(e=>{this.studentlist=e,this.getResultsByClass(),this.getCaSetupByClass(),this.cd.markForCheck()})}getResultsByClass(){this.sch.getSpecialResultsByClass(this.currentClass.toString(),this.currentSessionId.toString(),this.currentTerm,this.currentSubjectId.toString(),this.examType).subscribe(e=>{this.resultlist=e,this.bigboss=[]})}getCaSetupByClass(){this.sch.getSpecialCaSetupByClass(this.currentSessionId.toString(),this.currentTerm,this.examType).subscribe(e=>{this.caSetupData=e.systemname,this.caScoreData=e.score})}getGradeScale(e){this.currentClass=Number(e),this.getClassSubjects();let t=this.schoolClasses.filter(d=>d.id==this.currentClass)[0].classLevelId;this.sch.getGradeScaleByCategory(t).subscribe(d=>{this.gradeScaleList=d,this.cd.markForCheck()})}setCa(e,i,t){let d,c;if(this.bigboss.filter(m=>m.studentId==Number(e)).length>0){d=this.bigboss.filter(b=>b.studentId==Number(e))[0],c=this.resultlist.filter(b=>b.studentId==Number(e))[0];let m=this.clearInput(this.caScoreData[t.toUpperCase()],Number(i.value));i.value=m.toString(),d[t]=m,d.totalScore=Number(d.ca1??this.checkCA(c.ca1))+Number(d.ca2??this.checkCA(c.ca2))+Number(d.ca3??this.checkCA(c.ca3))+Number(d.exam??this.checkCA(c.exam));let S=this.calGrade(d.totalScore);d.grade=S.grade,d.remark=S.remark,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].totalScore=d.totalScore,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].grade=d.grade,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].remark=d.remark,this.bigboss[this.bigboss.findIndex(b=>b.studentId==Number(e))]=d}else{d=new Ge,c=this.resultlist.filter(b=>b.studentId==Number(e))[0],d.studentId=e;let m=this.clearInput(this.caScoreData[t.toUpperCase()],Number(i.value));i.value=m.toString(),d[t]=m,d.totalScore=Number(d.ca1??this.checkCA(c.ca1))+Number(d.ca2??this.checkCA(c.ca2))+Number(d.ca3??this.checkCA(c.ca3))+Number(d.exam??this.checkCA(c.exam));let S=this.calGrade(d.totalScore);d.grade=S.grade,d.remark=S.remark,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].totalScore=d.totalScore,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].grade=d.grade,this.resultlist[this.resultlist.findIndex(b=>b.studentId==Number(e))].remark=d.remark,this.bigboss.push(d)}console.log(this.bigboss)}checkCA(e){return e||0}calGrade(e){let i;return this.gradeScaleList.forEach(t=>{e>=t.begLimit&&e<=t.endLimit&&(i={grade:t.grade,remark:t.remarks})}),i||{grade:"i",remark:"Not Aplicable"}}validateSaveEntry(){let e=this.classSubjects.filter(t=>t.id==this.currentSubjectId)[0]?.subjects,i=this.schoolClasses.filter(t=>t.id==this.currentClass)[0]?.class;ht.default.fire({title:"Do you want permanently save student exam records for this class?",html:`<p style="font-size: 20px"><b>Subject: </b> ${e}</p> <p style="font-size: 20px"><b>Class: </b> ${i}</p>`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Save"}).then(t=>{t.isConfirmed&&this.submitted==!1&&(this.submitted=!0,this.saveResultEntry())})}saveResultEntry(){if(this.resultForm.invalid){this.cd.markForCheck();return}if(this.resultlist.length<1){this.cd.markForCheck();return}let e=this.schoolClasses.filter(i=>i.id==this.currentClass)[0].class;ht.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{ht.default.showLoading(),this.sch.saveSpecialResultEntry(this.bigboss,this.currentSessionId.toString(),this.currentTerm,this.currentSubjectId.toString(),this.currentClass.toString(),e,this.examType).pipe(pe(this.destroy)).subscribe(i=>{this.submitted=!1,ht.default.close()})}}).then(i=>{ht.default.fire({icon:"success",title:"Result Entry updated successfully!.",showConfirmButton:!1,timer:2e3})})}clearInput(e,i){return e&&i>e?(alert("Value entered is greater than CA Maximum Score of "+e),this.initvalue?Number(this.initvalue):0):Number(i)}upInputToMax(e,i){return e&&i>e?e:Number(i)}downloadTemplate(){let e=[];for(let g=0;g<this.resultlist.length;g++){let y=new Object;y.sn=g+1,y.studentId=this.resultlist[g].studentId,y.admissionNo=this.resultlist[g].admissionNo,y.studentName=this.resultlist[g].studentName;for(let[U,O]of Object.entries(this.caSetupData))y[U+" ["+O+"]"]="";e.push(y)}console.log(e);let i=et.utils.json_to_sheet(e),t=["A1","B1","C1","D1","E1","F1","G1","H1","I1","J1","K1","L1","M1","N1","O1","P1","Q1","R1","S1","T1"];for(let g of t)i[g]&&(i[g].s={font:{color:{rgb:"000000"},bold:!0}});var d=[{wch:4},{wch:10},{wch:20},{wch:35},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10},{wch:10}];i["!cols"]=d;let c=this.classSubjects.filter(g=>g.id==this.currentSubjectId)[0]?.subjects,m=this.schoolClasses.filter(g=>g.id==this.currentClass)[0]?.class,S=et.utils.book_new(),b=c+"__"+m+"__Entry";if(b.length>30){let g=c?.length-(b.length-30);b=c?.substring(0,g)+"__"+m+"__Entry"}et.utils.book_append_sheet(S,i,b),et.writeFile(S,this.auth.currentUserValue.schoolName+"__"+m+"__"+c+"__Result Entry.xlsx",{compression:!0})}loadExcel(e){return H(this,null,function*(){var i=e.target.files[0];if(i){console.log("hi");var t=new FileReader;t.onload=c=>{let m=t.result;var S=c.target.result,b=et.read(m,{type:"binary"});b.SheetNames.forEach(g=>{let y=Le.sheet_to_row_object_array(b.Sheets[g]);this.excelObj=y,console.log(y)})},t.readAsBinaryString(i);let d=t}})}populateFromFile(){for(let e=0;e<this.excelObj.length;e++){let i=0,t=0,d=new Ge;d.studentId=this.excelObj[e].studentId;for(let[c,m]of Object.entries(this.excelObj[e]))c.substring(0,3)=="CA1"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA1,Number(m)),d.ca1=this.upInputToMax(this.caScoreData.CA1,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca1=this.upInputToMax(this.caScoreData.CA1,Number(m))),c.substring(0,3)=="CA2"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA2,Number(m)),d.ca2=this.upInputToMax(this.caScoreData.CA2,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca2=this.upInputToMax(this.caScoreData.CA2,Number(m))),c.substring(0,3)=="CA3"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA3,Number(m)),d.ca3=this.upInputToMax(this.caScoreData.CA3,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca3=this.upInputToMax(this.caScoreData.CA3,Number(m))),c.substring(0,3)=="CA4"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA4,Number(m)),d.ca4=this.upInputToMax(this.caScoreData.CA4,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca4=this.upInputToMax(this.caScoreData.CA4,Number(m))),c.substring(0,3)=="CA5"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA5,Number(m)),d.ca5=this.upInputToMax(this.caScoreData.CA5,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca5=this.upInputToMax(this.caScoreData.CA5,Number(m))),c.substring(0,3)=="CA6"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA6,Number(m)),d.ca6=this.upInputToMax(this.caScoreData.CA6,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca6=this.upInputToMax(this.caScoreData.CA6,Number(m))),c.substring(0,3)=="CA7"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA7,Number(m)),d.ca7=this.upInputToMax(this.caScoreData.CA7,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca7=this.upInputToMax(this.caScoreData.CA7,Number(m))),c.substring(0,3)=="CA8"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA8,Number(m)),d.ca8=this.upInputToMax(this.caScoreData.CA8,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca8=this.upInputToMax(this.caScoreData.CA8,Number(m))),c.substring(0,3)=="CA9"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA9,Number(m)),d.ca9=this.upInputToMax(this.caScoreData.CA9,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca9=this.upInputToMax(this.caScoreData.CA9,Number(m))),c.substring(0,4)=="CA10"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA10,Number(m)),d.ca10=this.upInputToMax(this.caScoreData.CA10,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca10=this.upInputToMax(this.caScoreData.CA10,Number(m))),c.substring(0,4)=="CA11"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA11,Number(m)),d.ca11=this.upInputToMax(this.caScoreData.CA11,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca11=this.upInputToMax(this.caScoreData.CA11,Number(m))),c.substring(0,4)=="CA12"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA12,Number(m)),d.ca12=this.upInputToMax(this.caScoreData.CA12,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca12=this.upInputToMax(this.caScoreData.CA12,Number(m))),c.substring(0,4)=="CA13"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA13,Number(m)),d.ca13=this.upInputToMax(this.caScoreData.CA13,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca13=this.upInputToMax(this.caScoreData.CA13,Number(m))),c.substring(0,4)=="CA14"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA14,Number(m)),d.ca14=this.upInputToMax(this.caScoreData.CA14,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca14=this.upInputToMax(this.caScoreData.CA14,Number(m))),c.substring(0,4)=="CA15"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.CA15,Number(m)),d.ca15=this.upInputToMax(this.caScoreData.CA15,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].ca15=this.upInputToMax(this.caScoreData.CA15,Number(m))),c.substring(0,4)=="Exam"&&m!=""&&(t=1,i=i+this.upInputToMax(this.caScoreData.Exam,Number(m)),d.exam=this.upInputToMax(this.caScoreData.Exam,Number(m)),this.resultlist[this.resultlist.findIndex(S=>S.studentId==this.excelObj[e].studentId)].exam=this.upInputToMax(this.caScoreData.Exam,Number(m)));t==1&&(this.resultlist[this.resultlist.findIndex(c=>c.studentId==this.excelObj[e].studentId)].totalScore=i,this.resultlist[this.resultlist.findIndex(c=>c.studentId==this.excelObj[e].studentId)].grade=this.calGrade(i).grade,this.resultlist[this.resultlist.findIndex(c=>c.studentId==this.excelObj[e].studentId)].remark=this.calGrade(i).remark,d.totalScore=i,d.grade=this.calGrade(i).grade,d.remark=this.calGrade(i).remark,this.bigboss.push(d))}}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(L),_(j),_(G),_(lt))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:173,vars:21,consts:[["id","kt_wrapper",1,"marlin"],["id","kt_content"],["id","kt_post"],["id","kt_content_container"],[1,"card","mb-10"],[1,"card-body"],["id","kt_invoice_form",3,"formGroup","ngSubmit"],[1,"d-flex","flex-column","align-items-start","flex-xxl-row"],["data-bs-toggle","tooltip","data-bs-trigger","hover",1,"d-flex","flex-center","flex-equal","fw-row","text-nowrap","order-1","order-xxl-2","me-4"],[1,"fs-2x","fw-bolder","text-gray-800"],[1,"separator","separator-dashed","my-10"],[1,"mb-0"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["formControlName","classId","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"value","change"],["cuclass",""],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["class","eroce",4,"ngIf"],[1,"fv-row","mb-5"],[1,"fs-6","fw-bold","form-label"],["name","class","formControlName","term","aria-label","Select Term","data-control","select2","data-placeholder","Select Term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["ter",""],["value",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],["formControlName","subjectId","aria-label","Select subject","data-control","select2","data-placeholder","Select subject..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["subj",""],["formControlName","sessionId","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["ses",""],[1,"row","w-100"],[1,"fv-row","mb-10","col-lg-6","col-sm-12"],["name","examtypeclass","formControlName","examtype","aria-label","Select Term","data-control","select2","data-placeholder","Select Term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["exty",""],["value","REGULAR"],["value","MOCK"],["value","PRESS1"],[1,"fv-row","mb-6","col-lg-6","col-sm-12",2,"display","flex","align-items","flex-end"],[1,"w-100","text-center"],[1,"btn","btn-primary","w-90",2,"padding","10px 10%"],[1,"d-flex",2,"width","100%","justify-content","end","margin-top","60px"],["type","button",1,"btn","btn-info","px-12",2,"margin-right","10px",3,"disabled","click"],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","btn","btn-light-info",2,"height","48px","outline","none","border","solid 0.5px #7239ea","padding","6px 15px",3,"disabled"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu",2,"padding","10px"],[2,"margin-bottom","15px","margin-top","10px","font-size","16px"],["type","button","data-bs-toggle","modal","data-bs-target","#kt_modal_add_customer",1,"dropdown-item",3,"click"],[2,"margin-bottom","10px","font-size","16px"],[1,"dropdown-item",3,"click"],[1,"table-responsive","mb-10"],["data-kt-element","items",1,"table","g-5","gs-0","mb-0","fw-bolder","text-gray-700"],[1,"border-bottom","fs-7","fw-bolder","text-gray-700","text-uppercase"],[1,"min-w-250px","w-250px",2,"background-color","white"],[1,"min-w-150px","w-150px"],["class","min-w-150px w-150px",4,"ngIf"],["class","border-bottom border-bottom-dashed","data-kt-element","Name",4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],["id","kt_customers_table_length",1,"dataTables_length"],["name","kt_customers_table_length","aria-controls","kt_customers_table",1,"form-select","form-select-sm","form-select-solid"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-sm-12","col-md-7","d-flex","align-items-center","justify-content-center","justify-content-md-end"],["id","kt_customers_table_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","kt_customers_table_previous",1,"paginate_button","page-item","previous","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","0","tabindex","0",1,"page-link"],[1,"previous"],[1,"paginate_button","page-item","active"],["href","#","aria-controls","kt_customers_table","data-dt-idx","1","tabindex","0",1,"page-link"],["id","kt_customers_table_next",1,"paginate_button","page-item","next","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","2","tabindex","0",1,"page-link"],[1,"next"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport",1,"form-control","form-control-solid",3,"change"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit","data-bs-dismiss","modal",1,"btn","btn-info",3,"click"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[3,"value"],[1,"eroce"],["data-kt-element","Name",1,"border-bottom","border-bottom-dashed"],[1,"pe-7","fixed-column-state"],["type","text","name","name[]","placeholder","Acholo Nora",1,"form-control","form-control-solid","mb-2",3,"value"],[1,"ps-0"],["type","text","name","name[]","disabled","",1,"form-control","form-control-solid","mb-2",3,"value"],[4,"ngIf"],["type","text",1,"form-control","form-control-solid","text-center",3,"value","keydown","keyup"],["exam",""],[1,"form-control","form-control-solid","text-center"],[1,"pt-5","text-end"],["type","text",1,"form-control","form-control-solid","text-center",3,"value","keyup"],["ca1",""],["type","number",1,"form-control","form-control-solid","text-center",3,"value","keyup"],["ca2",""],["ca3",""]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),v("ngSubmit",function(){return t.getStudents()}),n(7,"div",7)(8,"div",8)(9,"span",9),r(10,"Enter Students Result"),s()()(),f(11,"div",10),n(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"label",15)(17,"span",16),r(18,"Select Class"),s()(),n(19,"div",17)(20,"select",18,19),v("change",function(){w(d);let m=E(21);return T(t.getGradeScale(m.value))}),n(22,"option",20),r(23,"Select Class..."),s(),C(24,Ro,2,2,"option",21),s(),C(25,Fo,3,0,"div",22),s()(),n(26,"div",23)(27,"label",24)(28,"span",16),r(29,"Term"),s()(),n(30,"div",17)(31,"select",25,26),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(33,"option",27),r(34,"Select Term..."),s(),n(35,"option",28),r(36,"First "),s(),n(37,"option",29),r(38,"Second"),s(),n(39,"option",30),r(40,"Third"),s()(),C(41,Po,3,0,"div",22),s()()(),n(42,"div",13)(43,"div",14)(44,"label",15)(45,"span",16),r(46,"Subject"),s()(),n(47,"div",17)(48,"select",31,32),M("ngModelChange",function(m){return A(t.currentSubjectId,m)||(t.currentSubjectId=m),m}),n(50,"option",27),r(51,"Select Subject..."),s(),C(52,Do,2,2,"option",21),s(),C(53,jo,3,0,"div",22),s()(),n(54,"div",14)(55,"label",24)(56,"span",16),r(57,"Session"),s()(),n(58,"div",17)(59,"select",33,34),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(61,"option",20),r(62,"Select Session..."),s(),C(63,Lo,2,2,"option",21),s(),C(64,Bo,3,0,"div",22),s()()(),n(65,"div",35)(66,"div",36)(67,"label",24)(68,"span"),r(69,"Exam Type"),s()(),n(70,"div",17)(71,"select",37,38),M("ngModelChange",function(m){return A(t.examType,m)||(t.examType=m),m}),n(73,"option",39),r(74,"Regular"),s(),n(75,"option",40),r(76,"Mock"),s(),n(77,"option",41),r(78,"Pre-SS1"),s()()()(),n(79,"div",42)(80,"div",43)(81,"button",44),r(82,"Show Students"),s()()()(),n(83,"div",45)(84,"button",46),v("click",function(){return t.validateSaveEntry()}),r(85,"Save"),s(),r(86," \xA0 "),n(87,"div",47)(88,"button",48),r(89," Actions "),s(),n(90,"ul",49)(91,"li",50)(92,"a",51),v("click",function(){return t.populateFromFile()}),r(93,"Populate from file"),s()(),n(94,"li",52)(95,"a",53),v("click",function(){return t.downloadTemplate()}),r(96,"Download Template"),s()()()()()(),n(97,"div",54)(98,"table",55)(99,"thead")(100,"tr",56)(101,"th"),r(102,"S/N"),s(),n(103,"th",57),r(104,"Student Name"),s(),n(105,"th",58),r(106,"Admission No"),s(),C(107,zo,2,1,"th",59)(108,Vo,2,1,"th",59)(109,Wo,2,1,"th",59),n(110,"th",58),r(111,"Exam"),s(),n(112,"th",58),r(113,"Total Score"),s(),n(114,"th",58),r(115,"Grade"),s(),n(116,"th",58),r(117,"Remark"),s()()(),n(118,"tbody"),C(119,Yo,22,10,"tr",60),s()()(),n(120,"div",61)(121,"div",62)(122,"div",63)(123,"label")(124,"select",64)(125,"option",65),r(126,"10"),s(),n(127,"option",66),r(128,"25"),s(),n(129,"option",67),r(130,"50"),s(),n(131,"option",68),r(132,"100"),s()()()()(),n(133,"div",69)(134,"div",70)(135,"ul",71)(136,"li",72)(137,"a",73),f(138,"i",74),s()(),n(139,"li",75)(140,"a",76),r(141,"1"),s()(),n(142,"li",77)(143,"a",78),f(144,"i",79),s()()()()()()()()()(),n(145,"div",80)(146,"div",81)(147,"div",82)(148,"form",83)(149,"div",84)(150,"h2",85),r(151,"Upload Result"),s(),n(152,"div",86)(153,"span",87),F(),n(154,"svg",88),f(155,"rect",89)(156,"rect",90),s()()()(),P(),n(157,"div",91)(158,"div",92)(159,"div",93)(160,"label",94),r(161,"Upload Template"),s(),f(162,"i",95),n(163,"input",96),v("change",function(m){return t.loadExcel(m)}),s()()()(),n(164,"div",97)(165,"button",98),r(166,"Discard"),s(),n(167,"button",99),v("click",function(){return t.populateFromFile()}),n(168,"span",100),r(169,"Populate"),s(),n(170,"span",101),r(171,"Please wait... "),f(172,"span",102),s()()()()()()()()()()()}if(i&2){let d=E(21),c=E(32),m=E(49),S=E(60);l(6),h("formGroup",t.resultForm),l(14),h("value",t.currentClass),l(4),h("ngForOf",t.schoolClasses),l(),h("ngIf",!d.value&&t.submitted),l(6),N("ngModel",t.currentTerm),l(10),h("ngIf",!c.value&&t.submitted),l(7),N("ngModel",t.currentSubjectId),l(4),h("ngForOf",t.classSubjects),l(),h("ngIf",!m.value&&t.submitted),l(6),N("ngModel",t.currentSessionId),l(4),h("ngForOf",t.sessionlist),l(),h("ngIf",!S.value&&t.submitted),l(2),ot("display",t.examType?"none":"block"),l(5),N("ngModel",t.examType),l(13),h("disabled",t.resultlist.length<1||t.submitted),l(4),h("disabled",t.resultlist.length<1&&t.submitted),l(19),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA1),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA2),l(),h("ngIf",t.caSetupData==null?null:t.caSetupData.CA3),l(10),h("ngForOf",t.resultlist)}},dependencies:[W,he,q,ne,se,ie,te,$,X,ct,Xe],styles:['@media (max-width:800px){.fixewidth[_ngcontent-%COMP%]{min-width:150px;width:170px}.snfixewidth[_ngcontent-%COMP%]{min-width:10px;width:10px}}@media (min-width: 800px) and (max-width: 3000px){.fixed-column-state[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:100}.fixewidth[_ngcontent-%COMP%]{min-width:250px;width:250px}.snfixewidth[_ngcontent-%COMP%]{min-width:30px;width:30px}.marlin[_ngcontent-%COMP%]{width:90%;margin:20px auto}}.btnact[_ngcontent-%COMP%]{background-color:#10ab23;color:#fff;font-weight:600;padding:10px 20px;border-radius:30px}.nobtnact[_ngcontent-%COMP%]{color:#10ab23;font-weight:600;padding:10px 20px;border-radius:30px}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:inline-block;border-top:4px solid #FFF;border-right:4px solid transparent;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}.loader[_ngcontent-%COMP%]:after{content:"";box-sizing:border-box;position:absolute;left:0;top:0;width:48px;height:48px;border-radius:50%;border-bottom:4px solid #FF3D00;border-left:4px solid transparent}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}',`.table[_ngcontent-%COMP%] {
                                                width: auto;
                                            }

                                            .table-responsive[_ngcontent-%COMP%] {
                                                overflow-x: auto;
                                                max-width: 100%;
                                            }

                                            .fixed-column[_ngcontent-%COMP%] {
                                                position: sticky;
                                                left: 0;
                                                background-color: #fff; 

                                                z-index: 1;
                                            }`]});let o=u;return o})();ke();var kt=K(Pe()),Ye=K(Te());var Oi=(()=>{let u=class u{constructor(e,i,t){this.auth=e,this.sch=i,this.gen=t,this.userName="",this.userImgPath="",this.mobileModal=!1,this.resultlist=[],this.gradeScalelist=[],this.gradescaletextlist=[],this.loadingResult=!1,this.psycomotorlist=[],this.psycomotorlistTableList=[],this.genk=t,this.userName=e.currentUserValue.name,this.userImgPath=e.currentUserValue.logo,this.adminStatus=e.currentUserValue.status}createResult(e,i,t,d,c,m,S,b){this.studentId=e,this.currentTerm=i,this.currentSessionId=t,this.currentSession=d,this.currentClassId=c,this.average=m,this.position=S,this.examType=b,this.getStudent(),this.getNoInClass(),this.getCaSetupByClass(),this.getNextTerm(),this.getGradeScaleByClass(),this.getStudentResultComment(),this.getPsycomotorByStudent(),this.getResultsByStudent(),this.psycomotorlistTableList=[],this.genk.photoString=""}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getNextTerm(){this.sch.getNextTerm(this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{e&&(this.nextResumptionDate=e.date)})}getSchool(){this.sch.getSchoolData().subscribe(e=>{this.myschool=e,Ye.default.fire({title:"Downloading Result...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>H(this,null,function*(){Ye.default.showLoading();debugger;yield this.addLogo(),yield this.addSignature(),this.isResPhoto&&this.studentobj?.passport?yield this.getStudentPhotoBlob(this.studentobj?.passport):this.isResPhoto&&!this.studentobj?.passport?this.genk.photoString=yield this.fetchBase64Image(this.genk.defaultImg):this.genk.photoString=yield this.fetchBase64Image(this.genk.defaultImg);let i=setInterval(()=>{clearInterval(i),clearTimeout(t),this.convertToPDF(),Ye.default.close()},500),t=setTimeout(()=>{clearInterval(i),Ye.default.close(),Ye.default.fire({icon:"error",title:"Failed to download result!",showConfirmButton:!1,timer:2e3})},24e4)})})})}getStudent(){this.sch.getStudentById(this.studentId.toString()).subscribe(e=>{this.studentobj=e,this.isResultPhoto()})}getNoInClass(){this.sch.getNoInClass(this.studentId.toString()).subscribe(e=>{this.noInClass=e.count})}isResultPhoto(){this.sch.isResultPhoto().subscribe(e=>H(this,null,function*(){this.isResPhoto=e.isPhoto}))}getResultsByStudent(){Ye.default.fire({title:"Loading Result....",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{Ye.default.showLoading(),this.loadingResult=!0,this.sch.getSpecialResultsByStudent(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId,this.examType).subscribe(e=>{this.resultlist=e,Ye.default.close(),this.getSchool(),this.loadingResult=!1})}})}getStudentResultComment(){this.sch.getStudentResultComment(this.currentClassId,this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{this.resultComment=e})}getCaSetupByClass(){this.sch.getSpecialCaSetupByClass(this.currentSessionId.toString(),this.currentTerm,this.examType).subscribe(e=>{this.caSetupData=e.systemname,this.caSetupScoreData=e.score})}getGradeScaleByClass(){this.sch.getGradeScaleByClass(this.currentClassId).subscribe(e=>{this.gradeScalelist=e,this.gradescaletextlist.push(this.gradeScalelist[0].classLevel+":");let i;this.gradeScalelist.forEach(t=>{i=t.grade+" = "+t.remarks+" ("+t.begLimit+" - "+t.endLimit+")",this.gradescaletextlist.push(i)})})}getPsycomotorByStudent(){this.sch.getPsycomotorByStudent(this.currentSessionId.toString(),this.currentTerm,this.studentId).subscribe(e=>{if(e.length>0){this.psycomotorlist=e;let i=3;for(let t=0;t<this.psycomotorlist.length;t+=i){let d=[];for(let c=0;c<i;c++)if(t+c<this.psycomotorlist.length){let m=this.psycomotorlist[t+c];d.push({content:m.skill,styles:{fontStyle:"bold"}}),d.push({content:m.score})}else d.push({content:""}),d.push({content:""});this.psycomotorlistTableList.push(d),console.log(this.psycomotorlistTableList)}}})}convertToPDF(){return H(this,null,function*(){var e=new ae("p","pt","letter"),i=e.internal.pageSize.height||e.internal.pageSize.getHeight(),t=e.internal.pageSize.width||e.internal.pageSize.getWidth();if(this.isResPhoto){if(e.setFont("Trebuchet MS","normal","900"),e.setTextColor("rgb(36, 91, 143)"),e.setFontSize(20),e.text(this.myschool?.schoolName??"",t/2,30,{align:"center"}),this.genk.logoString&&e.addImage(this.genk.logoString,"PNG",20,40,55,55),this.genk.signatureString&&e.addImage(this.genk.signatureString,"PNG",500,695,70,55),this.genk.photoString)e.addImage(this.genk.photoString,"PNG",522,40,55,55);else{let R=yield this.fetchBase64Image(this.genk.defaultImg);e.addImage(R,"PNG",522,40,55,55)}e.setFontSize(10),e.setTextColor("rgb(0, 0, 0)"),e.setFont("","","600");let V=e.splitTextToSize(this.myschool?.address??"",400);e.text(V,t/2,48,{align:"center"}),e.setFont("","","500"),e.text("Email: "+this.myschool?.email,t/2,60,{align:"center"}),e.setFont("","","500"),e.text("Phone: "+this.myschool?.phoneOne,t/2,74,{align:"center"}),e.setFont("","","500"),e.text("website: "+this.myschool?.website,t/2,88,{align:"center"}),e.setDrawColor(36,91,143),e.setLineWidth(2),e.line(20,100,580,100)}else{e.setFont("Trebuchet MS","normal","900"),e.setTextColor("rgb(36, 91, 143)"),e.setFontSize(20),e.text(this.myschool?.schoolName??"",t/2,30,{align:"center"}),this.genk.logoString&&e.addImage(this.genk.logoString,"PNG",270,40,55,55),this.genk.signatureString&&e.addImage(this.genk.signatureString,"PNG",500,695,70,55),e.setFontSize(10),e.setTextColor("rgb(0, 0, 0)"),e.setFont("","","700"),e.text("Postal Address:",20,60),e.setFont("","","500");let V=e.splitTextToSize(this.myschool?.address??"",220);e.text(V,20,73),e.setFont("","","700"),e.text("Email:",380,60),e.setFont("","","500"),e.text(this.myschool?.email??"",418,60),e.setFont("","","700"),e.text("Phone:",380,74),e.setFont("","","500"),e.text(this.myschool?.phoneOne??"",418,74),e.setFont("","","700"),e.text("website:",380,88),e.setFont("","","500"),e.text(this.myschool?.website??"",424,88),e.setDrawColor(36,91,143),e.setLineWidth(2),e.line(20,100,580,100)}e.setFontSize(8),e.setFont("","","700"),e.text("STUDENTS NAME:",20,120),e.setFont("","","500"),e.text(((this.studentobj?.surname??"")+" "+(this.studentobj?.middleName??"")+" "+(this.studentobj?.firstName??"")).trim(),113,120),e.setFont("","","700"),e.text("CLASS:",20,132),e.setFont("","","500");let d="";this.resultlist.length>0?d=this.resultlist[0].class:d=this.studentobj?.class,e.text(d??"",113,132),e.setFont("","","700"),e.text("NO. IN CLASS:",20,144),e.setFont("","","500"),e.text(this.noInClass.toString(),113,144),e.setFont("","","700"),e.text("AVERAGE SCORE:",20,156),e.setFont("","","500"),e.text(this.average.toString(),113,156),e.setFont("","","700"),e.text("TERM:",380,120),e.setFont("","","500"),e.text(this.currentTerm,460,120),e.setFont("","","700"),e.text("SESSION:",380,132),e.setFont("","","500"),e.text(this.currentSession,460,132),e.setFont("","","700"),e.text("ADMISSION NO.:",380,144),e.setFont("","","500"),e.text(this.studentobj?.admissionNo??"",460,144),e.setFont("","","700"),e.text("POSITION IN CLASS:",380,156),e.setFont("","","500"),e.text(this.position.toString(),470,156),e.setFontSize(12),e.setFont("Trebuchet MS","normal","600"),e.text(this.examType+" RESULT REPORT SHEET",t/2,190,{align:"center"});let c=this.resultlist,m=[];c.forEach(V=>{let R=[];R.push(V.subject),Object.keys(this.caSetupData).forEach(le=>{R.push(V[le.toLowerCase()])}),R.push(V.totalScore),R.push(V.grade),R.push(V.remark),R.push(V.position),R.push(V.lowestScore),R.push(V.highestScore),R.push(V.average),m.push(R)});let S=this.caSetupData,b=Object.keys(S),g=Object.values(S),y=Object.values(this.caSetupScoreData);for(let V=0;V<g.length;V++)g[V]=g[V]+"("+y[V]+"%)";g.forEach(V=>{V=V+"("+this.caSetupScoreData.CA1+"%)"});let U=["Subject",...g,"Total Score","Grade","Remark","Position","Lowest Score","Highest Score","Average"],O=m;(0,kt.default)(e,{head:[U],useCss:!0,body:m,alternateRowStyles:{fillColor:[250,250,250]},styles:{font:"8px",lineColor:"#808080",lineWidth:.1,fontSize:8,cellPadding:3},headStyles:{fontSize:7,lineColor:"white",textColor:"white",fillColor:[45,113,177]},startY:200,margin:{left:20}});let Y=e.previousAutoTable.finalY;(0,kt.default)(e,{body:this.psycomotorlistTableList,styles:{fontSize:7,cellPadding:3,lineColor:"#808080",lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[250,250,250],textColor:[0,0,0],fontSize:7},alternateRowStyles:{fillColor:[255,255,255]},columnStyles:{0:{halign:"left"},1:{halign:"center"}},startY:Y+10,margin:{top:150,left:20,bottom:30},tableWidth:552});let ee=e.previousAutoTable.finalY;e.setFontSize(10),(0,kt.default)(e,{body:[[{content:"KEY TO GRADE:",styles:{halign:"center",fontStyle:"bold"}},{content:["A = Excellent","B = Good","C = Fair","D = Poor","F = Fail"].join("  "),styles:{halign:"left"}}],[{content:"KEY TO RATINGS:",styles:{halign:"center",fontStyle:"bold"}},{content:"1 = Very Poor  2 = Poor  3 = Fair  4 = Good  5 = Excellent",styles:{halign:"left"}}]],styles:{font:"8px",lineColor:"#808080",lineWidth:.2,fontSize:8},startY:ee+10,tableWidth:552,margin:{left:20},theme:"grid"}),e.setFontSize(8),e.setFont("","","700");let Se=e.splitTextToSize("Form Teacher's Comment:",100);e.text(Se,20,700),e.setFont("","","500"),e.setTextColor("rgb(36, 91, 143)");let ve=e.splitTextToSize(this.resultComment?.formTeacherComment??"",370);e.text(ve,119,700),e.setTextColor("rgb(0, 0, 0)"),e.setFont("","","700");let we=e.splitTextToSize("Principal's Comment:",100);e.text(we,20,730),e.setFont("","","500"),e.setTextColor("rgb(36, 91, 143)");let ye=e.splitTextToSize(this.resultComment?.principalComment??"",370);e.text(ye,103,730),e.save("My_Results")})}addLogo(){return new Promise((e,i)=>{this.sch.getSchoolLogoArray(this.myschool.id).subscribe(t=>{t?.photo?this.genk.logoString=`data:image/jpeg;base64,${t.photo}`:this.genk.logoString="",e()},t=>i(t))})}addSignature(){return new Promise((e,i)=>{this.sch.obtainSignatureArray(this.currentSessionId,this.currentTerm).subscribe(t=>{t?.photo?this.genk.signatureString=`data:image/jpeg;base64,${t.photo}`:this.genk.signatureString="",e()},t=>i(t))})}getStudentPhotoBlob(e){return new Promise((i,t)=>{this.sch.getStudentPhotoArray(e).subscribe(d=>{d.photo?this.genk.photoString=`data:image/jpeg;base64,${d.photo}`:this.genk.photoString="",i()},d=>t(d))})}fetchBase64Image(e){return H(this,null,function*(){let t=yield(yield fetch(e)).blob();return new Promise((d,c)=>{let m=new FileReader;m.onloadend=()=>d(m.result),m.onerror=S=>c(S),m.readAsDataURL(t)})})}};u.\u0275fac=function(i){return new(i||u)(Ct(D),Ct(L),Ct(j))},u.\u0275prov=Gt({token:u,factory:u.\u0275fac,providedIn:"root"});let o=u;return o})();function Xo(o,u){if(o&1&&(n(0,"option",111),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function qo(o,u){if(o&1&&(n(0,"option",111),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.sessionName)}}function Ko(o,u){if(o&1){let a=k();n(0,"button",112),v("click",function(){w(a);let i=x();return T(i.result_multiple.createResult(i.currentTerm,i.currentSessionId,i.currentSession,i.currentClass,i.currentClassName))}),r(1,"Download All Result"),s()}}var Jo=(o,u)=>[o,"result",u],Zo=(o,u,a,e,i,t,d)=>({term:o,currentSessionId:u,currentSession:a,classId:e,className:i,classAverage:t,averageObj:d}),Qo=o=>({data:o});function ea(o,u){if(o&1&&(n(0,"button",113),r(1,"Download All Result"),s()),o&2){let a=x();h("routerLink",at(3,Jo,"/admin",a.currentTerm=="ANNUAL"?a.getAnnualResultMultipleUrl:a.getresultMultipleUrl))("queryParams",gt(6,Zo,a.currentTerm,a.currentSessionId,a.currentSession,a.currentClass,a.currentClassName,a.classAverage,a.averageObj))("state",J(14,Qo,a.averageObj))}}function ta(o,u){if(o&1){let a=k();n(0,"tr")(1,"td",114),r(2),s(),n(3,"td")(4,"a",115),r(5),s()(),n(6,"td")(7,"a",116),r(8),s()(),n(9,"td",117),r(10),s(),n(11,"td"),r(12),s(),n(13,"td"),r(14),s(),n(15,"td"),r(16),s(),n(17,"td")(18,"button",112),v("click",function(){let i=w(a),t=i.$implicit,d=i.index,c=x();return T(c.student_result.createResult(t.studentId,c.currentTerm,c.currentSessionId,c.currentSession,c.currentClass,t.average,t.average?c.formatPosition(d+1):"",c.examType))}),r(19,"Download"),s()()()}if(o&2){let a=u.$implicit,e=u.index,i=x();l(2),I(" ",e+1," "),l(3),p(a.studentName),l(3),p(a.sex),l(2),p(a.admissionNo),l(2),p(a.classes),l(2),p(a.average),l(2),p(i.formatPosition(i.getposition(a==null?null:a.average)+1))}}var Ri=(()=>{let u=class u{constructor(e,i,t,d,c,m,S,b,g){this.router=e,this.route=i,this.auth=t,this.sch=d,this.gen=c,this.activeRoute=m,this.resultService=S,this.studentResult=b,this.resultMultiple=g,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.resultlist=[],this.genk=c,this.userName=t.currentUserValue.name,this.schoolId=t.currentUserValue.schoolId,this.userImgPath=t.currentUserValue.logo,this.adminStatus=t.currentUserValue.status,this.student_result=b,this.result_multiple=g}ngOnInit(){this.genk.topdata="View Special Result",this.activeRoute.queryParams.subscribe(e=>{this.examType=e.examType,this.genk.topdata="view "+this.examType.toLowerCase()+" result"}),this.getClassNames(),this.getSession(),this.getCurrentSession()}get getresultUrl(){return this.genk.resultTemplate.filter(e=>e.id==this.schoolId).length>0?this.genk.resultTemplate.filter(e=>e.id==this.schoolId)[0].result:this.genk.resultTemplate[0].result}get getannualResultUrl(){return this.genk.resultTemplate.filter(e=>e.id==this.schoolId).length>0?this.genk.resultTemplate.filter(e=>e.id==this.schoolId)[0].annual:this.genk.resultTemplate[0].annual}get getresultMultipleUrl(){return this.genk.resultTemplate.filter(e=>e.id==this.schoolId).length>0?this.genk.resultTemplate.filter(e=>e.id==this.schoolId)[0].multiple:this.genk.resultTemplate[0].multiple}get getAnnualResultMultipleUrl(){return this.genk.resultTemplate.filter(e=>e.id==this.schoolId).length>0?this.genk.resultTemplate.filter(e=>e.id==this.schoolId)[0].annualmultiple:this.genk.resultTemplate[0].annualmultiple}getClassNames(){this.sch.getClassNames().subscribe(e=>{this.schoolClasses=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getResults(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getResultsAverageBySession(){this.sch.getSpecialResultsAverageBySession(this.currentClass,this.currentSessionId.toString(),this.currentTerm,this.examType).subscribe(e=>{this.resultlist=e;let t=this.resultlist.map(d=>d.averageRaw).reduce((d,c)=>d+c,0);this.classAverage=(t/this.resultlist.length).toFixed(1),this.averageObj=this.resultlist.map(d=>({averageRaw:d.averageRaw,average:d.average,studentId:d.studentId})),this.averageObj=JSON.stringify(this.averageObj),this.currentSession=this.sessionlist.filter(d=>d.id==this.currentSessionId)[0].sessionName,this.currentClassName=this.schoolClasses.filter(d=>d.id==Number(this.currentClass))[0].class})}getposition(e){return this.resultlist.findIndex(i=>i.average==e)}formatPosition(e){let i,t;switch(e==11||e==12||e==13?t=e:t=Number(e.toString()[e.toString().length-1]),t){case 1:i=e+"st";break;case 2:i=e+"nd";break;case 3:i=e+"rd";break;default:i=e+"th";break}return i}};u.\u0275fac=function(i){return new(i||u)(_(z),_(G),_(D),_(L),_(j),_(G),_($e),_(Oi),_(wt))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:196,vars:11,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","mb-10"],[1,"card-body","p-12"],["action","","id","kt_invoice_form"],[1,"d-flex","flex-column","align-items-start","flex-xxl-row"],["data-bs-toggle","tooltip","data-bs-trigger","hover","title","Enter invoice number",1,"d-flex","flex-center","flex-equal","fw-row","text-nowrap","order-1","order-xxl-2","me-4"],[1,"fs-2x","fw-bolder","text-gray-800"],[1,"separator","separator-dashed","my-10"],[1,"mb-0"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["name","classy","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fv-row","mb-5"],[1,"fs-6","fw-bold","form-label"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["name","clasis","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],["value","ANNUAL"],["name","examtypeclass","aria-label","Select Term","data-control","select2","data-placeholder","Select Term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["exty",""],["value","REGULAR"],["value","MOCK"],["value","PRESS1"],[1,"fv-row","mb-5",2,"margin-top","60px"],[1,"w-100",2,"text-align","center"],[1,"w-50","btn","btn-primary",2,"padding","10px",3,"click"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-customer-table-filter","search","placeholder","Search Students",1,"form-control","form-control-solid","w-250px","ps-15",3,"keyup"],["myInput",""],[1,"card-toolbar"],[1,"text-end"],["class","btn btn-sm btn-light-primary btn-active-primary me-3","class","btn btn-sm btn-light-primary btn-active-primary me-3",3,"click",4,"ngIf"],["class","btn btn-sm btn-light-primary btn-active-primary me-3",3,"routerLink","queryParams","state",4,"ngIf"],[1,"table-responsive","mb-10"],["id","kt_customers_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"w-10px","pe-2"],[1,"min-w-150px"],[1,"min-w-100px"],[1,"min-w-125px"],[1,"fw-bold","text-gray-600"],["myTbody",""],[4,"ngFor","ngForOf"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"d-flex","flex-column","mb-7","fv-row"],[1,"fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Students Class",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["name","Class","data-control","select2","data-placeholder","Select Class...","data-dropdown-parent","#kt_modal_add_customer",1,"form-select","form-select-solid","fw-bolder"],["value","1"],["value","2"],["name","Section","data-control","select2","data-placeholder","Select Section...","data-dropdown-parent","#kt_modal_add_customer",1,"form-select","form-select-solid","fw-bolder"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport","value","",1,"form-control","form-control-solid"],[1,"fv-row","mt-5","mb-7"],[1,"btn","btn-info","w-100"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit",1,"btn","btn-info"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["id","kt_customers_export_modal","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-header"],["id","kt_customers_export_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"modal-body","scroll-y","mx-5","mx-xl-15","my-7"],["id","kt_customers_export_form","action","#",1,"form"],[1,"fs-5","fw-bold","form-label","mb-5"],["data-control","select2","data-placeholder","Select a format","data-hide-search","true","name","format",1,"form-select","form-select-solid"],["value","excell"],["value","pdf"],["value","cvs"],[1,"text-center"],[1,"row"],[1,"col","6"],["type","reset","id","kt_customers_export_cancel",1,"btn","btn-light","w-100","me-3"],["type","submit","id","kt_customers_export_submit",1,"w-100","btn","btn-info"],["id","chartdiv"],["mychartdiv",""],["id","myChart","width","3600","height","1800",2,"display","none"],["mychart",""],[3,"value"],[1,"btn","btn-sm","btn-light-primary","btn-active-primary","me-3",3,"click"],[1,"btn","btn-sm","btn-light-primary","btn-active-primary","me-3",3,"routerLink","queryParams","state"],[1,"text-gray-800","text-bold"],["href","View_user.html",1,"text-gray-800","text-hover-info","mb-1"],["href","#",1,"text-gray-600","text-hover-info","mb-1"],["data-filter","mastercard"]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",7)(8,"div",8)(9,"span",9),r(10,"Students Result"),s()()(),f(11,"div",10),n(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"label",15)(17,"span",16),r(18,"Select Class"),s()(),n(19,"div",17)(20,"select",18),M("ngModelChange",function(m){return A(t.currentClass,m)||(t.currentClass=m),m}),n(21,"option",19),r(22,"Select Class..."),s(),C(23,Xo,2,2,"option",20),s()()(),n(24,"div",21)(25,"label",22)(26,"span",16),r(27,"Session"),s()(),n(28,"div",17)(29,"select",23),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(30,"option",19),r(31,"Select Session..."),s(),C(32,qo,2,2,"option",20),s()()()(),n(33,"div",13)(34,"div",14)(35,"label",15)(36,"span",16),r(37,"Term"),s()(),n(38,"div",17)(39,"select",24),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(40,"option",25),r(41,"Select term"),s(),n(42,"option",26),r(43,"First"),s(),n(44,"option",27),r(45,"Second"),s(),n(46,"option",28),r(47,"Third"),s(),n(48,"option",29),r(49,"Annual"),s()()()(),n(50,"div",21)(51,"label",22)(52,"span"),r(53,"Exam Type"),s()(),n(54,"div",17)(55,"select",30,31),M("ngModelChange",function(m){return A(t.examType,m)||(t.examType=m),m}),n(57,"option",32),r(58,"Regular"),s(),n(59,"option",33),r(60,"Mock"),s(),n(61,"option",34),r(62,"Pre-SS1"),s()()()()(),n(63,"div",35)(64,"div",36)(65,"button",37),v("click",function(){return t.getResultsAverageBySession()}),r(66,"Show Results"),s()()(),n(67,"div",38)(68,"div",39)(69,"div",40)(70,"span",41),F(),n(71,"svg",42),f(72,"rect",43)(73,"path",44),s()(),P(),n(74,"input",45,46),v("keyup",function(){w(d);let m=E(75),S=E(101);return T(t.genk.searchTable(m,S))}),s()()(),n(76,"div",47)(77,"div",48),C(78,Ko,2,0,"button",49)(79,ea,2,16,"button",50),s()()()(),n(80,"div",51)(81,"table",52)(82,"thead")(83,"tr",53)(84,"th",54),r(85," S/N "),s(),n(86,"th",55),r(87,"Students Name"),s(),n(88,"th",56),r(89,"Gender"),s(),n(90,"th",55),r(91,"Admission No"),s(),n(92,"th",57),r(93,"Class"),s(),n(94,"th",57),r(95,"Average"),s(),n(96,"th",56),r(97,"Position"),s(),n(98,"th",56),r(99,"Actions"),s()()(),n(100,"tbody",58,59),C(102,ta,20,7,"tr",60),s()()()()()()(),n(103,"div",61)(104,"div",62)(105,"div",63)(106,"form",64)(107,"div",65)(108,"h2",66),r(109,"Upload Students"),s(),n(110,"div",67)(111,"span",68),F(),n(112,"svg",42),f(113,"rect",69)(114,"rect",70),s()()()(),P(),n(115,"div",71)(116,"div",72)(117,"div",73)(118,"label",74)(119,"span",16),r(120,"Class"),s(),f(121,"i",75),s(),n(122,"select",76)(123,"option",19),r(124,"Select Class..."),s(),n(125,"option",77),r(126,"Primary 1"),s(),n(127,"option",78),r(128,"Primary 2"),s()()(),n(129,"div",73)(130,"label",74)(131,"span",16),r(132,"Section "),s()(),n(133,"select",79)(134,"option",19),r(135,"Select Section..."),s(),n(136,"option",77),r(137,"2022/2023"),s(),n(138,"option",78),r(139,"2023/2024"),s()()(),n(140,"div",80)(141,"label",81),r(142,"Upload Template"),s(),f(143,"i",82)(144,"input",83),s(),n(145,"div",84)(146,"button",85),r(147,"download Template Document"),s()()()(),n(148,"div",86)(149,"button",87),r(150,"Discard"),s(),n(151,"button",88)(152,"span",89),r(153,"Submit"),s(),n(154,"span",90),r(155,"Please wait... "),f(156,"span",91),s()()()()()()(),n(157,"div",92)(158,"div",62)(159,"div",63)(160,"div",93)(161,"h2",66),r(162,"Export Result"),s(),n(163,"div",94)(164,"span",68),F(),n(165,"svg",42),f(166,"rect",69)(167,"rect",70),s()()()(),P(),n(168,"div",95)(169,"form",96)(170,"div",14)(171,"label",97),r(172,"Select Export Format:"),s(),n(173,"select",98)(174,"option",99),r(175,"Excel"),s(),n(176,"option",100),r(177,"PDF"),s(),n(178,"option",101),r(179,"CVS"),s()()(),n(180,"div",102)(181,"div",103)(182,"div",104)(183,"button",105),r(184,"Discard"),s()(),n(185,"div",104)(186,"button",106)(187,"span",89),r(188,"Submit"),s(),n(189,"span",90),r(190,"Please wait... "),f(191,"span",91),s()()()()()()()()()()()()()(),n(192,"div",107,108),f(194,"canvas",109,110),s()}i&2&&(l(20),N("ngModel",t.currentClass),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(11),ot("display",t.examType?"none":"block"),l(5),N("ngModel",t.examType),l(23),h("ngIf",t.getresultUrl=="student-result"),l(),h("ngIf",t.getresultUrl!="student-result"),l(23),h("ngForOf",t.resultlist))},dependencies:[W,he,q,ne,se,ie,te,$,ge,X,Fe],styles:['@media (max-width:800px){.fixewidth[_ngcontent-%COMP%]{min-width:150px;width:170px}.snfixewidth[_ngcontent-%COMP%]{min-width:10px;width:10px}}@media (min-width: 800px) and (max-width: 3000px){.fixed-column-state[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:100}.fixewidth[_ngcontent-%COMP%]{min-width:250px;width:250px}.snfixewidth[_ngcontent-%COMP%]{min-width:30px;width:30px}.marlin[_ngcontent-%COMP%]{width:90%;margin:20px auto}}.btnact[_ngcontent-%COMP%]{background-color:#10ab23;color:#fff;font-weight:600;padding:10px 20px;border-radius:30px}.nobtnact[_ngcontent-%COMP%]{color:#10ab23;font-weight:600;padding:10px 20px;border-radius:30px}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:inline-block;border-top:4px solid #FFF;border-right:4px solid transparent;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}.loader[_ngcontent-%COMP%]:after{content:"";box-sizing:border-box;position:absolute;left:0;top:0;width:48px;height:48px;border-radius:50%;border-bottom:4px solid #FF3D00;border-left:4px solid transparent}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}']});let o=u;return o})();var Ae=K(Te());function ia(o,u){if(o&1&&(n(0,"option",113),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function na(o,u){if(o&1&&(n(0,"option",113),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),I("",a.sessionName," ")}}function sa(o,u){if(o&1){let a=k();n(0,"tr")(1,"td",114),r(2),s(),n(3,"td")(4,"a",115),r(5),s()(),n(6,"td")(7,"a",116),r(8),s()(),n(9,"td"),r(10),s(),n(11,"td"),r(12),s(),n(13,"td")(14,"input",117,118),v("change",function(){let t=w(a).$implicit,d=E(15),c=x();return T(c.editComment(t.studentId,d.value))}),s()()()}if(o&2){let a=u.$implicit,e=u.index,i=x(),t;l(2),I(" ",e+1," "),l(3),p(a.studentName),l(3),p(a.sex),l(2),p(a.average),l(2),p(a.average?i.formatPosition(e+1):""),l(2),h("value",(t=a.comment)!==null&&t!==void 0?t:"")}}function ra(o,u){if(o&1&&(n(0,"option",113),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function la(o,u){if(o&1&&(n(0,"option",113),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),I("",a.sessionName," ")}}function oa(o,u){if(o&1){let a=k();n(0,"div",119)(1,"div",120),v("click",function(){let t=w(a).$implicit,d=x();return T(d.getResultsByStudent(t.studentId,t.studentName,t.studentPhoto,t.comment))}),n(2,"div",89)(3,"div",121)(4,"div",122),f(5,"img",123),s()(),n(6,"div",90)(7,"a",124),r(8),s()()(),n(9,"div",92)(10,"div",90)(11,"a",91),r(12),s()()()(),f(13,"div",93),s()}if(o&2){let a=u.$implicit,e=x(),i;l(5),h("src",e.setImg(a.studentPhoto),oe),l(3),p(a.studentName),l(4),p((i=a.average)!==null&&i!==void 0?i:"")}}function aa(o,u){if(o&1&&(n(0,"tr")(1,"td")(2,"a",115),r(3),s()(),n(4,"td")(5,"a",125),r(6),s()(),n(7,"td",125),r(8),s(),n(9,"td",125),r(10),s(),n(11,"td",125),r(12),s()()),o&2){let a=u.$implicit;l(3),p(a.subject),l(3),p(a.totalScore),l(2),p(a.grade),l(2),p(a.position),l(2),I("",a.remark," ")}}function da(o,u){if(o&1&&(n(0,"option",113),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),p(a.class)}}function ca(o,u){if(o&1&&(n(0,"option",113),r(1),s()),o&2){let a=u.$implicit;h("value",a.id),l(),I("",a.sessionName," ")}}function ma(o,u){if(o&1){let a=k();n(0,"tr")(1,"td",114),r(2),s(),n(3,"td")(4,"a",115),r(5),s()(),n(6,"td")(7,"a",116),r(8),s()(),n(9,"td"),r(10),s(),n(11,"td"),r(12),s(),n(13,"td")(14,"input",117,126),v("change",function(){let t=w(a).$implicit,d=E(15),c=x();return T(c.editHostelComment(t.studentId,d.value))}),s()()()}if(o&2){let a=u.$implicit,e=u.index,i=x(),t;l(2),I(" ",e+1," "),l(3),p(a.studentName),l(3),p(a.sex),l(2),p(a.average),l(2),p(a.average?i.formatPosition(e+1):""),l(2),h("value",(t=a.comment)!==null&&t!==void 0?t:"")}}var Fi=(()=>{let u=class u{constructor(e,i,t,d,c,m){this.router=e,this.route=i,this.auth=t,this.activeRoute=d,this.sch=c,this.gen=m,this.userName="",this.userImgPath="",this.mobileModal=!1,this.schoolClasses=[],this.sessionlist=[],this.resultlist=[],this.principalresultlist=[],this.hostelresultlist=[],this.commentlist=[],this.principlecommentlist=[],this.hostelcommentlist=[],this.studentresultlist=[],this.destroy=new Ee,this.gradeScaleList=[],this.genk=m,this.userName=t.currentUserValue.name,this.userImgPath=t.currentUserValue.logo,this.adminStatus=t.currentUserValue.status}ngOnInit(){this.genk.topdata="Special Comment Entry",this.activeRoute.queryParams.subscribe(e=>{this.examType=e.examType,this.genk.topdata="view "+this.examType.toLowerCase()+" comment"}),this.getClassNames(),this.getSession(),this.getCurrentSession()}getClassNames(){this.sch.getClassNames().subscribe(e=>{debugger;this.schoolClasses=e})}getSession(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}getCurrentSession(){this.sch.getCurrentSession().subscribe(e=>{this.currentSessionObj=e,this.currentSessionId=this.currentSessionObj.sessionId,this.currentSessionObj.currentTerm&&(this.currentTerm=this.currentSessionObj.currentTerm)})}getResults(){this.sch.getSession().subscribe(e=>{this.sessionlist=e})}getResultsAverageByClass(){this.currentTerm=="ANNUAL"?this.sch.getAnnualResultsAverageByClassComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultlist=e,this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName}):this.sch.getResultsAverageByClassComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.resultlist=e,this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName})}getResultsAverageHostelPortal(){this.currentTerm=="ANNUAL"?this.sch.getAnnualResultsAverageHostelSupervisorComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.hostelresultlist=e,this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName}):this.sch.getResultsAverageHostelSupervisorComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(e=>{this.hostelresultlist=e,this.currentSession=this.sessionlist.filter(i=>i.id==this.currentSessionId)[0].sessionName})}getResultsAverageByClassPrincipalComment(){this.currentTerm=="ANNUAL"?this.sch.getAnnualResultsAverageByClassComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(t=>{this.principalresultlist=t,this.currentSession=this.sessionlist.filter(d=>d.id==this.currentSessionId)[0].sessionName}):this.sch.getResultsAverageByClassPrincipalComment(this.currentClass,this.currentSessionId.toString(),this.currentTerm).subscribe(t=>{this.principalresultlist=t,this.currentSession=this.sessionlist.filter(d=>d.id==this.currentSessionId)[0].sessionName});let i=this.schoolClasses.filter(t=>t.id==this.currentClass)[0].classLevelId;debugger;this.sch.getGradeScaleByCategory(i).subscribe(t=>{this.gradeScaleList=t})}editComment(e,i){if(this.commentlist.length>0)if(this.commentlist.filter(t=>t.studentId==Number(e)).length>0)this.commentlist[this.commentlist.findIndex(t=>t.studentId==Number(e))].comment=i;else{let t={studentId:e,comment:i};this.commentlist.push(t)}else{let t={studentId:e,comment:i};this.commentlist.push(t)}}editPrincipleComment(e,i){if(this.principlecommentlist.length>0)if(this.principlecommentlist.filter(t=>t.studentId==Number(e)).length>0)this.principlecommentlist[this.principlecommentlist.findIndex(t=>t.studentId==Number(e))].comment=i;else{let t={studentId:e,comment:i};this.principlecommentlist.push(t)}else{let t={studentId:e,comment:i};this.principlecommentlist.push(t)}}editHostelComment(e,i){if(this.hostelcommentlist.length>0)if(this.hostelcommentlist.filter(t=>t.studentId==Number(e)).length>0)this.hostelcommentlist[this.hostelcommentlist.findIndex(t=>t.studentId==Number(e))].comment=i;else{let t={studentId:e,comment:i};this.hostelcommentlist.push(t)}else{let t={studentId:e,comment:i};this.hostelcommentlist.push(t)}}formatPosition(e){let i;switch(e){case 1:i="1st";break;case 2:i="2nd";break;case 3:i="3rd";break;default:i=e+"th";break}return i}saveComments(){Ae.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{Ae.default.showLoading(),this.sch.saveFormTeacherComment(this.commentlist,this.currentClass,this.currentSessionId.toString(),this.currentTerm).pipe(pe(this.destroy)).subscribe(e=>{Ae.default.close()})}}).then(e=>{Ae.default.fire({icon:"success",title:"Result Entry updated successfully!.",showConfirmButton:!1,timer:2e3})})}getResultsByStudent(e,i,t,d){this.myStudentId=e,this.myStudentName=i,this.myStudentPhoto=t,this.principleComment=d,this.currentTerm=="ANNUAL"?this.sch.getAnnualResultsPagePrincipal(this.currentClass,this.currentSessionId.toString(),e.toString()).subscribe(c=>{this.studentresultlist=c;for(let S=0;S<this.studentresultlist.length;S++){var m=this.gradeScaleList.filter(b=>b.endLimit>=this.studentresultlist[S].totalScore)[0];this.studentresultlist[S].grade=m.grade,this.studentresultlist[S].remark=m.remarks}}):this.sch.getResultsByStudent(this.currentClass,this.currentSessionId.toString(),this.currentTerm,e.toString()).subscribe(c=>{debugger;this.studentresultlist=c})}savePrincipleComments(){Ae.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{Ae.default.showLoading(),this.sch.saveFormPrincipalComment(this.principlecommentlist,this.currentClass,this.currentSessionId.toString(),this.currentTerm).pipe(pe(this.destroy)).subscribe(e=>{Ae.default.close()})}}).then(e=>{Ae.default.fire({icon:"success",title:"Result Entry updated successfully!.",showConfirmButton:!1,timer:2e3})})}saveHostelComments(){Ae.default.fire({title:"Processing Data...",allowEscapeKey:!1,allowOutsideClick:!1,didOpen:()=>{Ae.default.showLoading(),this.sch.saveHostelSupervisorComment(this.hostelcommentlist,this.currentClass,this.currentSessionId.toString(),this.currentTerm).pipe(pe(this.destroy)).subscribe(e=>{Ae.default.close()})}}).then(e=>{Ae.default.fire({icon:"success",title:"Result Entry updated successfully!.",showConfirmButton:!1,timer:2e3})})}};u.\u0275fac=function(i){return new(i||u)(_(z),_(G),_(D),_(G),_(L),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:360,vars:27,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],["id","kt_ecommerce_add_product_form","data-kt-redirect","#",1,"form","d-flex","flex-column","flex-lg-row"],[1,"d-flex","flex-column","flex-row-fluid","gap-7","gap-lg-10"],[1,"nav","nav-custom","nav-tabs","nav-line-tabs","nav-line-tabs-2x","border-0","fs-4","fw-bold","mb-n2"],[1,"nav-item"],["data-bs-toggle","tab","href","#kt_ecommerce_add_product_general",1,"nav-link","text-active-primary","pb-4","active"],["data-bs-toggle","tab","href","#kt_ecommerce_add_product_new",1,"nav-link","text-active-primary","pb-4"],["data-bs-toggle","tab","href","#kt_ecommerce_add_product_general_H",1,"nav-link","text-active-primary","pb-4"],[1,"tab-content"],["id","kt_ecommerce_add_product_general","role","tab-panel",1,"tab-pane","fade","show","active"],[1,"d-flex","flex-column","gap-7","gap-lg-10"],[1,"card","card-flush","py-4"],[1,"card-body","pt-10"],[1,"row","gx-10","mb-5"],[1,"col-lg-6"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"required"],[1,"w-100"],["name","classy","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fs-6","fw-bold","form-label"],["name","classu","aria-label","Select class","data-control","select2","data-placeholder","Select class..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["name","clasis","aria-label","Select term","data-control","select2","data-placeholder","Select term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["selected","","disabled",""],["value","FIRST"],["value","SECOND"],["value","THIRD"],["value","ANNUAL"],["name","examtypeclass1","aria-label","Select Term","data-control","select2","data-placeholder","Select Term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["exty",""],["value","REGULAR"],["value","MOCK"],["value","PRESS1"],[1,"fv-row","mb-5","text-center","w-100"],[1,"w-50",2,"margin","0 auto"],[1,"w-100","btn","btn-primary",2,"padding","10px",3,"click"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-customer-table-filter","search","placeholder","Search Students",1,"form-control","form-control-solid","w-250px","ps-15"],[1,"text-end"],["type","submit",1,"me-3","btn","btn-info",3,"click"],[1,"indicator-label"],["type","button","data-bs-toggle","modal","data-bs-target","#kt_modal_add_customer",1,"btn","btn-info"],[1,"table-responsive","mb-10"],["id","kt_customers_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"w-10px","pe-2"],[1,"min-w-150px"],[1,"min-w-100px"],[1,"min-w-125px"],[1,"min-w-300px"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],["id","kt_customers_table_length",1,"dataTables_length"],["name","kt_customers_table_length","aria-controls","kt_customers_table",1,"form-select","form-select-sm","form-select-solid"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-sm-12","col-md-7","d-flex","align-items-center","justify-content-center","justify-content-md-end"],["id","kt_customers_table_paginate",1,"dataTables_paginate","paging_simple_numbers"],[1,"pagination"],["id","kt_customers_table_previous",1,"paginate_button","page-item","previous","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","0","tabindex","0",1,"page-link"],[1,"previous"],[1,"paginate_button","page-item","active"],["href","#","aria-controls","kt_customers_table","data-dt-idx","1","tabindex","0",1,"page-link"],["id","kt_customers_table_next",1,"paginate_button","page-item","next","disabled"],["href","#","aria-controls","kt_customers_table","data-dt-idx","2","tabindex","0",1,"page-link"],[1,"next"],["id","kt_ecommerce_add_product_new","role","tab-panel",1,"tab-pane","fade"],["name","examtypeclass2","aria-label","Select Term","data-control","select2","data-placeholder","Select Term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],[1,"col-lg-6","col-xl-4","mb-5"],["id","kt_contacts_list",1,"card","card-flush"],["id","kt_contacts_list_body",1,"card-body","pt-5"],["data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_header, #kt_toolbar, #kt_footer, #kt_contacts_list_header","data-kt-scroll-wrappers","#kt_content, #kt_contacts_list_body","data-kt-scroll-stretch","#kt_contacts_list, #kt_contacts_main","data-kt-scroll-offset","5px",1,"scroll-y","me-n5","pe-5","h-300px","h-xl-auto"],[1,"d-flex","flex-stack","py-4"],[1,"d-flex","align-items-center"],[1,"ms-4"],["href","#",1,"fs-6","fw-bolder","text-gray-900","text-hover-primary","mb-2"],[1,"d-flex","align-items-stretch-end"],[1,"separator","separator"],["class","backit",4,"ngFor","ngForOf"],[1,"col-lg-6","col-xl-8"],["id","kt_contacts_main",1,"card","card-flush","h-lg-100"],[1,"card-body","pe-10"],[2,"text-align","center"],["alt","Emma Smith",2,"object-fit","cover","height","60px","width","60px","border-radius","100%",3,"src"],[2,"font-size","18px","margin-left","20px"],[1,"mb-0"],[1,"form-label","fs-6","fw-bolder","text-gray-700"],["name","notes","rows","3","placeholder","This is a very good result. I encourage you to work harder for a better result next term.",1,"form-control","form-control-solid",3,"value","change"],["depe",""],[1,"mt-3","btn","btn-sm","btn-primary",3,"click"],["id","kt_ecommerce_add_product_general_H","role","tab-panel",1,"tab-pane","fade"],["name","examtypeclass","aria-label","Select Term","data-control","select2","data-placeholder","Select Term..",1,"form-select","form-select-solid","form-select-lg",3,"ngModel","ngModelChange"],["id","kt_footer",1,"footer","py-4","d-flex","flex-lg-column"],[1,"container-fluid","d-flex","flex-column","flex-md-row","align-items-center","justify-content-between"],[1,"text-dark","order-2","order-md-1"],[1,"text-muted","fw-bold","me-1"],["href","https://GradexCloud.com","target","_blank",1,"text-gray-800","text-hover-primary"],[3,"value"],[1,"text-gray-800","text-bold"],["href","View_user.html",1,"text-gray-800","text-hover-info","mb-1"],["href","#",1,"text-gray-600","text-hover-info","mb-1"],["id","textField","type","text","name","class","aria-label","Enter comment","placeholder","Enter comment...",1,"form-control","form-control-solid","form-control-lg",3,"value","change"],["de",""],[1,"backit"],[1,"d-flex","flex-stack","py-4",3,"click"],[1,"symbol","symbol-circle","symbol-30px","overflow-hidden"],[1,"symbol-label"],["alt","Emma Smith",1,"w-100",2,"object-fit","cover",3,"src"],[1,"fs-6","fw-bolder","text-gray-900","text-hover-primary","mb-2"],[1,"text-gray-800","text-hover-info","mb-1"],["dehe",""]],template:function(i,t){if(i&1){let d=k();n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),r(9,"Form Teacher's Comment"),s()(),n(10,"li",7)(11,"a",9),r(12,"Principal's Comment"),s()(),n(13,"li",7)(14,"a",10),r(15,"Hostel Supervisor's Comment"),s()()(),n(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"div",16)(22,"div",17)(23,"div",18)(24,"label",19)(25,"span",20),r(26,"Class"),s()(),n(27,"div",21)(28,"select",22),M("ngModelChange",function(m){return A(t.currentClass,m)||(t.currentClass=m),m}),n(29,"option",23),r(30,"Select Class..."),s(),C(31,ia,2,2,"option",24),s()()(),n(32,"div",18)(33,"label",25)(34,"span",20),r(35,"Session"),s()(),n(36,"div",21)(37,"select",26),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(38,"option",23),r(39,"Select Session..."),s(),C(40,na,2,2,"option",24),s()()()(),n(41,"div",17)(42,"div",18)(43,"label",19)(44,"span",20),r(45,"Term"),s()(),n(46,"div",21)(47,"select",27),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(48,"option",28),r(49,"Select term"),s(),n(50,"option",29),r(51,"First"),s(),n(52,"option",30),r(53,"Second"),s(),n(54,"option",31),r(55,"Third"),s(),n(56,"option",32),r(57,"Annual"),s()()()(),n(58,"div",18)(59,"label",25)(60,"span"),r(61,"Exam Type"),s()(),n(62,"div",21)(63,"select",33,34),M("ngModelChange",function(m){return A(t.examType,m)||(t.examType=m),m}),n(65,"option",35),r(66,"Regular"),s(),n(67,"option",36),r(68,"Mock"),s(),n(69,"option",37),r(70,"Pre-SS1"),s()()()()(),n(71,"div",38)(72,"div",39)(73,"button",40),v("click",function(){return t.getResultsAverageByClass()}),r(74,"Show Results"),s()()(),n(75,"div",41)(76,"div",42)(77,"div",43)(78,"span",44),F(),n(79,"svg",45),f(80,"rect",46)(81,"path",47),s()(),P(),f(82,"input",48),s()(),n(83,"div")(84,"div",49)(85,"button",50),v("click",function(){return t.saveComments()}),n(86,"span",51),r(87,"Save Comment"),s()(),n(88,"button",52),r(89,"Batch Uploads "),s()()()()(),n(90,"div",53)(91,"table",54)(92,"thead")(93,"tr",55)(94,"th",56),r(95," S/N "),s(),n(96,"th",57),r(97,"Students Name"),s(),n(98,"th",58),r(99,"Gender"),s(),n(100,"th",59),r(101,"Average"),s(),n(102,"th",59),r(103,"Position"),s(),n(104,"th",60),r(105,"Class Teacher's Comment "),s()()(),n(106,"tbody",61),C(107,sa,16,6,"tr",62),s()()(),n(108,"div",63)(109,"div",64)(110,"div",65)(111,"label")(112,"select",66)(113,"option",67),r(114,"10"),s(),n(115,"option",68),r(116,"25"),s(),n(117,"option",69),r(118,"50"),s(),n(119,"option",70),r(120,"100"),s()()()()(),n(121,"div",71)(122,"div",72)(123,"ul",73)(124,"li",74)(125,"a",75),f(126,"i",76),s()(),n(127,"li",77)(128,"a",78),r(129,"1"),s()(),n(130,"li",79)(131,"a",80),f(132,"i",81),s()()()()()()()()()(),n(133,"div",82)(134,"div",13)(135,"div",14)(136,"div",15)(137,"div",16)(138,"div",17)(139,"div",18)(140,"label",19)(141,"span",20),r(142,"Class"),s()(),n(143,"div",21)(144,"select",22),M("ngModelChange",function(m){return A(t.currentClass,m)||(t.currentClass=m),m}),n(145,"option",23),r(146,"Select Class..."),s(),C(147,ra,2,2,"option",24),s()()(),n(148,"div",18)(149,"label",25)(150,"span",20),r(151,"Session"),s()(),n(152,"div",21)(153,"select",26),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(154,"option",23),r(155,"Select Session..."),s(),C(156,la,2,2,"option",24),s()()()(),n(157,"div",17)(158,"div",18)(159,"label",19)(160,"span",20),r(161,"Term"),s()(),n(162,"div",21)(163,"select",27),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(164,"option",28),r(165,"Select term"),s(),n(166,"option",29),r(167,"First"),s(),n(168,"option",30),r(169,"Second"),s(),n(170,"option",31),r(171,"Third"),s(),n(172,"option",32),r(173,"Annual"),s()()()(),n(174,"div",18)(175,"label",25)(176,"span"),r(177,"Exam Type"),s()(),n(178,"div",21)(179,"select",83,34),M("ngModelChange",function(m){return A(t.examType,m)||(t.examType=m),m}),n(181,"option",35),r(182,"Regular"),s(),n(183,"option",36),r(184,"Mock"),s(),n(185,"option",37),r(186,"Pre-SS1"),s()()()()(),n(187,"div",38)(188,"div",39)(189,"button",40),v("click",function(){return t.getResultsAverageByClassPrincipalComment()}),r(190,"Show Results"),s()()()()()(),n(191,"div",63)(192,"div",84)(193,"div",85)(194,"div",86)(195,"div",87)(196,"div",88)(197,"div",89)(198,"div",90)(199,"a",91),r(200,"Student Name"),s()()(),n(201,"div",92)(202,"div",90)(203,"a",91),r(204,"Average Score"),s()()()(),f(205,"div",93),C(206,oa,14,3,"div",94),s()()()(),n(207,"div",95)(208,"div",96)(209,"div",97)(210,"div",53)(211,"div",98),f(212,"img",99),n(213,"span",100),r(214),s()(),n(215,"table",54)(216,"thead")(217,"tr",55)(218,"th",57),r(219,"Subject"),s(),n(220,"th",58),r(221,"Score"),s(),n(222,"th",59),r(223,"Grade"),s(),n(224,"th",59),r(225,"Position"),s(),n(226,"th",58),r(227," Remarks"),s()()(),n(228,"tbody",61),C(229,aa,13,5,"tr",62),s()(),n(230,"div",101)(231,"label",102),r(232," Comment"),s(),n(233,"textarea",103,104),v("change",function(){w(d);let m=E(234);return T(t.editPrincipleComment(t.myStudentId,m.value))}),s()(),n(235,"a",105),v("click",function(){return t.savePrincipleComments()}),r(236,"Save"),s()()()()()()()(),n(237,"div",106)(238,"div",13)(239,"div",14)(240,"div",15)(241,"div",16)(242,"div",17)(243,"div",18)(244,"label",19)(245,"span",20),r(246,"Class"),s()(),n(247,"div",21)(248,"select",22),M("ngModelChange",function(m){return A(t.currentClass,m)||(t.currentClass=m),m}),n(249,"option",23),r(250,"Select Class..."),s(),C(251,da,2,2,"option",24),s()()(),n(252,"div",18)(253,"label",25)(254,"span",20),r(255,"Session"),s()(),n(256,"div",21)(257,"select",26),M("ngModelChange",function(m){return A(t.currentSessionId,m)||(t.currentSessionId=m),m}),n(258,"option",23),r(259,"Select Session..."),s(),C(260,ca,2,2,"option",24),s()()()(),n(261,"div",17)(262,"div",18)(263,"label",19)(264,"span",20),r(265,"Term"),s()(),n(266,"div",21)(267,"select",27),M("ngModelChange",function(m){return A(t.currentTerm,m)||(t.currentTerm=m),m}),n(268,"option",28),r(269,"Select term"),s(),n(270,"option",29),r(271,"First"),s(),n(272,"option",30),r(273,"Second"),s(),n(274,"option",31),r(275,"Third"),s(),n(276,"option",32),r(277,"Annual"),s()()()(),n(278,"div",18)(279,"label",25)(280,"span"),r(281,"Exam Type"),s()(),n(282,"div",21)(283,"select",107,34),M("ngModelChange",function(m){return A(t.examType,m)||(t.examType=m),m}),n(285,"option",35),r(286,"Regular"),s(),n(287,"option",36),r(288,"Mock"),s(),n(289,"option",37),r(290,"Pre-SS1"),s()()()()(),n(291,"div",38)(292,"div",39)(293,"button",40),v("click",function(){return t.getResultsAverageHostelPortal()}),r(294,"Show Results"),s()()(),n(295,"div",41)(296,"div",42)(297,"div",43)(298,"span",44),F(),n(299,"svg",45),f(300,"rect",46)(301,"path",47),s()(),P(),f(302,"input",48),s()(),n(303,"div")(304,"div",49)(305,"button",50),v("click",function(){return t.saveHostelComments()}),n(306,"span",51),r(307,"Save Comment"),s()(),n(308,"button",52),r(309,"Batch Uploads "),s()()()()(),n(310,"div",53)(311,"table",54)(312,"thead")(313,"tr",55)(314,"th",56),r(315," S/N "),s(),n(316,"th",57),r(317,"Students Name"),s(),n(318,"th",58),r(319,"Gender"),s(),n(320,"th",59),r(321,"Average"),s(),n(322,"th",59),r(323,"Position"),s(),n(324,"th",60),r(325,"Class Teacher's Comment "),s()()(),n(326,"tbody",61),C(327,ma,16,6,"tr",62),s()()(),n(328,"div",63)(329,"div",64)(330,"div",65)(331,"label")(332,"select",66)(333,"option",67),r(334,"10"),s(),n(335,"option",68),r(336,"25"),s(),n(337,"option",69),r(338,"50"),s(),n(339,"option",70),r(340,"100"),s()()()()(),n(341,"div",71)(342,"div",72)(343,"ul",73)(344,"li",74)(345,"a",75),f(346,"i",76),s()(),n(347,"li",77)(348,"a",78),r(349,"1"),s()(),n(350,"li",79)(351,"a",80),f(352,"i",81),s()()()()()()()()()()()()()()()(),n(353,"div",108)(354,"div",109)(355,"div",110)(356,"span",111),r(357,"2022\xA9"),s(),n(358,"a",112),r(359,"GradexCloud"),s()()()()()}if(i&2){let d;l(28),N("ngModel",t.currentClass),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(11),ot("display",t.examType?"none":"block"),l(5),N("ngModel",t.examType),l(44),h("ngForOf",t.resultlist),l(37),N("ngModel",t.currentClass),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(16),N("ngModel",t.examType),l(27),h("ngForOf",t.principalresultlist),l(6),h("src",t.setImg(t.myStudentPhoto),oe),l(2),p(t.myStudentName),l(15),h("ngForOf",t.studentresultlist),l(4),h("value",(d=t.principleComment)!==null&&d!==void 0?d:""),l(15),N("ngModel",t.currentClass),l(3),h("ngForOf",t.schoolClasses),l(6),N("ngModel",t.currentSessionId),l(3),h("ngForOf",t.sessionlist),l(7),N("ngModel",t.currentTerm),l(16),N("ngModel",t.examType),l(44),h("ngForOf",t.hostelresultlist)}},dependencies:[W,q,ne,se,ie,te,$,ge,X],styles:[".backit[_ngcontent-%COMP%]:hover{background-color:#8cc0ed;padding:0 2px}"]});let o=u;return o})();var ua=o=>[o,"result","result-entry"],zt=o=>[o,"result","special-result-entry"],pa=()=>({examType:"REGULAR"}),ha=()=>({examType:"MOCK"}),ga=()=>({examType:"PRESS1"}),Sa=o=>[o,"result","weeekly-result-entry"],fa=o=>[o,"result","psycomotor-entry"],Pi=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.sch=t,this.activeRoute=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.calendarEventList=[],this.isViewModal=!1,this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Entries"}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(L),_(G),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:109,vars:24,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"row","g-5","g-xl-8"],[1,"col-xl-3"],[1,"card","bg-body","hoverable","card-xl-stretch","mb-xl-8",3,"routerLink"],[1,"card-body"],[1,"svg-icon","svg-icon-info","svg-icon-2hx"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.3","d","M18 21.6C16.3 21.6 15 20.3 15 18.6V2.50001C15 2.20001 14.6 1.99996 14.3 2.19996L13 3.59999L11.7 2.3C11.3 1.9 10.7 1.9 10.3 2.3L9 3.59999L7.70001 2.3C7.30001 1.9 6.69999 1.9 6.29999 2.3L5 3.59999L3.70001 2.3C3.50001 2.1 3 2.20001 3 3.50001V18.6C3 20.3 4.3 21.6 6 21.6H18Z","fill","currentColor"],["d","M12 12.6H11C10.4 12.6 10 12.2 10 11.6C10 11 10.4 10.6 11 10.6H12C12.6 10.6 13 11 13 11.6C13 12.2 12.6 12.6 12 12.6ZM9 11.6C9 11 8.6 10.6 8 10.6H6C5.4 10.6 5 11 5 11.6C5 12.2 5.4 12.6 6 12.6H8C8.6 12.6 9 12.2 9 11.6ZM9 7.59998C9 6.99998 8.6 6.59998 8 6.59998H6C5.4 6.59998 5 6.99998 5 7.59998C5 8.19998 5.4 8.59998 6 8.59998H8C8.6 8.59998 9 8.19998 9 7.59998ZM13 7.59998C13 6.99998 12.6 6.59998 12 6.59998H11C10.4 6.59998 10 6.99998 10 7.59998C10 8.19998 10.4 8.59998 11 8.59998H12C12.6 8.59998 13 8.19998 13 7.59998ZM13 15.6C13 15 12.6 14.6 12 14.6H10C9.4 14.6 9 15 9 15.6C9 16.2 9.4 16.6 10 16.6H12C12.6 16.6 13 16.2 13 15.6Z","fill","currentColor"],["d","M15 18.6C15 20.3 16.3 21.6 18 21.6C19.7 21.6 21 20.3 21 18.6V12.5C21 12.2 20.6 12 20.3 12.2L19 13.6L17.7 12.3C17.3 11.9 16.7 11.9 16.3 12.3L15 13.6V18.6Z","fill","currentColor"],[1,"text-gray-900","fw-bold","fs-2","mb-2","mt-5"],[1,"fw-semibold","text-gray-600"],[1,"card","bg-body","hoverable","card-xl-stretch","mb-xl-8",3,"routerLink","queryParams"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport","value","",1,"form-control","form-control-solid"],[1,"fv-row","mt-5","mb-7"],[1,"btn","btn-info","w-100"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit",1,"btn","btn-info"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6)(7,"div",7)(8,"span",8),F(),n(9,"svg",9),f(10,"path",10)(11,"path",11)(12,"path",12),s()(),P(),n(13,"div",13),r(14," Assessment Score Input "),s(),n(15,"div",14),r(16," Click to Enter Student Scores "),s()()()(),n(17,"div",5)(18,"a",15)(19,"div",7)(20,"span",8),F(),n(21,"svg",9),f(22,"path",10)(23,"path",11)(24,"path",12),s()(),P(),n(25,"div",13),r(26," 100% Score Input "),s(),n(27,"div",14),r(28," Click to Enter Student 100% Scores "),s()()()(),n(29,"div",5)(30,"a",15)(31,"div",7)(32,"span",8),F(),n(33,"svg",9),f(34,"path",10)(35,"path",11)(36,"path",12),s()(),P(),n(37,"div",13),r(38," Mock Score Input "),s(),n(39,"div",14),r(40," Click to Enter Student Mock Scores "),s()()()(),n(41,"div",5)(42,"a",15)(43,"div",7)(44,"span",8),F(),n(45,"svg",9),f(46,"path",10)(47,"path",11)(48,"path",12),s()(),P(),n(49,"div",13),r(50," Pre SS1 Score Input "),s(),n(51,"div",14),r(52," Click to Enter Student Pre SS1 Scores "),s()()()()(),n(53,"div",4)(54,"div",5)(55,"a",6)(56,"div",7)(57,"span",8),F(),n(58,"svg",9),f(59,"path",10)(60,"path",11)(61,"path",12),s()(),P(),n(62,"div",13),r(63," Practice Test Score Input "),s(),n(64,"div",14),r(65," Click to Enter Student Practice Test Scores "),s()()()(),n(66,"div",5)(67,"a",6)(68,"div",7)(69,"span",8),F(),n(70,"svg",9),f(71,"path",10)(72,"path",11)(73,"path",12),s()(),P(),n(74,"div",13),r(75," Psychomotor Entry "),s(),n(76,"div",14),r(77," Click to Enter Student Psychomotor Entry "),s()()()()(),n(78,"div",16)(79,"div",17)(80,"div",18)(81,"form",19)(82,"div",20)(83,"h2",21),r(84,"Upload Result"),s(),n(85,"div",22)(86,"span",23),F(),n(87,"svg",24),f(88,"rect",25)(89,"rect",26),s()()()(),P(),n(90,"div",27)(91,"div",28)(92,"div",29)(93,"label",30),r(94,"Upload Template"),s(),f(95,"i",31)(96,"input",32),s(),n(97,"div",33)(98,"button",34),r(99,"download Template Document"),s()()()(),n(100,"div",35)(101,"button",36),r(102,"Discard"),s(),n(103,"button",37)(104,"span",38),r(105,"Submit"),s(),n(106,"span",39),r(107,"Please wait... "),f(108,"span",40),s()()()()()()()()()()()),i&2&&(l(6),h("routerLink",J(9,ua,"/admin")),l(12),h("routerLink",J(11,zt,"/admin"))("queryParams",Me(13,pa)),l(12),h("routerLink",J(14,zt,"/admin"))("queryParams",Me(16,ha)),l(12),h("routerLink",J(17,zt,"/admin"))("queryParams",Me(19,ga)),l(13),h("routerLink",J(20,Sa,"/admin")),l(12),h("routerLink",J(22,fa,"/admin")))},dependencies:[q,$,X,Fe],styles:[`

                    .card[_ngcontent-%COMP%] {
                    border: 1px solid #ddd;  

                    transition: all 0.3s ease;  

                    padding: 5px;
                    margin: 10px;
                    border-radius: 8px;  

                    }

                    

                    .card[_ngcontent-%COMP%]:hover {
                    outline: 3px solid purple;  

                    transform: translateY(-5px);  

                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);  

                    }`]});let o=u;return o})();var xa=o=>[o,"result","view-result"],ba=o=>[o,"result","view-midterm-result"],Vt=o=>[o,"result","view-special-result"],_a=()=>({examType:"MOCK"}),Ca=()=>({examType:"PRESS1"}),va=()=>({examType:"REGULAR"}),ya=o=>[o,"result","subject-result"],Ea=o=>[o,"result","mastersheet"],Ia=o=>[o,"result","weekly-mastersheet"],Di=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.sch=t,this.activeRoute=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.calendarEventList=[],this.isViewModal=!1,this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Results"}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(L),_(G),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:125,vars:30,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"row","g-5","g-xl-8"],[1,"col-xl-3"],[1,"card","bg-body","hoverable","card-xl-stretch","mb-xl-8",3,"routerLink"],[1,"card-body"],[1,"svg-icon","svg-icon-info","svg-icon-2hx"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.3","d","M2 21V14C2 13.4 2.4 13 3 13H21C21.6 13 22 13.4 22 14V21C22 21.6 21.6 22 21 22H3C2.4 22 2 21.6 2 21Z","fill","currentColor"],["d","M2 10V3C2 2.4 2.4 2 3 2H21C21.6 2 22 2.4 22 3V10C22 10.6 21.6 11 21 11H3C2.4 11 2 10.6 2 10Z","fill","currentColor"],[1,"text-gray-900","fw-bold","fs-2","mb-2","mt-5"],[1,"fw-semibold","text-gray-600"],[1,"card","bg-body","hoverable","card-xl-stretch","mb-xl-8",3,"routerLink","queryParams"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport","value","",1,"form-control","form-control-solid"],[1,"fv-row","mt-5","mb-7"],[1,"btn","btn-info","w-100"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit",1,"btn","btn-info"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6)(7,"div",7)(8,"span",8),F(),n(9,"svg",9),f(10,"path",10)(11,"path",11),s()(),P(),n(12,"div",12),r(13," View Termly Result "),s(),n(14,"div",13),r(15," Click to View Student Termly and Annual Result "),s()()()(),n(16,"div",5)(17,"a",6)(18,"div",7)(19,"span",8),F(),n(20,"svg",9),f(21,"path",10)(22,"path",11),s()(),P(),n(23,"div",12),r(24," View Midterm Result "),s(),n(25,"div",13),r(26," Click to View Student Midterm Result "),s()()()(),n(27,"div",5)(28,"a",14)(29,"div",7)(30,"span",8),F(),n(31,"svg",9),f(32,"path",10)(33,"path",11),s()(),P(),n(34,"div",12),r(35," View Mock Result "),s(),n(36,"div",13),r(37," Click to View Student Mock Result "),s()()()(),n(38,"div",5)(39,"a",14)(40,"div",7)(41,"span",8),F(),n(42,"svg",9),f(43,"path",10)(44,"path",11),s()(),P(),n(45,"div",12),r(46," View Pre SS1 Result "),s(),n(47,"div",13),r(48," Click to View Student Pre SS1 Result "),s()()()()(),n(49,"div",4)(50,"div",5)(51,"a",14)(52,"div",7)(53,"span",8),F(),n(54,"svg",9),f(55,"path",10)(56,"path",11),s()(),P(),n(57,"div",12),r(58," View 100% Score Result "),s(),n(59,"div",13),r(60," Click to View 100% Result "),s()()()(),n(61,"div",5)(62,"a",6)(63,"div",7)(64,"span",8),F(),n(65,"svg",9),f(66,"path",10)(67,"path",11),s()(),P(),n(68,"div",12),r(69," View Subject Result "),s(),n(70,"div",13),r(71," Click to View Student Subject Result "),s()()()(),n(72,"div",5)(73,"a",6)(74,"div",7)(75,"span",8),F(),n(76,"svg",9),f(77,"path",10)(78,"path",11),s()(),P(),n(79,"div",12),r(80," View Mastersheet "),s(),n(81,"div",13),r(82," Click to View Student Result Mastersheet "),s()()()(),n(83,"div",5)(84,"a",6)(85,"div",7)(86,"span",8),F(),n(87,"svg",9),f(88,"path",10)(89,"path",11),s()(),P(),n(90,"div",12),r(91," View Practice Test Mastersheet "),s(),n(92,"div",13),r(93," Click to View Student Practice Test Result Mastersheet "),s()()()()(),n(94,"div",15)(95,"div",16)(96,"div",17)(97,"form",18)(98,"div",19)(99,"h2",20),r(100,"Upload Result"),s(),n(101,"div",21)(102,"span",22),F(),n(103,"svg",23),f(104,"rect",24)(105,"rect",25),s()()()(),P(),n(106,"div",26)(107,"div",27)(108,"div",28)(109,"label",29),r(110,"Upload Template"),s(),f(111,"i",30)(112,"input",31),s(),n(113,"div",32)(114,"button",33),r(115,"download Template Document"),s()()()(),n(116,"div",34)(117,"button",35),r(118,"Discard"),s(),n(119,"button",36)(120,"span",37),r(121,"Submit"),s(),n(122,"span",38),r(123,"Please wait... "),f(124,"span",39),s()()()()()()()()()()()),i&2&&(l(6),h("routerLink",J(11,xa,"/admin")),l(11),h("routerLink",J(13,ba,"/admin")),l(11),h("routerLink",J(15,Vt,"/admin"))("queryParams",Me(17,_a)),l(11),h("routerLink",J(18,Vt,"/admin"))("queryParams",Me(20,Ca)),l(12),h("routerLink",J(21,Vt,"/admin"))("queryParams",Me(23,va)),l(11),h("routerLink",J(24,ya,"/admin")),l(11),h("routerLink",J(26,Ea,"/admin")),l(11),h("routerLink",J(28,Ia,"/admin")))},dependencies:[q,$,X,Fe],styles:[`

                    .card[_ngcontent-%COMP%] {
                        border: 1px solid #ddd;
                        

                        transition: all 0.3s ease;
                        

                        padding: 5px;
                        margin: 10px;
                        border-radius: 8px;
                        

                    }

                    

                    .card[_ngcontent-%COMP%]:hover {
                        outline: 3px solid purple;
                        

                        transform: translateY(-5px);
                        

                        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                        

                    }`]});let o=u;return o})();var wa=o=>[o,"result","comment"],Wt=o=>[o,"result","special-comment"],Ta=()=>({examType:"REGULAR"}),ka=()=>({examType:"MOCK"}),Na=()=>({examType:"PRESS1"}),ji=(()=>{let u=class u{constructor(e,i,t,d,c){this.router=e,this.auth=i,this.sch=t,this.activeRoute=d,this.gen=c,this.userName="",this.userImgPath="",this.mobileModal=!1,this.calendarEventList=[],this.isViewModal=!1,this.genk=c,this.userName=i.currentUserValue.name,this.userImgPath=i.currentUserValue.logo,this.adminStatus=i.currentUserValue.status}ngOnInit(){this.genk.topdata="Comments"}setImg(e){return e&&e.length>0?this.genk.imgurl+e:this.genk.defaultImg}};u.\u0275fac=function(i){return new(i||u)(_(z),_(D),_(L),_(G),_(j))},u.\u0275cmp=B({type:u,selectors:[["ng-component"]],inputs:{header:"header"},decls:92,vars:18,consts:[["id","kt_wrapper",1,"wrapper","d-flex","flex-column","flex-row-fluid"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"row","g-5","g-xl-8"],[1,"col-xl-3"],[1,"card","bg-body","hoverable","card-xl-stretch","mb-xl-8",3,"routerLink"],[1,"card-body"],[1,"svg-icon","svg-icon-info","svg-icon-2hx"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.3","d","M19 22H5C4.4 22 4 21.6 4 21V3C4 2.4 4.4 2 5 2H14L20 8V21C20 21.6 19.6 22 19 22ZM12.5 18C12.5 17.4 12.6 17.5 12 17.5H8.5C7.9 17.5 8 17.4 8 18C8 18.6 7.9 18.5 8.5 18.5L12 18C12.6 18 12.5 18.6 12.5 18ZM16.5 13C16.5 12.4 16.6 12.5 16 12.5H8.5C7.9 12.5 8 12.4 8 13C8 13.6 7.9 13.5 8.5 13.5H15.5C16.1 13.5 16.5 13.6 16.5 13ZM12.5 8C12.5 7.4 12.6 7.5 12 7.5H8C7.4 7.5 7.5 7.4 7.5 8C7.5 8.6 7.4 8.5 8 8.5H12C12.6 8.5 12.5 8.6 12.5 8Z","fill","currentColor"],["x","7","y","17","width","6","height","2","rx","1","fill","currentColor"],["x","7","y","12","width","10","height","2","rx","1","fill","currentColor"],["x","7","y","7","width","6","height","2","rx","1","fill","currentColor"],["d","M15 8H20L14 2V7C14 7.6 14.4 8 15 8Z","fill","currentColor"],[1,"text-gray-900","fw-bold","fs-2","mb-2","mt-5"],[1,"fw-semibold","text-gray-600"],[1,"card","bg-body","hoverable","card-xl-stretch","mb-xl-8",3,"routerLink","queryParams"],["id","kt_modal_add_customer","tabindex","-1","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],["action","#","id","kt_modal_add_customer_form","data-kt-redirect","../../demo1/dist/apps/customers/list.html",1,"form"],["id","kt_modal_add_customer_header",1,"modal-header"],[1,"fw-bolder"],["id","kt_modal_add_customer_close",1,"btn","btn-icon","btn-sm","btn-active-icon-primary"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","py-10","px-lg-17"],["id","kt_modal_add_customer_scroll","data-kt-scroll","true","data-kt-scroll-activate","{default: false, lg: true}","data-kt-scroll-max-height","auto","data-kt-scroll-dependencies","#kt_modal_add_customer_header","data-kt-scroll-wrappers","#kt_modal_add_customer_scroll","data-kt-scroll-offset","300px",1,"scroll-y","me-n7","pe-7"],[1,"fv-row","mb-7"],[1,"required","fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Click the button below first to download the template, then upload after the excel sheet has been filled with the necessary data",1,"fas","fa-exclamation-circle","ms-1","fs-7"],["type","file","placeholder","","name","passport","value","",1,"form-control","form-control-solid"],[1,"fv-row","mt-5","mb-7"],[1,"btn","btn-info","w-100"],[1,"modal-footer","flex-center"],["type","reset","id","kt_modal_add_customer_cancel",1,"btn","btn-light","me-3"],["type","submit","id","kt_modal_add_customer_submit",1,"btn","btn-info"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6)(7,"div",7)(8,"span",8),F(),n(9,"svg",9),f(10,"path",10)(11,"rect",11)(12,"rect",12)(13,"rect",13)(14,"path",14),s()(),P(),n(15,"div",15),r(16," Term Comment Entry "),s(),n(17,"div",16),r(18," Click to Enter Student Term Comment "),s()()()(),n(19,"div",5)(20,"a",17)(21,"div",7)(22,"span",8),F(),n(23,"svg",9),f(24,"path",10)(25,"rect",11)(26,"rect",12)(27,"rect",13)(28,"path",14),s()(),P(),n(29,"div",15),r(30," 100% Score Comment Entry "),s(),n(31,"div",16),r(32," Click to 100% Score Comment Comment "),s()()()(),n(33,"div",5)(34,"a",17)(35,"div",7)(36,"span",8),F(),n(37,"svg",9),f(38,"path",10)(39,"rect",11)(40,"rect",12)(41,"rect",13)(42,"path",14),s()(),P(),n(43,"div",15),r(44," Mock Comment Entry "),s(),n(45,"div",16),r(46," Click to Enter Student Mock Comment "),s()()()(),n(47,"div",5)(48,"a",17)(49,"div",7)(50,"span",8),F(),n(51,"svg",9),f(52,"path",10)(53,"rect",11)(54,"rect",12)(55,"rect",13)(56,"path",14),s()(),P(),n(57,"div",15),r(58," Pre SS1 Comment Entry "),s(),n(59,"div",16),r(60," Click to Enter Student Pre SS1 Comment "),s()()()()(),n(61,"div",18)(62,"div",19)(63,"div",20)(64,"form",21)(65,"div",22)(66,"h2",23),r(67,"Upload Result"),s(),n(68,"div",24)(69,"span",25),F(),n(70,"svg",26),f(71,"rect",27)(72,"rect",28),s()()()(),P(),n(73,"div",29)(74,"div",30)(75,"div",31)(76,"label",32),r(77,"Upload Template"),s(),f(78,"i",33)(79,"input",34),s(),n(80,"div",35)(81,"button",36),r(82,"download Template Document"),s()()()(),n(83,"div",37)(84,"button",38),r(85,"Discard"),s(),n(86,"button",39)(87,"span",40),r(88,"Submit"),s(),n(89,"span",41),r(90,"Please wait... "),f(91,"span",42),s()()()()()()()()()()()),i&2&&(l(6),h("routerLink",J(7,wa,"/admin")),l(14),h("routerLink",J(9,Wt,"/admin"))("queryParams",Me(11,Ta)),l(14),h("routerLink",J(12,Wt,"/admin"))("queryParams",Me(14,ka)),l(14),h("routerLink",J(15,Wt,"/admin"))("queryParams",Me(17,Na)))},dependencies:[q,$,X,Fe],styles:[`

                    .card[_ngcontent-%COMP%] {
                        border: 1px solid #ddd;
                        

                        transition: all 0.3s ease;
                        

                        padding: 5px;
                        margin: 10px;
                        border-radius: 8px;
                        

                    }

                    

                    .card[_ngcontent-%COMP%]:hover {
                        outline: 3px solid purple;
                        

                        transform: translateY(-5px);
                        

                        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                        

                    }`]});let o=u;return o})();var Aa=[{path:"",component:Rt},{path:"psycomotor-entry",component:Rt},{path:"result-entry",component:li},{path:"view-result",component:oi},{path:"comment",component:di},{path:"student-result/:id",component:ai},{path:"mastersheet",component:ci},{path:"publish-result",component:mi},{path:"subject-result",component:ui},{path:"block-result",component:pi},{path:"louisville-result/:id",component:hi},{path:"annual-result/:id",component:gi},{path:"result-multiple",component:fi},{path:"annual-result-multiple",component:bi},{path:"process-midterm",component:_i},{path:"louisville-annual-result/:id",component:Ci},{path:"view-midterm-result",component:vi},{path:"midterm-result/:id",component:yi},{path:"notre-dame-result/:id",component:Ei},{path:"louisville-midterm-result/:id",component:Ii},{path:"weeekly-result-entry",component:wi},{path:"weekly-mastersheet",component:Ti},{path:"trailblazer-result/:id",component:ki},{path:"trailblazer-result-multiple",component:Ai},{path:"special-result-entry",component:Mi},{path:"view-special-result",component:Ri},{path:"special-comment",component:Fi},{path:"result-entries",component:Pi},{path:"view",component:Di},{path:"result-comment",component:ji}],Li=(()=>{let u=class u{};u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=bt({type:u}),u.\u0275inj=_t({imports:[St.forChild(Aa),St]});let o=u;return o})();var Ma=K(Vi());ke();var im=(()=>{let u=class u{};u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=bt({type:u}),u.\u0275inj=_t({imports:[Xt,Qt,ei,qt,St,ti,Li]});let o=u;return o})();export{im as ResultModule};
