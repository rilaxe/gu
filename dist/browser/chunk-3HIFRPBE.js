import{B as b,G as g,Ra as d,Sa as w,db as u,e as h,k as f,m as y}from"./chunk-CJ262RDI.js";import{q as p}from"./chunk-2YZJNNV5.js";var I=(()=>{let r=class r{constructor(o){this.http=o}getBase64ImageFromUrl(o){return p(this,null,function*(){try{let e=new d().set("id",o),i=`${u.apiUrl}/school/getSchoolLogo`,c=yield this.http.get(i,{responseType:"text",params:e}).pipe(y(3),f(n=>(console.error("Error fetching image:",n),h(()=>new Error("Failed to fetch image after retries"))))).toPromise(),s=this.base64ToBlob(c,"image/png");return new Promise((n,m)=>{let t=new FileReader;t.onload=()=>{n(t.result)},t.onerror=()=>m("Failed to convert image to Base64"),t.readAsDataURL(s)})}catch(e){throw new Error(`Failed to fetch image after retries: ${e}`)}})}base64ToBlob(o,e=""){let i=atob(o),c=[];for(let a=0;a<i.length;a+=512){let s=i.slice(a,a+512),n=new Array(s.length);for(let t=0;t<s.length;t++)n[t]=s.charCodeAt(t);let m=new Uint8Array(n);c.push(m)}return new Blob(c,{type:e})}};r.\u0275fac=function(e){return new(e||r)(g(w))},r.\u0275prov=b({token:r,factory:r.\u0275fac,providedIn:"root"});let l=r;return l})();export{I as a};
