<div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">
    <div class="content d-flex flex-column flex-column-fluid " id="kt_content">

        <!--begin::Post-->
        <div class="post d-flex flex-column-fluid" id="kt_post">
            <!--begin::Container-->
            <div id="kt_content_container" class="container-xxl">
                <!--begin::Card-->
                <div class="card mb-10">
                    <!--begin::Card body-->
                    <div class="card-body p-12">
                        <!--begin::Form-->
                        <form action="" id="kt_invoice_form">

                            <!--begin::Wrapper-->
                            <div class="mb-0">
                                <!--begin::Row-->
                                <div class="row">
                                    <!--begin::Col-->
                                    <div class="col-lg-6">
                                       
                                        <div class="fv-row mb-10">
                                            <label class="fs-6 fw-bold form-label">
                                                <span class="required">Class Name</span>
                                            </label>
                                            <!--end::Label-->
                                            <div class="w-100">
                                                <select #sess [value]="currentClass" (change)="setClass(sess.value)" name="classy" aria-label="Select class" data-control="select2"
                                                    data-placeholder="Select class.."
                                                    class="form-select form-select-solid form-select-lg">
                                                    <option value="">Select Class...</option>
                                                    <option *ngFor="let session of staffClasses" [value]="session.id">{{session.class}}</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="fv-row mb-10">
                                            <label class="fs-6 fw-bold form-label ">
                                                <span class="required">Session</span>
                                            </label>
                                            <div class="w-100">
                                                <select [(ngModel)]="currentSessionId" name="classu" aria-label="Select class"
                                                    data-control="select2" data-placeholder="Select class.."
                                                    class="form-select form-select-solid form-select-lg">
                                                    <option value="">Select Session...</option>
                                                    <option *ngFor="let session of sessionlist" [value]="session.id">{{session.sessionName}}</option>
                                                </select>
                                                <!-- <input type="text"
                                                    class=" disable form-control form-control-solid"
                                                    placeholder="2023/2024" disabled="" value="2023/2024"> -->
                                            </div>
                                        </div>
                                        <!--begin::Label-->
                                        
                                    </div>
                                    <!--end::Col-->
                                    <!--begin::Col-->
                                    <div class="col-lg-6">
                                        <!--begin::Label-->
                                        <div class="fv-row mb-10">
                                            <label class="fs-6 fw-bold form-label ">
                                                <span class="required">Subject</span>
                                            </label>
                                            <!--end::Label-->
                                            <div class="w-100">
                                                <select [(ngModel)]="currentSubjectId" name="class" aria-label="Select subject" data-control="select2" data-placeholder="Select subject.." class="form-select form-select-solid form-select-lg">
                                                    <option value="">Select Subject...</option>
                                                    <option *ngFor="let session of classSubjects" [value]="session.subjectId">{{session.subjects}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        

                                        
                                        <!--begin::Label-->
                                        <div class="fv-row mb-10">
                                            <label class="fs-6 fw-bold form-label">
                                                <span class="required">Term</span>
                                            </label>
                                            <!--end::Label-->
                                            <div class="w-100">

                                                <!--begin::Input-->
                                                <select [(ngModel)]="currentTerm" name="clasis" aria-label="Select term"
                                                    data-control="select2" data-placeholder="Select term.."
                                                    class="form-select form-select-solid form-select-lg">
                                                    <option selected disabled>Select term</option>
                                                    <option value="FIRST">First</option>
                                                    <option value="SECOND">Second</option>
                                                    <option value="THIRD">Third</option>
                                                </select>
                                                <!--end::Input-->
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <div class="fv-row mb-10">

                                        <div class="w-100 text-center">

                                            <button (click)="getSubjectResultsByClass()" type="button" class="mt-8 w-50 btn btn-info">Show
                                                Students</button>
                                        </div>
                                        <!--end::Row-->
                                    </div>
                                    <div class="card-header border-0 pt-6">
                                        <!--begin::Card title-->
                                        <div class="card-title">
                                            <!--begin::Search-->
                                            <div class="d-flex align-items-center position-relative my-1">
                                                <!--begin::Svg Icon | path: icons/duotune/general/gen021.svg-->
                                                <span class="svg-icon svg-icon-1 position-absolute ms-6">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24"
                                                        height="24" viewBox="0 0 24 24" fill="none">
                                                        <rect opacity="0.5" x="17.0365" y="15.1223"
                                                            width="8.15546" height="2" rx="1"
                                                            transform="rotate(45 17.0365 15.1223)"
                                                            fill="currentColor"></rect>
                                                        <path
                                                            d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z"
                                                            fill="currentColor"></path>
                                                    </svg>
                                                </span>
                                                <!--end::Svg Icon-->
                                                <input #myInput type="text" (keyup)='genk.searchTable(myInput, myTbody)' data-kt-customer-table-filter="search"
                                                    class="form-control form-control-solid w-250px ps-15"
                                                    placeholder="Search ">
                                            </div>
                                            <!--end::Search-->
                                        </div>
                                        <!--begin::Card title-->
                                        <!--begin::Card toolbar-->
                                        <div class="card-toolbar">

                                            <div class="text-end">
                                                <button (click)="exportTable()" type="button" class="btn btn-info">Export</button>
                                            </div>
                                        </div>
                                        <!--end::Row-->
                                    </div>
                                    <!--end::Card toolbar-->
                                </div>


                                <!--begin::Table wrapper-->
                                <div class="table-responsive mb-10">
                                    <!--begin::Table-->
                                    <table id="subjecttable" class="table g-5 gs-0 mb-0 fs-4 text-gray-700"
                                        data-kt-element="items">
                                        <!--begin::Table head-->
                                        <thead>
                                            <tr
                                                class="border-bottom fs-7 fw-bolder text-gray-700 text-uppercase">
                                                <th class="min-w-10px w-10px fixed-column"
                                                    style="background-color: white;">S/N</th>

                                                <th class="min-w-250px w-250px fixed-column"
                                                    style="background-color: white;">Student Name</th>

                                                <th class="min-w-150px w-150px">Admission No</th>
                                                <th class="min-w-200px w-200px text-center">Subject</th>
                                                <th class="min-w-150px w-150px text-center">Total Score</th>
                                                <!-- <th class="min-w-100px w-100px text-start">Average</th> -->
                                                <th class="min-w-150px w-150px text-center">Grade</th>
                                                <th class="min-w-150px w-150px text-center">Position</th>
                                                
                                            </tr>
                                        </thead>
                                        <!--end::Table head-->
                                        <!--begin::Table body-->
                                        <tbody #myTbody>
                                            <tr *ngFor="let item of resultlist; index as i" class="border-bottom border-bottom-dashed"
                                                data-kt-element="Name">
                                                <td class="pe-7 fixed-column"
                                                    style="background-color: white;">
                                                    <span class="mb-1">{{i + 1}}</span>

                                                </td>

                                                <td class="pe-7 fixed-column"
                                                    style="background-color: white;">
                                                    <span class="text-hover-info mb-1">{{item.studentName}}</span>

                                                </td>
                                                <td>
                                                    <span class="text-hover-info mb-1">{{item.admissionNo}}</span>
                                                </td>
                                                <td class="text-center">
                                                    <a class="text-gray-800 text-hover-info mb-1">{{currentSubjectName}}
                                                    </a>
                                                </td>
                                           

                                                <td class="text-center">
                                                    <span class="text-gray-800 text-hover-info mb-1">{{item.totalScore}}</span>
                                                </td>
                                                <td class="text-center">
                                                    <span class="text-gray-800 text-hover-info mb-1">{{item.grade}}</span>

                                                </td>
                                               
                                                <td class="text-center">
                                                    <span class="text-gray-800 text-hover-info mb-1">{{item.totalScore ? formatPosition(i + 1) : ''}}</span>

                                                </td>
                                               
                                            </tr>


                                        </tbody>
                                        <!--end::Table body-->
                                        <!--begin::Table foot-->


                                        <style>
                                            .table {
                                                width: auto;
                                            }

                                            .table-responsive {
                                                overflow-x: auto;
                                                max-width: 100%;
                                            }

                                            .fixed-column {
                                                position: sticky;
                                                left: 0;
                                                background-color: #fff;
                                                /* Optional: Add a background color to the fixed column */
                                                z-index: 1;
                                            }
                                        </style>
                                    </table>

                                    <!--end::Table-->

                                </div>
                                <!--end::Wrapper-->
                                <div class="row">
                                    <div
                                        class="col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start">
                                        <div class="dataTables_length" id="kt_customers_table_length">
                                            <label><select name="kt_customers_table_length"
                                                    aria-controls="kt_customers_table"
                                                    class="form-select form-select-sm form-select-solid">
                                                    <option value="10">10</option>
                                                    <option value="25">25</option>
                                                    <option value="50">50</option>
                                                    <option value="100">100</option>
                                                </select></label></div>
                                    </div>
                                    <div
                                        class="col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end">
                                        <div class="dataTables_paginate paging_simple_numbers"
                                            id="kt_customers_table_paginate">
                                            <ul class="pagination">
                                                <li class="paginate_button page-item previous disabled"
                                                    id="kt_customers_table_previous"><a href="#"
                                                        aria-controls="kt_customers_table" data-dt-idx="0"
                                                        tabindex="0" class="page-link"><i
                                                            class="previous"></i></a></li>
                                                <li class="paginate_button page-item active"><a href="#"
                                                        aria-controls="kt_customers_table" data-dt-idx="1"
                                                        tabindex="0" class="page-link">1</a></li>
                                                <li class="paginate_button page-item next disabled"
                                                    id="kt_customers_table_next"><a href="#"
                                                        aria-controls="kt_customers_table" data-dt-idx="2"
                                                        tabindex="0" class="page-link"><i
                                                            class="next"></i></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <!--end::Form-->

                    </div>
                    <!--end::Card body-->

                </div>
                <!--end::Card-->


                <!--end::Modals-->
            </div>
            <!--end::Container-->
        </div>
        <!--end::Post-->
    </div>
    <!--end::Content-->
    <!--begin::Footer-->
    <div class="footer py-4 d-flex flex-lg-column" id="kt_footer">
        <!--begin::Container-->
        <div
            class="container-fluid d-flex flex-column flex-md-row align-items-center justify-content-between">
            <!--begin::Copyright-->
            <div class="text-dark order-2 order-md-1">
                <span class="text-muted fw-bold me-1">2022©</span>
                <a href="https://GradexCloud.com" target="_blank"
                    class="text-gray-800 text-hover-info">gradeX-Cloud</a>
            </div>
            <!--end::Copyright-->

        </div>
        <!--end::Container-->
    </div>
    <!--end::Footer-->
</div>